<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="Grideaé™æ€ä¸ªäººåšå®¢">
<meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°">
<meta name="theme-color" content="#000">
<title>ChicRingoä¸ªäººåšå®¢</title>
<link rel="shortcut icon" href="/favicon.ico?v=1602402610824">
<link rel="stylesheet" href="/media/css/gemini.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/default.css"
  rel="stylesheet">

<link rel="stylesheet" href="/styles/main.css">

<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>





</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="gemini">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>ChicRingoä¸ªäººåšå®¢</span>
            </a>  
          
        </div>
        
          <p class="subtitle">ç²¾äºå¿ƒï¼Œç®€äºå½¢</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> é¦–é¡µ
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> å½’æ¡£
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> æ ‡ç­¾
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> å…³äº
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> å‹æƒ…é“¾æ¥
                  
                </a>
              </li>
            
          
          
            <li id="fa_search" class="nav-item">
              <a href="javascript:void(0);">
                <i class="fa fa-search"></i> <span class="language" data-lan="search">æœç´¢</span>
              </a>
            </li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout  gemini">
      <div class="section-layout-wrapper">
        <div id="sidebarMeta" class="sidebar">
    
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">å’¸é±¼ä¸€æ¡</p>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">16</span>
        <span class="site-item-stat-name language" data-lan="article">æ–‡ç« </span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">6</span>
        <span class="site-item-stat-name language" data-lan="category">åˆ†ç±»</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">6</span>
        <span class="site-item-stat-name language" data-lan="tag">æ ‡ç­¾</span>
      </a>
    </div>
  </div>
  
    
  
  



  <div style="width: 100%; position: relative;">
    <canvas id="canvasDiyBlock" style="width:100%;">å½“å‰æµè§ˆå™¨ä¸æ”¯æŒcanvasï¼Œè¯·æ›´æ¢æµè§ˆå™¨åå†è¯•</canvas>
    <script src="/media/js/magic/clock.js"></script>
  </div>

</div>
</div>
<script>
  let sidebarMeta = document.querySelector('#sidebarMeta');
  let scheme = 'gemini';
  let sidebarWrapper = document.querySelector('.sidebar-wrapper');
  if (sidebarMeta && (scheme === 'pisces' || scheme === 'gemini')) {
    document.addEventListener('scroll', function(e) {
      if (document.scrollingElement.scrollTop > parseInt(sidebarMeta.style.marginTop) + 10) {
        sidebarWrapper.classList.add('home-sidebar-fixed')
      } else {
        sidebarWrapper.classList.remove('home-sidebar-fixed')
      }
    });
  }
  </script>
        <div class="section-box tag-line box-shadow-wrapper">
          <section class="section tags-section posts-expand bg-color">
            <div class="padding-wrapper">
  <div class="tag-timeline-box">
    <div class="tag-timeline-wrapper">
      <div class="tag-timeline-title">
        <h2>
          MySQL
          <small class="language" data-lan="tag">æ ‡ç­¾</small>
        </h2>
      </div>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <a href="https://ChicRingo.github.io/post/golang-mian-shi-ti/">
        <div class="motion-warpper">
          <div class="tag-post-node">
            <h1>
              08-19
              <small>Golang é¢è¯•é¢˜æ€»ç»“</small>
            </h1>
          </div>
        </div>
      </a>
      
      
      
      
      
      
      
    </div>
  </div>
</div>
          </section>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | Â© 2019-2020 Theme By <a
        href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      
    </div>
  </footer>
  
  
  <div class="gemini back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
  
  
<link rel="stylesheet" href="/media/live2d/css/live2d.css" />
<div class="box-scale">
  <div id="landlord" style="left: 5px;bottom: px;"
    data-key="">
    <canvas id="live2d" width="500" height="560" class="live2d"></canvas>
    

      <div class="message" style="opacity:0"></div>
      <div class="live_talk_input_body">
        <div class="live_talk_input_name_body">
          <input name="name" type="text" class="live_talk_name white_input" id="AIuserName" autocomplete="off"
            placeholder="ä½ çš„åå­—" />
        </div>
        <div class="live_talk_input_text_body">
          <input name="talk" type="text" class="live_talk_talk white_input" id="AIuserText" autocomplete="off"
            placeholder="è¦å’Œæˆ‘èŠä»€ä¹ˆå‘€ï¼Ÿ" />
          <button type="button" class="live_talk_send_btn" id="talk_send">å‘é€</button>
        </div>
      </div>
      <input name="live_talk" id="live_talk" value="1" type="hidden" />
      <div class="live_ico_box">
        <div class="live_ico_item type_info" id="showInfoBtn"></div>
        <div class="live_ico_item type_talk" id="showTalkBtn"></div>
        
        <div class="live_ico_item type_youdu" id="youduButton"></div>
        <div class="live_ico_item type_quit" id="hideButton"></div>
        <input name="live_statu_val" id="live_statu_val" value="0" type="hidden" />
        <audio src="" style="display:none;" id="live2d_bgm" data-bgm="0" preload="none"></audio>
        <input id="duType" value="douqilai" type="hidden">
        
      </div>
    
  </div>
</div>
<div id="open_live2d">å¬å”¤çœ‹æ¿å¨˜</div>
<script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
  var message_Path = 'https://cdn.jsdelivr.net/gh/hsxyhao/live2d.github.io@master/';
  let landlord = document.querySelector('#landlord');
  var apiKey = landlord.dataset.key;
</script>
<script type="text/javascript" src="/media/live2d/js/live2d.js"></script>
<script>
	var home_Path = document.location.protocol + '//' + window.document.location.hostname + ":" + window.document.location.port + '/';
	var userAgent = window.navigator.userAgent.toLowerCase();
	var norunAI = ["android", "iphone", "ipod", "ipad", "windows phone", "mqqbrowser", "msie", "trident/7.0"];
	var norunFlag = false;

	for (var i = 0; i < norunAI.length; i++) {
		if (userAgent.indexOf(norunAI[i]) > -1) {
			norunFlag = true;
			break;
		}
	}

	if (!window.WebGLRenderingContext) {
		norunFlag = true;
	}

	if (!norunFlag) {
		var hitFlag = false;
		var AIFadeFlag = false;
		var liveTlakTimer = null;
		var sleepTimer_ = null;
		var AITalkFlag = false;
		var talkNum = 0;
		(function () {
			function renderTip(template, context) {
				var tokenReg = /(\\)?\{([^\{\}\\]+)(\\)?\}/g;
				return template.replace(tokenReg, function (word, slash1, token, slash2) {
					if (slash1 || slash2) {
						return word.replace('\\', '');
					}
					var variables = token.replace(/\s/g, '').split('.');
					var currentObject = context;
					var i, length, variable;
					for (i = 0, length = variables.length; i < length; ++i) {
						variable = variables[i];
						currentObject = currentObject[variable];
						if (currentObject === undefined || currentObject === null) return '';
					}
					return currentObject;
				});
			}

			String.prototype.renderTip = function (context) {
				return renderTip(this, context);
			};

			var re = /x/;
			re.toString = function () {
				showMessage('å“ˆå“ˆï¼Œä½ æ‰“å¼€äº†æ§åˆ¶å°ï¼Œæ˜¯æƒ³è¦çœ‹çœ‹æˆ‘çš„ç§˜å¯†å—ï¼Ÿ', 5000);
				return '';
			};

			$(document).on('copy', function () {
				showMessage('ä½ éƒ½å¤åˆ¶äº†äº›ä»€ä¹ˆå‘€ï¼Œè½¬è½½è¦è®°å¾—åŠ ä¸Šå‡ºå¤„å“¦~~', 5000);
			});

			function initTips() {
				$.ajax({
					cache: true,
					url: message_Path + 'message.json',
					dataType: "json",
					success: function (result) {
						$.each(result.mouseover, function (index, tips) {
							$(tips.selector).mouseover(function () {
								var text = tips.text;
								if (Array.isArray(tips.text)) text = tips.text[Math.floor(Math.random() * tips.text.length + 1) - 1];
								text = text.renderTip({ text: $(this).text() });
								showMessage(text, 3000);
								talkValTimer();
								clearInterval(liveTlakTimer);
								liveTlakTimer = null;
							});
							$(tips.selector).mouseout(function () {
								showHitokoto();
								if (liveTlakTimer == null) {
									liveTlakTimer = window.setInterval(function () {
										showHitokoto();
									}, 15000);
								};
							});
						});
						$.each(result.click, function (index, tips) {
							$(tips.selector).click(function () {
								if (hitFlag) {
									return false
								}
								hitFlag = true;
								setTimeout(function () {
									hitFlag = false;
								}, 8000);
								var text = tips.text;
								if (Array.isArray(tips.text)) text = tips.text[Math.floor(Math.random() * tips.text.length + 1) - 1];
								text = text.renderTip({ text: $(this).text() });
								showMessage(text, 3000);
							});
							clearInterval(liveTlakTimer);
							liveTlakTimer = null;
							if (liveTlakTimer == null) {
								liveTlakTimer = window.setInterval(function () {
									showHitokoto();
								}, 15000);
							};
						});
					}
				});
			}
			initTips();

			var text;
			if (document.referrer !== '') {
				var referrer = document.createElement('a');
				referrer.href = document.referrer;
				text = 'å—¨ï¼æ¥è‡ª <span style="color:#0099cc;">' + referrer.hostname + '</span> çš„æœ‹å‹ï¼';
				var domain = referrer.hostname.split('.')[1];
				if (domain == 'baidu') {
					text = 'å—¨ï¼ æ¥è‡ª ç™¾åº¦æœç´¢ çš„æœ‹å‹ï¼<br>æ¬¢è¿è®¿é—®<span style="color:#0099cc;">ã€Œ ' + document.title.split(' - ')[0] + ' ã€</span>';
				} else if (domain == 'so') {
					text = 'å—¨ï¼ æ¥è‡ª 360æœç´¢ çš„æœ‹å‹ï¼<br>æ¬¢è¿è®¿é—®<span style="color:#0099cc;">ã€Œ ' + document.title.split(' - ')[0] + ' ã€</span>';
				} else if (domain == 'google') {
					text = 'å—¨ï¼ æ¥è‡ª è°·æ­Œæœç´¢ çš„æœ‹å‹ï¼<br>æ¬¢è¿è®¿é—®<span style="color:#0099cc;">ã€Œ ' + document.title.split(' - ')[0] + ' ã€</span>';
				}
			} else {
				if (window.location.href == home_Path) { //ä¸»é¡µURLåˆ¤æ–­ï¼Œéœ€è¦æ–œæ ç»“å°¾
					var now = (new Date()).getHours();
					if (now > 23 || now <= 5) {
						text = 'ä½ æ˜¯å¤œçŒ«å­å‘€ï¼Ÿè¿™ä¹ˆæ™šè¿˜ä¸ç¡è§‰ï¼Œæ˜å¤©èµ·çš„æ¥å˜›ï¼Ÿ';
					} else if (now > 5 && now <= 7) {
						text = 'æ—©ä¸Šå¥½ï¼ä¸€æ—¥ä¹‹è®¡åœ¨äºæ™¨ï¼Œç¾å¥½çš„ä¸€å¤©å°±è¦å¼€å§‹äº†ï¼';
					} else if (now > 7 && now <= 11) {
						text = 'ä¸Šåˆå¥½ï¼å·¥ä½œé¡ºåˆ©å˜›ï¼Œä¸è¦ä¹…åï¼Œå¤šèµ·æ¥èµ°åŠ¨èµ°åŠ¨å“¦ï¼';
					} else if (now > 11 && now <= 14) {
						text = 'ä¸­åˆäº†ï¼Œå·¥ä½œäº†ä¸€ä¸ªä¸Šåˆï¼Œç°åœ¨æ˜¯åˆé¤æ—¶é—´ï¼';
					} else if (now > 14 && now <= 17) {
						text = 'åˆåå¾ˆå®¹æ˜“çŠ¯å›°å‘¢ï¼Œä»Šå¤©çš„è¿åŠ¨ç›®æ ‡å®Œæˆäº†å—ï¼Ÿ';
					} else if (now > 17 && now <= 19) {
						text = 'å‚æ™šäº†ï¼çª—å¤–å¤•é˜³çš„æ™¯è‰²å¾ˆç¾ä¸½å‘¢ï¼Œæœ€ç¾ä¸è¿‡å¤•é˜³çº¢~~';
					} else if (now > 19 && now <= 21) {
						text = 'æ™šä¸Šå¥½ï¼Œä»Šå¤©è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿ';
					} else if (now > 21 && now <= 23) {
						text = 'å·²ç»è¿™ä¹ˆæ™šäº†å‘€ï¼Œæ—©ç‚¹ä¼‘æ¯å§ï¼Œæ™šå®‰~~';
					} else {
						text = 'å—¨~ å¿«æ¥é€—æˆ‘ç©å§ï¼';
					}
				} else {
					text = 'æ¬¢è¿é˜…è¯»<span style="color:#0099cc;">ã€Œ ' + document.title.split(' - ')[0] + ' ã€</span>';
				}
			}
			showMessage(text, 12000);
		})();

		liveTlakTimer = setInterval(function () {
			showHitokoto();
		}, 15000);

		function showHitokoto() {
			if (sessionStorage.getItem("Sleepy") !== "1") {
				if (!AITalkFlag) {
					$.getJSON('https://v1.hitokoto.cn/', function (result) {
						talkValTimer();
						showMessage(result.hitokoto, 0);
					});
				}
			} else {
				hideMessage(0);
				if (sleepTimer_ == null) {
					sleepTimer_ = setInterval(function () {
						checkSleep();
					}, 200);
				}
			}
		}

		function checkSleep() {
			var sleepStatu = sessionStorage.getItem("Sleepy");
			if (sleepStatu !== '1') {
				talkValTimer();
				showMessage('ä½ å›æ¥å•¦~', 0);
				clearInterval(sleepTimer_);
				sleepTimer_ = null;
			}
		}

		function showMessage(text, timeout) {
			if (Array.isArray(text)) text = text[Math.floor(Math.random() * text.length + 1) - 1];
			$('.message').stop();
			$('.message').html(text);
			$('.message').fadeTo(200, 1);
			//if (timeout === null) timeout = 5000;
			//hideMessage(timeout);
		}
		function talkValTimer() {
			$('#live_talk').val('1');
		}

		function hideMessage(timeout) {
			//$('.message').stop().css('opacity',1);
			if (timeout === null) timeout = 5000;
			$('.message').delay(timeout).fadeTo(200, 0);
		}

		function initLive2d() {
			$('#hideButton').on('click', function () {
				if (AIFadeFlag) {
					return false;
				} else {
					AIFadeFlag = true;
					localStorage.setItem("live2dhidden", "0");
					$('#landlord').fadeOut(200);
					$('#open_live2d').delay(200).fadeIn(200);
					setTimeout(function () {
						AIFadeFlag = false;
					}, 300);
				}
			});
			$('#open_live2d').on('click', function () {
				if (AIFadeFlag) {
					return false;
				} else {
					AIFadeFlag = true;
					localStorage.setItem("live2dhidden", "1");
					$('#open_live2d').fadeOut(200);
					$('#landlord').delay(200).fadeIn(200);
					setTimeout(function () {
						AIFadeFlag = false;
					}, 300);
				}
			});
			$('#youduButton').on('click', function () {
				if ($('#youduButton').hasClass('doudong')) {
					var typeIs = $('#youduButton').attr('data-type');
					$('#youduButton').removeClass('doudong');
					$('body').removeClass(typeIs);
					$('#youduButton').attr('data-type', '');
				} else {
					var duType = $('#duType').val();
					var duArr = duType.split(",");
					var dataType = duArr[Math.floor(Math.random() * duArr.length)];

					$('#youduButton').addClass('doudong');
					$('#youduButton').attr('data-type', dataType);
					$('body').addClass(dataType);
				}
			});
			if (apiKey) {
				$('#showInfoBtn').on('click', function () {
					var live_statu = $('#live_statu_val').val();
					if (live_statu == "0") {
						return
					} else {
						$('#live_statu_val').val("0");
						$('.live_talk_input_body').fadeOut(500);
						AITalkFlag = false;
						showHitokoto();
						$('#showTalkBtn').show();
						$('#showInfoBtn').hide();
					}
				});
				$('#showTalkBtn').on('click', function () {
					var live_statu = $('#live_statu_val').val();
					if (live_statu == "1") {
						return
					} else {
						$('#live_statu_val').val("1");
						$('.live_talk_input_body').fadeIn(500);
						AITalkFlag = true;
						$('#showTalkBtn').hide();
						$('#showInfoBtn').show();

					}
				});
				$('#talk_send').on('click', function () {
					var info_ = $('#AIuserText').val();
					var userid_ = $('#AIuserName').val();
					if (info_ == "") {
						showMessage('å†™ç‚¹ä»€ä¹ˆå§ï¼', 0);
						return;
					}
					if (userid_ == "") {
						showMessage('èŠä¹‹å‰è¯·å‘Šè¯‰æˆ‘ä½ çš„åå­—å§ï¼', 0);
						return;
					}
					showMessage('æ€è€ƒä¸­~', 0);
					let protocol = window.location.protocol.indexOf("s") > 0 ? "https" : "http";
					$.ajax({
						type: "get",
						url: `${protocol}://www.tuling123.com/openapi/api?key=${apiKey}&info=${info_}`,
						dataType: "json",
						success: function (res) {
							talkValTimer();
							showMessage(res.text, 0);
							$('#AIuserText').val("");
							sessionStorage.setItem("live2duser", userid_);
						},
						error: function (e) {
							talkValTimer();
							showMessage('ä¼¼ä¹æœ‰ä»€ä¹ˆé”™è¯¯ï¼Œè¯·å’Œç«™é•¿è”ç³»ï¼', 0);
						}
					});
				});
			} else {
				$('#showInfoBtn').hide();
				$('#showTalkBtn').hide();
			}
			//è·å–éŸ³ä¹ä¿¡æ¯åˆå§‹åŒ–
			var bgmListInfo = $('input[name=live2dBGM]');
			if (bgmListInfo.length == 0) {
				$('#musicButton').hide();
			} else {
				var bgmPlayNow = parseInt($('#live2d_bgm').attr('data-bgm'));
				var bgmPlayTime = 0;
				var live2dBGM_Num = sessionStorage.getItem("live2dBGM_Num");
				var live2dBGM_PlayTime = sessionStorage.getItem("live2dBGM_PlayTime");
				if (live2dBGM_Num) {
					if (live2dBGM_Num <= $('input[name=live2dBGM]').length - 1) {
						bgmPlayNow = parseInt(live2dBGM_Num);
					}
				}
				if (live2dBGM_PlayTime) {
					bgmPlayTime = parseInt(live2dBGM_PlayTime);
				}
				var live2dBGMSrc = bgmListInfo.eq(bgmPlayNow).val();
				$('#live2d_bgm').attr('data-bgm', bgmPlayNow);
				$('#live2d_bgm').attr('src', live2dBGMSrc);
				$('#live2d_bgm')[0].currentTime = bgmPlayTime;
				$('#live2d_bgm')[0].volume = 0.5;
				var live2dBGM_IsPlay = sessionStorage.getItem("live2dBGM_IsPlay");
				var live2dBGM_WindowClose = sessionStorage.getItem("live2dBGM_WindowClose");
				if (live2dBGM_IsPlay == '0' && live2dBGM_WindowClose == '0') {
					$('#live2d_bgm')[0].play();
					$('#musicButton').addClass('play');
				}
				sessionStorage.setItem("live2dBGM_WindowClose", '1');
				$('#musicButton').on('click', function () {
					if ($('#musicButton').hasClass('play')) {
						$('#live2d_bgm')[0].pause();
						$('#musicButton').removeClass('play');
						sessionStorage.setItem("live2dBGM_IsPlay", '1');
					} else {
						$('#live2d_bgm')[0].play();
						$('#musicButton').addClass('play');
						sessionStorage.setItem("live2dBGM_IsPlay", '0');
					}
				});
				window.onbeforeunload = function () {
					sessionStorage.setItem("live2dBGM_WindowClose", '0');
					if ($('#musicButton').hasClass('play')) {
						sessionStorage.setItem("live2dBGM_IsPlay", '0');
					}
				}
				document.getElementById('live2d_bgm').addEventListener("timeupdate", function () {
					var live2dBgmPlayTimeNow = document.getElementById('live2d_bgm').currentTime;
					sessionStorage.setItem("live2dBGM_PlayTime", live2dBgmPlayTimeNow);
				});
				document.getElementById('live2d_bgm').addEventListener("ended", function () {
					var listNow = parseInt($('#live2d_bgm').attr('data-bgm'));
					listNow++;
					if (listNow > $('input[name=live2dBGM]').length - 1) {
						listNow = 0;
					}
					var listNewSrc = $('input[name=live2dBGM]').eq(listNow).val();
					sessionStorage.setItem("live2dBGM_Num", listNow);
					$('#live2d_bgm').attr('src', listNewSrc);
					$('#live2d_bgm')[0].play();
					$('#live2d_bgm').attr('data-bgm', listNow);
				});
				document.getElementById('live2d_bgm').addEventListener("error", function () {
					$('#live2d_bgm')[0].pause();
					$('#musicButton').removeClass('play');
					showMessage('éŸ³ä¹ä¼¼ä¹åŠ è½½ä¸å‡ºæ¥äº†å‘¢ï¼', 0);
				});
			}
			//è·å–ç”¨æˆ·å
			var live2dUser = sessionStorage.getItem("live2duser");
			if (live2dUser !== null) {
				$('#AIuserName').val(live2dUser);
			}
			//è·å–ä½ç½®
			var landL = sessionStorage.getItem("historywidth");
			var landB = sessionStorage.getItem("historyheight");
			if (landL == null || landB == null) {
				landL = '5px'
				landB = '0px'
			}
			$('#landlord').css('left', landL + 'px');
			$('#landlord').css('bottom', landB + 'px');
			//ç§»åŠ¨
			function getEvent() {
				return window.event || arguments.callee.caller.arguments[0];
			}
			var smcc = document.getElementById("landlord");
			var moveX = 0;
			var moveY = 0;
			var moveBottom = 0;
			var moveLeft = 0;
			var moveable = false;
			var docMouseMoveEvent = document.onmousemove;
			var docMouseUpEvent = document.onmouseup;
			smcc.onmousedown = function () {
				var ent = getEvent();
				moveable = true;
				moveX = ent.clientX;
				moveY = ent.clientY;
				var obj = smcc;
				moveBottom = parseInt(obj.style.bottom);
				moveLeft = parseInt(obj.style.left);
				if (isFirefox = navigator.userAgent.indexOf("Firefox") > 0) {
					window.getSelection().removeAllRanges();
				}
				document.onmousemove = function () {
					if (moveable) {
						var ent = getEvent();
						var x = moveLeft + ent.clientX - moveX;
						var y = moveBottom + (moveY - ent.clientY);
						obj.style.left = x + "px";
						obj.style.bottom = y + "px";
					}
				};
				document.onmouseup = function () {
					if (moveable) {
						var historywidth = obj.style.left;
						var historyheight = obj.style.bottom;
						historywidth = historywidth.replace('px', '');
						historyheight = historyheight.replace('px', '');
						sessionStorage.setItem("historywidth", historywidth);
						sessionStorage.setItem("historyheight", historyheight);
						document.onmousemove = docMouseMoveEvent;
						document.onmouseup = docMouseUpEvent;
						moveable = false;
						moveX = 0;
						moveY = 0;
						moveBottom = 0;
						moveLeft = 0;
					}
				};
			};
		}
		$(document).ready(function () {
			var AIimgSrc = [];
			let chooseLive2d = 'tororo'
			if (chooseLive2d === 'histoire') {
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_00.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_01.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_02.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_03.png");
			} else if (chooseLive2d === 'rem') {
				AIimgSrc.push(message_Path + "model/rem/remu2048/texture_00.png");
			} else if (chooseLive2d === 'aoba') {
				AIimgSrc.push(message_Path + "model/aoba/textures/texture_00.png");
			} else if (chooseLive2d === 'hijiki') {
				AIimgSrc.push(message_Path + "model/hijiki/moc/hijiki.2048/texture_00.png");
			} else if (chooseLive2d === 'tororo') {
				AIimgSrc.push(message_Path + "model/tororo/moc/tororo.2048/texture_00.png");
			}
			var images = [];
			var imgLength = AIimgSrc.length;
			var loadingNum = 0;
			for (var i = 0; i < imgLength; i++) {
				images[i] = new Image();
				images[i].src = AIimgSrc[i];
				images[i].onload = function () {
					loadingNum++;
					if (loadingNum === imgLength) {
						var live2dhidden = localStorage.getItem("live2dhidden");
						if (live2dhidden === "0") {
							setTimeout(function () {
								$('#open_live2d').fadeIn(200);
							}, 1300);
						} else {
							setTimeout(function () {
								$('#landlord').fadeIn(200);
							}, 1300);
						}
						let model = '';
						if (chooseLive2d === 'histoire') {
							model = message_Path + "model/histoire/model.json";
						} else if (chooseLive2d === 'rem') {
							model = message_Path + "model/rem/model.json";
						} else if (chooseLive2d === 'aoba') {
							model = message_Path + "model/aoba/model.json";
						} else if (chooseLive2d === 'hijiki') {
							model = message_Path + "model/hijiki/hijiki.model.json";
						} else if (chooseLive2d === 'tororo') {
							model = message_Path + "model/tororo/tororo.model.json";
						}
						setTimeout(function () {
							loadlive2d("live2d", model);
						}, 1000);
						initLive2d();
						images = null;
					}
				}
			}
		});
	}
</script>
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
    back2TopText = document.querySelector('#back_to_top_text'),
    drawerBox = document.querySelector('#drawer_box'),
    rightSideBar = document.querySelector('.sidebar'),
    viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {

    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener('scroll', function (e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });


  let hasCacu = false;
  window.onresize = function () {
    calcuHeight();
  }

  function calcuHeight() {
    // åŠ¨æ€è°ƒæ•´ç«™ç‚¹æ¦‚è§ˆé«˜åº¦
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      window.Velocity(rightSideBar, 'stop');
      window.Velocity(viewport, 'stop');
      window.Velocity(rightMotions, 'stop');
      if (open) {
        window.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function () {
            window.Velocity(rightMotions, transitionDir, {});
          }
        })
        window.Velocity(viewport, openProp, {
          duration: MOTION_TIME
        });
      } else {
        window.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function () {
            window.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        window.Velocity(viewport, closeProp, {
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // é“¾æ¥è·³è½¬
  let newWindow = 'false'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target", "_blank");
      }
    })
  }

  let faSearch = document.querySelector('#fa_search');
  faSearch.addEventListener('click', function () {
    document.querySelector('#search_mask').style = ''
  })

  // ä»£ç é«˜äº®
  hljs.initHighlightingOnLoad();
  
  // ç¦»å¼€å½“å‰é¡µtitleå˜åŒ–
  var leaveTitle = "";
  if (leaveTitle) {
    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState == 'hidden') {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }

</script>
  </div>
</body>

<div class="search-mask" id="search_mask" style="display: none;">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input id="search" type="text" class="language" data-lan="search" placeholder="æœç´¢">
      </div>
      <i id="close" class="fa fa-times-circle"></i>
    </div>
    <div class="stat-box">
      <span id="stat_count">0</span><span class="language" data-lan="stat">æ¡ç›¸å…³æ¡ç›®ï¼Œä½¿ç”¨äº†</span><span id="stat_times">0</span><span class="language" data-lan="stat-time">æ¯«ç§’</span>
      <hr>
    </div>
    <div class="result" id="result">
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/go-mei-ri-yi-ku-zhi-jobrunner/"" data-c="
          &lt;ol&gt;
&lt;li&gt;
&lt;h2 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ Web å¼€å‘ä¸­æ—¶å¸¸ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œæ‰§è¡Œä¸€ä¸ªæ“ä½œä¹‹åï¼Œéœ€è¦ç»™ç”¨æˆ·ä¸€å®šå½¢å¼çš„é€šçŸ¥ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ä¸‹å•ä¹‹åé€šè¿‡é‚®ä»¶å‘é€ç”µå­å‘ç¥¨ï¼Œç½‘ä¸Šè´­ç¥¨æ”¯ä»˜åé€šè¿‡çŸ­ä¿¡å‘é€è½¦æ¬¡ä¿¡æ¯ã€‚ä½†æ˜¯è¿™ç±»éœ€æ±‚å¹¶ä¸éœ€è¦éå¸¸åŠæ—¶ï¼Œå¦‚æœæ”¾åœ¨è¯·æ±‚æµç¨‹ä¸­å¤„ç†ï¼Œä¼šå½±å“è¯·æ±‚çš„å“åº”æ—¶é—´ã€‚è¿™ç±»ä»»åŠ¡æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼æ¥æ‰§è¡Œã€‚&lt;code&gt;jobrunner&lt;/code&gt;å°±æ˜¯å…¶ä¸­ä¸€ä¸ªç”¨æ¥æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„ Go è¯­è¨€åº“ã€‚å¾—ç›Šäºå¼ºå¤§çš„&lt;code&gt;cron&lt;/code&gt;åº“ï¼Œå†æ­é…&lt;code&gt;jobrunner&lt;/code&gt;çš„ä»»åŠ¡çŠ¶æ€ç›‘æ§ï¼Œ&lt;code&gt;jobrunner&lt;/code&gt;éå¸¸æ˜“äºä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;å¿«é€Ÿä½¿ç”¨&#34;&gt;å¿«é€Ÿä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä½¿ç”¨ Go Modulesã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºç›®å½•å¹¶åˆå§‹åŒ–ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ mkdir jobrunner &amp;amp;&amp;amp; cd jobrunner
$ go mod init github.com/darjun/go-daily-lib/jobrunner
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å®‰è£…&lt;code&gt;jobrunner&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ go get -u github.com/bamzi/jobrunner
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;package main

import (
  &amp;quot;fmt&amp;quot;
  &amp;quot;time&amp;quot;

  &amp;quot;github.com/bamzi/jobrunner&amp;quot;
)

type GreetingJob struct {
  Name string
}

func (g GreetingJob) Run() {
  fmt.Println(&amp;quot;Hello, &amp;quot;, g.Name)
}

func main() {
  jobrunner.Start()
  jobrunner.Schedule(&amp;quot;@every 5s&amp;quot;, GreetingJob{Name: &amp;quot;dj&amp;quot;})

  time.Sleep(10 * time.Second)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œæ¯éš” 5s æ‰“å°ä¸€æ¡æ¬¢è¿ä¿¡æ¯ã€‚ä»»åŠ¡çš„åˆ›å»ºå’Œæ‰§è¡Œä¸&lt;code&gt;cron&lt;/code&gt;å®Œå…¨ç›¸åŒï¼Œè¯¦ç»†ä½¿ç”¨è§æˆ‘å‰é¢çš„ä¸€ç¯‡åšæ–‡ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œ&lt;code&gt;jobrunner&lt;/code&gt;éœ€è¦å…ˆ&lt;code&gt;Start()&lt;/code&gt;ï¼Œç„¶åå†æ·»åŠ ä»»åŠ¡ã€‚å› ä¸ºåœ¨&lt;code&gt;Start()&lt;/code&gt;ä¸­åˆ›å»º&lt;code&gt;MainCron&lt;/code&gt;å¯¹è±¡ï¼Œå…ˆæ·»åŠ ä»»åŠ¡ä¼š&lt;code&gt;panic&lt;/code&gt;ï¼ï¼ï¼&lt;/p&gt;
&lt;p&gt;æ³¨æ„&lt;code&gt;main&lt;/code&gt;å‡½æ•°å°¾çš„&lt;code&gt;time.Sleep(10 * time.Second)&lt;/code&gt;ï¼Œå› ä¸ºä¸» goroutine ç»“æŸä¹‹åæ•´ä¸ªç¨‹åºå°±é€€å‡ºäº†ï¼Œ&lt;code&gt;jobrunner&lt;/code&gt;ä¸­çš„ä»»åŠ¡å°±æ²¡æœ‰æœºä¼šè¢«æ‰§è¡Œäº†ã€‚åŠ ä¸Š&lt;code&gt;time.Sleep&lt;/code&gt;æ˜¯ä¸ºäº†è®©å¤§å®¶èƒ½çœ‹åˆ°è¾“å‡ºï¼Œå®é™…ä½¿ç”¨ä¸­ä¸ä¼šè¿™æ ·åšã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸-web-æ¡†æ¶æ•´åˆ&#34;&gt;ä¸ web æ¡†æ¶æ•´åˆ&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;jobrunner&lt;/code&gt;èƒ½å¾ˆæ–¹ä¾¿åœ°ä¸å½“å‰å¸¸è§çš„ Web æ¡†æ¶æ•´åˆï¼Œå¦‚&lt;code&gt;Gin/Echo/Martini/Beego/Revel&lt;/code&gt;ç­‰ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¼”ç¤ºå¦‚ä½•åœ¨ Gin ä¸­ä½¿ç”¨&lt;code&gt;jobrunner&lt;/code&gt;ï¼šç”¨æˆ·ç™»å½•æ—¶ç»™ä»–çš„é‚®ç®±å‘é€ä¸€å°é‚®ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆéœ€è¦å®‰è£…ç›¸åº”çš„åº“ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ go get -u github.com/gin-gonic/gin
$ github.com/jordan-wright/email
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¼–å†™ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;package main

import (
  &amp;quot;fmt&amp;quot;
  &amp;quot;net/smtp&amp;quot;
  &amp;quot;time&amp;quot;

  &amp;quot;github.com/bamzi/jobrunner&amp;quot;
  &amp;quot;github.com/gin-gonic/gin&amp;quot;
  &amp;quot;github.com/jordan-wright/email&amp;quot;
)

type EmailJob struct {
  Name  string
  Email string
}

type User struct {
  Name  string `form:&amp;quot;name&amp;quot;`
  Email string `form:&amp;quot;email&amp;quot;`
}

func (j EmailJob) Run() {
  e := email.NewEmail()
  e.From = &amp;quot;leedarjun@126.com&amp;quot;
  e.To = []string{j.Email}
  e.Cc = []string{&amp;quot;leedarjun@126.com&amp;quot;}
  e.Subject = &amp;quot;Welcome To Awesome-Web&amp;quot;
  e.Text = []byte(fmt.Sprintf(`
  Hello, %s
  Welcome Back
  `, j.Name))

  err := e.Send(&amp;quot;smtp.126.com:25&amp;quot;, smtp.PlainAuth(&amp;quot;&amp;quot;, &amp;quot;leedarjun@126.com&amp;quot;, &amp;quot;yyyyyy&amp;quot;, &amp;quot;smtp.126.com&amp;quot;))
  if err != nil {
    fmt.Printf(&amp;quot;failed to send email to %s, err:%v&amp;quot;, j.Name, err)
  }
}

func login(c *gin.Context) {
  var u User
  if c.ShouldBind(&amp;amp;u) == nil {
    c.String(200, &amp;quot;login success&amp;quot;)

    jobrunner.In(5*time.Second, EmailJob{Name: u.Name, Email: u.Email})
  } else {
    c.String(404, &amp;quot;login failed&amp;quot;)
  }
}

func main() {
  r := gin.Default()
  r.GET(&amp;quot;/login&amp;quot;, login)
  r.Run(&amp;quot;:8888&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œåªæ˜¯ä¸ºäº†ç®€å•æ¼”ç¤ºï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªç®€é™‹çš„&lt;code&gt;login&lt;/code&gt;å‡½æ•°å¤„ç†ç™»å½•ï¼Œä¼ å…¥&lt;code&gt;name&lt;/code&gt;å’Œ&lt;code&gt;email&lt;/code&gt;ï¼Œç„¶åç»™è¯¥&lt;code&gt;email&lt;/code&gt;å‘é€é‚®ä»¶ã€‚&lt;code&gt;email&lt;/code&gt;åº“çš„è¯¦ç»†ä½¿ç”¨å¯ä»¥æŸ¥çœ‹æˆ‘ä¹‹å‰çš„åšæ–‡äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;åªéœ€è¦åœ¨æµè§ˆå™¨ä¸­è¾“å…¥&lt;code&gt;http://localhost:8888/login?name=dj&amp;amp;email=935653229@qq.com&lt;/code&gt;ï¼Œæˆ‘çš„ QQ é‚®ç®±å°±èƒ½æ”¶åˆ°é‚®ä»¶ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/K8wfjf2LnNWiacxBicZx9GWLrWL3QCD5EFdk46hmzrPKRUwViakiad7HsW5wC2zVngb2rn0McfhNhoEG9q3lMyjmtQ/640?wx_fmt=png&amp;amp;tp=webp&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;ç›‘æ§&#34;&gt;ç›‘æ§&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;jobrunner&lt;/code&gt;å†…ç½®äº†ä¸€ä¸ªç›‘æ§æ¨¡å—ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°é€šè¿‡ç½‘é¡µæˆ–è€… API è·å–å½“å‰çš„ä»»åŠ¡çŠ¶æ€æ•°æ®ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;package main

import (
  &amp;quot;fmt&amp;quot;
  &amp;quot;html/template&amp;quot;
  &amp;quot;os&amp;quot;
  &amp;quot;time&amp;quot;

  &amp;quot;github.com/bamzi/jobrunner&amp;quot;
  &amp;quot;github.com/gin-gonic/gin&amp;quot;
)

type GreetingJob struct {
  Name string
}

func (g GreetingJob) Run() {
  fmt.Println(&amp;quot;Hello,&amp;quot;, g.Name)
}

type EmailJob struct {
  Email string
}

func (e EmailJob) Run() {
  fmt.Println(&amp;quot;Send,&amp;quot;, e.Email)
}

func main() {
  r := gin.Default()

  jobrunner.Start()
  jobrunner.Every(5*time.Second, GreetingJob{Name: &amp;quot;dj&amp;quot;})
  jobrunner.Every(10*time.Second, EmailJob{Email: &amp;quot;935653229@qq.com&amp;quot;})

  r.GET(&amp;quot;/jobrunner/json&amp;quot;, JobJson)
  r.GET(&amp;quot;/jobrunner/html&amp;quot;, JobHtml)

  r.Run(&amp;quot;:8888&amp;quot;)
}

func JobJson(c *gin.Context) {
  c.JSON(200, jobrunner.StatusJson())
}

func JobHtml(c *gin.Context) {
  t, err := template.ParseFiles(os.Getenv(&amp;quot;GOPATH&amp;quot;) + &amp;quot;/src/github.com/bamzi/jobrunner/views/Status.html&amp;quot;)
  if err != nil {
    c.JSON(400, &amp;quot;error&amp;quot;)
  }
  t.Execute(c.Writer, jobrunner.StatusPage())
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿è¡Œä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥&lt;code&gt;http://localhost:8888/jobrunner/html&lt;/code&gt;æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/K8wfjf2LnNWiacxBicZx9GWLrWL3QCD5EF2KYuh16uQkoqLkHok2cIH6oACuXYvLThnPaInUu2gicpg7N4a7A01pg/640?wx_fmt=png&amp;amp;tp=webp&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œæ˜¾ç¤ºä»»åŠ¡åã€ä»»åŠ¡ IDã€çŠ¶æ€ã€ä¸Šæ¬¡è¿è¡Œæ—¶é—´ã€ä¸‹æ¬¡è¿è¡Œæ—¶é—´ä»¥åŠå¤„ç†å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡&lt;code&gt;http://localhost:8888/jobrunner/json&lt;/code&gt;è·å–åŸå§‹ JSON æ ¼å¼çš„æ•°æ®è‡ªå·±å¤„ç†ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/K8wfjf2LnNWiacxBicZx9GWLrWL3QCD5EFMdLTUsC2a5kibeIj35PZOvmuVUMOhTpBow83yTBh7jdEUeRQsAiaQCxg/640?wx_fmt=png&amp;amp;tp=webp&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å¤§å®¶å¦‚æœå‘ç°å¥½ç©ã€å¥½ç”¨çš„ Go è¯­è¨€åº“ï¼Œæ¬¢è¿åˆ° Go æ¯æ—¥ä¸€åº“ GitHub ä¸Šæäº¤ issueğŸ˜„&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;jobrunner GitHubï¼šhttps://github.com/bamzi/jobrunner&lt;/li&gt;
&lt;li&gt;Go æ¯æ—¥ä¸€åº“ GitHubï¼šhttps://github.com/darjun/go-daily-lib&lt;/li&gt;
&lt;/ol&gt;
">Go æ¯æ—¥ä¸€åº“ä¹‹ jobrunner</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/li-yong-go-fan-she-ji-zhi-shi-xian-pan-duan-slice-zhong-shi-fou-cun-zai-mou-ge-item/"" data-c="
          &lt;h2 id=&#34;ä¸ºä»€ä¹ˆéœ€è¦&#34;&gt;ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸é‡åˆ°éœ€è¦åˆ¤æ–­æŸä¸ª slice(æˆ–è€… array)ä¸­æ˜¯å¦åŒ…å«æŸä¸ª item çš„æƒ…å†µï¼Œæ¯”å¦‚åˆ¤æ–­ 10 æ˜¯å¦åœ¨[]int{1,2,3}ä¸­&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;æ€ä¹ˆåš&#34;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•æ˜¯éå† slice ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°äº†è¯¥å…ƒç´ ï¼Œå¦åˆ™è¿”å› falseï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package main

func IsInSlice(value int, sli []int) bool {
    for _, v := range sli {
     if value == v {
      return true
     }
    }
    return false
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•å®ç°ç•¥æ˜¾ç¬¨æ‹™ï¼Œå¹¶ä¸”é’ˆå¯¹ä¸åŒçš„æ•°æ®ç±»å‹æ— æ³•é€šç”¨ï¼Œå¦‚æœæœ‰ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œåˆ™å®¹æ˜“ç”Ÿæˆå¾ˆå¤šç›¸åŒåŠŸèƒ½çš„å‡½æ•°ï¼Œåªæ˜¯å‚æ•°ä¸åŒï¼Œè¿™æ ·çš„è¯ä»£ç å¯ç”¨æ€§å¹¶ä¸é«˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•æ”¹è¿›&#34;&gt;å¦‚ä½•æ”¹è¿›&lt;/h2&gt;
&lt;p&gt;golang ä¸­å¯ä»¥é€šè¿‡ reflect åŒ…ä¸­çš„ TypeOf(), ValueOf()å’Œ DeepEqual()æ¥å£å¯¹æ–¹æ³•è¿›è¡Œæ”¹è¿›ï¼Œæ–¹æ³•å‚æ•°ä½¿ç”¨ interface{}ç±»å‹ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package main

import &amp;quot;reflect&amp;quot;

func IsInSlice(value interface{}, sli interface{}) bool {
    switch reflect.TypeOf(sli).Kind() {
    case reflect.Slice, reflect.Array:
     s := reflect.ValueOf(sli)
     for i := 0; i &amp;lt; s.Len(); i++ {
      if reflect.DeepEqual(value, s.Index(i).Interface()) {
       return true
      }
     }
    }
    return false
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¬é—´ä¸ç”¨å†ä¸ºä¸åŒæ•°æ®ç±»å‹éœ€è¦å†™ä¸åŒå‡½æ•°è€Œå¿ƒçƒ¦äº†ï¼&lt;/p&gt;
&lt;h2 id=&#34;æç¤º&#34;&gt;æç¤º&lt;/h2&gt;
&lt;p&gt;å› ä¸ºåå°„éœ€è¦çš„æ—¶é—´å¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥é€šç”¨å†™æ³•çš„æ•ˆç‡è‚¯å®šæ¯”ç‰¹å®šç±»å‹çš„å†™æ³•ä½ï¼Œæ‰€ä»¥éœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥æƒè¡¡ä½¿ç”¨ï¼Œå¦‚ä¸‹æˆªå›¾ä¸º int ç±»å‹çš„åŸºå‡†æµ‹è¯•ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://pyihe.github.io/assets/img/2020-05-29/%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡ä½œè€…ï¼špyihe&lt;/p&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼šhttps://pyihe.github.io/2020/05/29/Golang%E5%88%A4%E6%96%ADslice%E4%B8%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E6%9F%90%E4%B8%AAitem.html&lt;/p&gt;
&lt;/blockquote&gt;
">åˆ©ç”¨Goåå°„æœºåˆ¶å®ç°åˆ¤æ–­sliceä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªitem</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/shi-yong-go-shi-xian-gof-de-23-chong-she-ji-mo-shi-er/"" data-c="
          &lt;p&gt;ä½œè€…ï¼šå…ƒé—°å­&lt;br&gt;
é“¾æ¥ï¼šhttps://juejin.im/post/6864011017384132621&lt;br&gt;
æ¥æºï¼šæ˜é‡‘&lt;br&gt;
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä¸Šä¸€ç¯‡æ–‡ç« &lt;a href=&#34;https://juejin.im/post/6859015515344633863&#34;&gt;ã€Šä½¿ç”¨Goå®ç°GoFçš„23ç§è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰ã€‹&lt;/a&gt;ä»‹ç»äº†23ç§è®¾è®¡æ¨¡å¼ä¸­çš„&lt;strong&gt;åˆ›å»ºå‹æ¨¡å¼&lt;/strong&gt;ï¼ˆCreational Patternï¼‰ï¼Œåˆ›å»ºå‹æ¨¡å¼æ˜¯å¤„ç†å¯¹è±¡åˆ›å»ºçš„ä¸€ç±»è®¾è®¡æ¨¡å¼ï¼Œä¸»è¦æ€æƒ³æ˜¯&lt;strong&gt;å‘å¯¹è±¡çš„ä½¿ç”¨è€…éšè—å¯¹è±¡åˆ›å»ºçš„å…·ä½“ç»†èŠ‚&lt;/strong&gt;ï¼Œä»è€Œè¾¾åˆ°è§£è€¦çš„ç›®çš„ã€‚æœ¬æ–‡ä¸»è¦èšç„¦åœ¨&lt;strong&gt;ç»“æ„å‹æ¨¡å¼&lt;/strong&gt;ï¼ˆStructural Patternï¼‰ä¸Šï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯&lt;strong&gt;å°†å¤šä¸ªå¯¹è±¡ç»„è£…æˆè¾ƒå¤§çš„ç»“æ„ï¼Œå¹¶åŒæ—¶ä¿æŒç»“æ„çš„çµæ´»å’Œé«˜æ•ˆ&lt;/strong&gt;ï¼Œä»ç¨‹åºçš„ç»“æ„ä¸Šè§£å†³æ¨¡å—ä¹‹é—´çš„è€¦åˆé—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»„åˆæ¨¡å¼composite-pattern&#34;&gt;ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlly1ghvdqutjd5j312k0iue81.jpg&#34; alt=&#34;ç»„åˆæ¨¡å¼ç»“æ„&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ç®€è¿°&#34;&gt;ç®€è¿°&lt;/h3&gt;
&lt;p&gt;åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªå¸¸è§çš„å¯¹è±¡è®¾è®¡æ–¹æ³•ï¼Œ&lt;strong&gt;ç»„åˆ&lt;/strong&gt;å’Œ&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;ï¼Œä¸¤è€…éƒ½å¯ä»¥è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨åè€…æ—¶å®¹æ˜“å‡ºç°ç»§æ‰¿å±‚æ¬¡è¿‡æ·±ï¼Œå¯¹è±¡å…³ç³»è¿‡äºå¤æ‚çš„å‰¯ä½œç”¨ï¼Œä»è€Œå¯¼è‡´ä»£ç çš„å¯ç»´æŠ¤æ€§å˜å·®ã€‚å› æ­¤ï¼Œä¸€ä¸ªç»å…¸çš„é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™æ˜¯ï¼š&lt;strong&gt;ç»„åˆä¼˜äºç»§æ‰¿&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç»„åˆæ‰€è¡¨ç¤ºçš„è¯­ä¹‰ä¸ºâ€œhas-aâ€ï¼Œä¹Ÿå°±æ˜¯éƒ¨åˆ†å’Œæ•´ä½“çš„å…³ç³»ï¼Œæœ€ç»å…¸çš„ç»„åˆæ¨¡å¼æè¿°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Goè¯­è¨€å¤©ç„¶å°±æ”¯æŒäº†ç»„åˆæ¨¡å¼ï¼Œè€Œä¸”ä»å®ƒä¸æ”¯æŒç»§æ‰¿å…³ç³»çš„ç‰¹ç‚¹æ¥çœ‹ï¼ŒGoä¹Ÿå¥‰è¡Œäº†&lt;strong&gt;ç»„åˆä¼˜äºç»§æ‰¿&lt;/strong&gt;çš„åŸåˆ™ï¼Œé¼“åŠ±å¤§å®¶åœ¨è¿›è¡Œç¨‹åºè®¾è®¡æ—¶å¤šé‡‡ç”¨ç»„åˆçš„æ–¹æ³•ã€‚Goå®ç°ç»„åˆæ¨¡å¼çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯&lt;strong&gt;ç›´æ¥ç»„åˆ&lt;/strong&gt;ï¼ˆDirect Compositionï¼‰å’Œ&lt;strong&gt;åµŒå…¥ç»„åˆ&lt;/strong&gt;ï¼ˆEmbedding Compositionï¼‰ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¢è®¨è¿™ä¸¤ç§ä¸åŒçš„å®ç°æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;goå®ç°&#34;&gt;Goå®ç°&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;ç›´æ¥ç»„åˆï¼ˆDirect Compositionï¼‰çš„å®ç°æ–¹å¼ç±»ä¼¼äºJava/C++ï¼Œå°±æ˜¯å°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å±æ€§ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„å®ç°å¦‚&lt;a href=&#34;https://juejin.im/post/6859015515344633863&#34;&gt;ã€Šä½¿ç”¨Goå®ç°GoFçš„23ç§è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰ã€‹&lt;/a&gt;ä¸­æ‰€ä¸¾çš„ä¾‹å­ï¼Œä¸€ä¸ª&lt;code&gt;Message&lt;/code&gt;ç»“æ„ä½“ï¼Œç”±&lt;code&gt;Header&lt;/code&gt;å’Œ&lt;code&gt;Body&lt;/code&gt;æ‰€ç»„æˆã€‚é‚£ä¹ˆ&lt;code&gt;Message&lt;/code&gt;å°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œè€Œ&lt;code&gt;Header&lt;/code&gt;å’Œ&lt;code&gt;Body&lt;/code&gt;åˆ™ä¸ºæ¶ˆæ¯çš„ç»„æˆéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type Message struct {
    Header *Header
    Body   *Body
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¾‹å­ï¼ŒåŒæ ·è€ƒè™‘ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æ‰€æè¿°çš„æ’ä»¶æ¶æ„é£æ ¼çš„æ¶ˆæ¯å¤„ç†ç³»ç»Ÿã€‚å‰é¢æˆ‘ä»¬ç”¨&lt;strong&gt;æŠ½è±¡å·¥å‚æ¨¡å¼&lt;/strong&gt;è§£å†³äº†æ’ä»¶åŠ è½½çš„é—®é¢˜ï¼Œé€šå¸¸ï¼Œæ¯ä¸ªæ’ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¸¸è§çš„å°±æ˜¯å¯åŠ¨çŠ¶æ€å’Œåœæ­¢çŠ¶æ€ï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨&lt;strong&gt;ç»„åˆæ¨¡å¼&lt;/strong&gt;æ¥è§£å†³æ’ä»¶çš„å¯åŠ¨å’Œåœæ­¢é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆç»™&lt;code&gt;Plugin&lt;/code&gt;æ¥å£æ·»åŠ å‡ ä¸ªç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package plugin
...
// æ’ä»¶è¿è¡ŒçŠ¶æ€
type Status uint8

const (
    Stopped Status = iota
    Started
)

type Plugin interface {
  // å¯åŠ¨æ’ä»¶
    Start()
  // åœæ­¢æ’ä»¶
    Stop()
  // è¿”å›æ’ä»¶å½“å‰çš„è¿è¡ŒçŠ¶æ€
    Status() Status
}
// Inputã€Filterã€Outputä¸‰ç±»æ’ä»¶æ¥å£çš„å®šä¹‰è·Ÿä¸Šä¸€ç¯‡æ–‡ç« ç±»ä¼¼
// è¿™é‡Œä½¿ç”¨Messageç»“æ„ä½“æ›¿ä»£äº†åŸæ¥çš„stringï¼Œä½¿å¾—è¯­ä¹‰æ›´æ¸…æ™°
type Input interface {
    Plugin
    Receive() *msg.Message
}

type Filter interface {
    Plugin
    Process(msg *msg.Message) *msg.Message
}

type Output interface {
    Plugin
    Send(msg *msg.Message)
}

å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯¹äºæ’ä»¶åŒ–çš„æ¶ˆæ¯å¤„ç†ç³»ç»Ÿè€Œè¨€ï¼Œä¸€åˆ‡çš†æ˜¯æ’ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å°†&lt;code&gt;Pipeine&lt;/code&gt;ä¹Ÿè®¾è®¡æˆä¸€ä¸ªæ’ä»¶ï¼Œå®ç°&lt;code&gt;Plugin&lt;/code&gt;æ¥å£ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package pipeline
...
// ä¸€ä¸ªPipelineç”±inputã€filterã€outputä¸‰ä¸ªPluginç»„æˆ
type Pipeline struct {
    status plugin.Status
    input  plugin.Input
    filter plugin.Filter
    output plugin.Output
}

func (p *Pipeline) Exec() {
    msg := p.input.Receive()
    msg = p.filter.Process(msg)
    p.output.Send(msg)
}
// å¯åŠ¨çš„é¡ºåº output -&amp;gt; filter -&amp;gt; input
func (p *Pipeline) Start() {
    p.output.Start()
    p.filter.Start()
    p.input.Start()
    p.status = plugin.Started
    fmt.Println(&amp;quot;Hello input plugin started.&amp;quot;)
}
// åœæ­¢çš„é¡ºåº input -&amp;gt; filter -&amp;gt; output
func (p *Pipeline) Stop() {
    p.input.Stop()
    p.filter.Stop()
    p.output.Stop()
    p.status = plugin.Stopped
    fmt.Println(&amp;quot;Hello input plugin stopped.&amp;quot;)
}

func (p *Pipeline) Status() plugin.Status {
    return p.status
}

å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸€ä¸ª&lt;code&gt;Pipeline&lt;/code&gt;ç”±&lt;code&gt;Input&lt;/code&gt;ã€&lt;code&gt;Filter&lt;/code&gt;ã€&lt;code&gt;Output&lt;/code&gt;ä¸‰ç±»æ’ä»¶ç»„æˆï¼Œå½¢æˆäº†â€œéƒ¨åˆ†-æ•´ä½“â€çš„å…³ç³»ï¼Œè€Œä¸”å®ƒä»¬éƒ½å®ç°äº†&lt;code&gt;Plugin&lt;/code&gt;æ¥å£ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ç»„åˆæ¨¡å¼çš„å®ç°ã€‚Clientæ— éœ€æ˜¾å¼åœ°å¯åŠ¨å’Œåœæ­¢&lt;code&gt;Input&lt;/code&gt;ã€&lt;code&gt;Filter&lt;/code&gt;å’Œ&lt;code&gt;Output&lt;/code&gt;æ’ä»¶ï¼Œåœ¨è°ƒç”¨&lt;code&gt;Pipeline&lt;/code&gt;å¯¹è±¡çš„&lt;code&gt;Start&lt;/code&gt;å’Œ&lt;code&gt;Stop&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œ&lt;code&gt;Pipeline&lt;/code&gt;å°±å·²ç»å¸®ä½ æŒ‰é¡ºåºå®Œæˆå¯¹åº”æ’ä»¶çš„å¯åŠ¨å’Œåœæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”äºä¸Šä¸€ç¯‡æ–‡ç« ï¼Œåœ¨æœ¬æ–‡ä¸­å®ç°&lt;code&gt;Input&lt;/code&gt;ã€&lt;code&gt;Filter&lt;/code&gt;ã€&lt;code&gt;Output&lt;/code&gt;ä¸‰ç±»æ’ä»¶æ—¶ï¼Œéœ€è¦å¤šå®ç°3ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ã€‚è¿˜æ˜¯ä»¥ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„&lt;code&gt;HelloInput&lt;/code&gt;ã€&lt;code&gt;UpperFilter&lt;/code&gt;å’Œ&lt;code&gt;ConsoleOutput&lt;/code&gt;ä½œä¸ºä¾‹å­ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package plugin
...
type HelloInput struct {
    status Status
}

func (h *HelloInput) Receive() *msg.Message {
  // å¦‚æœæ’ä»¶æœªå¯åŠ¨ï¼Œåˆ™è¿”å›nil
    if h.status != Started {
        fmt.Println(&amp;quot;Hello input plugin is not running, input nothing.&amp;quot;)
        return nil
    }
    return msg.Builder().
        WithHeaderItem(&amp;quot;content&amp;quot;, &amp;quot;text&amp;quot;).
        WithBodyItem(&amp;quot;Hello World&amp;quot;).
        Build()
}

func (h *HelloInput) Start() {
    h.status = Started
    fmt.Println(&amp;quot;Hello input plugin started.&amp;quot;)
}

func (h *HelloInput) Stop() {
    h.status = Stopped
    fmt.Println(&amp;quot;Hello input plugin stopped.&amp;quot;)
}

func (h *HelloInput) Status() Status {
    return h.status
}
å¤åˆ¶ä»£ç 
package plugin
...
type UpperFilter struct {
    status Status
}

func (u *UpperFilter) Process(msg *msg.Message) *msg.Message {
    if u.status != Started {
        fmt.Println(&amp;quot;Upper filter plugin is not running, filter nothing.&amp;quot;)
        return msg
    }
    for i, val := range msg.Body.Items {
        msg.Body.Items[i] = strings.ToUpper(val)
    }
    return msg
}

func (u *UpperFilter) Start() {
    u.status = Started
    fmt.Println(&amp;quot;Upper filter plugin started.&amp;quot;)
}

func (u *UpperFilter) Stop() {
    u.status = Stopped
    fmt.Println(&amp;quot;Upper filter plugin stopped.&amp;quot;)
}

func (u *UpperFilter) Status() Status {
    return u.status
}

å¤åˆ¶ä»£ç 
package plugin
...
type ConsoleOutput struct {
    status Status
}

func (c *ConsoleOutput) Send(msg *msg.Message) {
    if c.status != Started {
        fmt.Println(&amp;quot;Console output is not running, output nothing.&amp;quot;)
        return
    }
    fmt.Printf(&amp;quot;Output:\n\tHeader:%+v, Body:%+v\n&amp;quot;, msg.Header.Items, msg.Body.Items)
}

func (c *ConsoleOutput) Start() {
    c.status = Started
    fmt.Println(&amp;quot;Console output plugin started.&amp;quot;)
}

func (c *ConsoleOutput) Stop() {
    c.status = Stopped
    fmt.Println(&amp;quot;Console output plugin stopped.&amp;quot;)
}

func (c *ConsoleOutput) Status() Status {
    return c.status
}

å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package test
...
func TestPipeline(t *testing.T) {
    p := pipeline.Of(pipeline.DefaultConfig())
    p.Start()
    p.Exec()
    p.Stop()
}
// è¿è¡Œç»“æœ
=== RUN   TestPipeline
Console output plugin started.
Upper filter plugin started.
Hello input plugin started.
Pipeline started.
Output:
    Header:map[content:text], Body:[HELLO WORLD]
Hello input plugin stopped.
Upper filter plugin stopped.
Console output plugin stopped.
Hello input plugin stopped.
--- PASS: TestPipeline (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;ç»„åˆæ¨¡å¼çš„å¦ä¸€ç§å®ç°ï¼ŒåµŒå…¥ç»„åˆï¼ˆEmbedding Compositionï¼‰ï¼Œå…¶å®å°±æ˜¯åˆ©ç”¨äº†Goè¯­è¨€çš„åŒ¿åæˆå‘˜ç‰¹æ€§ï¼Œæœ¬è´¨ä¸Šè·Ÿç›´æ¥ç»„åˆæ˜¯ä¸€è‡´çš„ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;è¿˜æ˜¯ä»¥Messageç»“æ„ä½“ä¸ºä¾‹ï¼Œå¦‚æœé‡‡ç”¨åµŒå…¥ç»„åˆï¼Œåˆ™çœ‹èµ·æ¥åƒæ˜¯è¿™æ ·ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type Message struct {
    Header
    Body
}
// ä½¿ç”¨æ—¶ï¼ŒMessageå¯ä»¥å¼•ç”¨Headerå’ŒBodyçš„æˆå‘˜å±æ€§ï¼Œä¾‹å¦‚ï¼š
msg := &amp;amp;Message{}
msg.SrcAddr = &amp;quot;192.168.0.1&amp;quot;
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;é€‚é…å™¨æ¨¡å¼adapter-pattern&#34;&gt;é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1ghzyia5t19j315w0k0kjl.jpg&#34; alt=&#34;é€‚é…å™¨æ¨¡å¼ç»“æ„&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ç®€è¿°-2&#34;&gt;ç®€è¿°&lt;/h3&gt;
&lt;p&gt;é€‚é…å™¨æ¨¡å¼æ˜¯æœ€å¸¸ç”¨çš„ç»“æ„å‹æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒè®©åŸæœ¬å› ä¸ºæ¥å£ä¸åŒ¹é…è€Œæ— æ³•ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªå¯¹è±¡èƒ½å¤Ÿä¸€èµ·å·¥ä½œã€‚åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œé€‚é…å™¨æ¨¡å¼ä¹Ÿæ˜¯å¤„å¤„å¯è§ï¼Œæ¯”å¦‚ç”µæºæ’å¤´è½¬æ¢å™¨ï¼Œå¯ä»¥è®©è‹±å¼çš„æ’å¤´å·¥ä½œåœ¨ä¸­å¼çš„æ’åº§ä¸Šã€‚é€‚é…å™¨æ¨¡å¼æ‰€åšçš„å°±æ˜¯&lt;strong&gt;å°†ä¸€ä¸ªæ¥å£&lt;code&gt;Adaptee&lt;/code&gt;ï¼Œé€šè¿‡é€‚é…å™¨&lt;code&gt;Adapter&lt;/code&gt;è½¬æ¢æˆClientæ‰€æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£&lt;code&gt;Target&lt;/code&gt;æ¥ä½¿ç”¨&lt;/strong&gt;ï¼Œå®ç°åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯&lt;code&gt;Adapter&lt;/code&gt;é€šè¿‡å®ç°&lt;code&gt;Target&lt;/code&gt;æ¥å£ï¼Œå¹¶åœ¨å¯¹åº”çš„æ–¹æ³•ä¸­è°ƒç”¨&lt;code&gt;Adaptee&lt;/code&gt;çš„æ¥å£å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„åº”ç”¨åœºæ™¯æ˜¯ï¼Œ&lt;em&gt;ç³»ç»Ÿä¸­ä¸€ä¸ªè€çš„æ¥å£å·²ç»è¿‡æ—¶å³å°†åºŸå¼ƒï¼Œä½†å› ä¸ºå†å²åŒ…è¢±æ²¡æ³•ç«‹å³å°†è€æ¥å£å…¨éƒ¨æ›¿æ¢ä¸ºæ–°æ¥å£ï¼Œè¿™æ—¶å¯ä»¥æ–°å¢ä¸€ä¸ªé€‚é…å™¨ï¼Œå°†è€çš„æ¥å£é€‚é…æˆæ–°çš„æ¥å£æ¥ä½¿ç”¨&lt;/em&gt;ã€‚é€‚é…å™¨æ¨¡å¼å¾ˆå¥½çš„è·µè¡Œäº†é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™é‡Œçš„&lt;strong&gt;å¼€é—­åŸåˆ™&lt;/strong&gt;ï¼ˆopen/closed principleï¼‰ï¼Œæ–°å¢ä¸€ä¸ªæ¥å£æ—¶ä¹Ÿæ— éœ€ä¿®æ”¹è€æ¥å£ï¼Œåªéœ€å¤šåŠ ä¸€ä¸ªé€‚é…å±‚å³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;goå®ç°-2&#34;&gt;Goå®ç°&lt;/h3&gt;
&lt;p&gt;ç»§ç»­è€ƒè™‘ä¸Šä¸€èŠ‚çš„æ¶ˆæ¯å¤„ç†ç³»ç»Ÿä¾‹å­ï¼Œç›®å‰ä¸ºæ­¢ï¼Œç³»ç»Ÿçš„è¾“å…¥éƒ½æºè‡ªäº&lt;code&gt;HelloInput&lt;/code&gt;ï¼Œç°åœ¨å‡è®¾éœ€è¦ç»™ç³»ç»Ÿæ–°å¢ä»Kafkaæ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¥æ”¶æ•°æ®çš„åŠŸèƒ½ï¼Œå…¶ä¸­Kafkaæ¶ˆè´¹è€…çš„æ¥å£å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package kafka
...
type Records struct {
    Items []string
}

type Consumer interface {
    Poll() Records
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç”±äºå½“å‰&lt;code&gt;Pipeline&lt;/code&gt;çš„è®¾è®¡æ˜¯é€šè¿‡&lt;code&gt;plugin.Input&lt;/code&gt;æ¥å£æ¥è¿›è¡Œæ•°æ®æ¥æ”¶ï¼Œå› æ­¤&lt;code&gt;kafka.Consumer&lt;/code&gt;å¹¶ä¸èƒ½ç›´æ¥é›†æˆåˆ°ç³»ç»Ÿä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ€ä¹ˆåŠï¼Ÿä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†èƒ½è®©&lt;code&gt;Pipeline&lt;/code&gt;èƒ½å¤Ÿä½¿ç”¨&lt;code&gt;kafka.Consumer&lt;/code&gt;æ¥å£ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªé€‚é…å™¨å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package plugin
...
type KafkaInput struct {
    status Status
    consumer kafka.Consumer
}

func (k *KafkaInput) Receive() *msg.Message {
    records := k.consumer.Poll()
    if k.status != Started {
        fmt.Println(&amp;quot;Kafka input plugin is not running, input nothing.&amp;quot;)
        return nil
    }
    return msg.Builder().
        WithHeaderItem(&amp;quot;content&amp;quot;, &amp;quot;kafka&amp;quot;).
        WithBodyItems(records.Items).
        Build()
}

// åœ¨è¾“å…¥æ’ä»¶æ˜ å°„å…³ç³»ä¸­åŠ å…¥kafkaï¼Œç”¨äºé€šè¿‡åå°„åˆ›å»ºinputå¯¹è±¡
func init() {
    inputNames[&amp;quot;hello&amp;quot;] = reflect.TypeOf(HelloInput{})
    inputNames[&amp;quot;kafka&amp;quot;] = reflect.TypeOf(KafkaInput{})
}
...
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å› ä¸ºGoè¯­è¨€å¹¶æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œå¦‚æœæŒ‰ç…§ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„&lt;strong&gt;æŠ½è±¡å·¥å‚æ¨¡å¼&lt;/strong&gt;æ¥åˆ›å»º&lt;code&gt;KafkaInput&lt;/code&gt;ï¼Œé‚£ä¹ˆå¾—åˆ°çš„å®ä¾‹ä¸­çš„&lt;code&gt;consumer&lt;/code&gt;æˆå‘˜å› ä¸ºæ²¡æœ‰è¢«åˆå§‹åŒ–è€Œä¼šæ˜¯&lt;code&gt;nil&lt;/code&gt;ã€‚å› æ­¤ï¼Œéœ€è¦ç»™&lt;code&gt;Plugin&lt;/code&gt;æ¥å£æ–°å¢ä¸€ä¸ª&lt;code&gt;Init&lt;/code&gt;æ–¹æ³•ï¼Œç”¨äºå®šä¹‰æ’ä»¶çš„ä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œå¹¶åœ¨å·¥å‚è¿”å›å®ä¾‹å‰è°ƒç”¨ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package plugin
...
type Plugin interface {
    Start()
    Stop()
    Status() Status
    // æ–°å¢åˆå§‹åŒ–æ–¹æ³•ï¼Œåœ¨æ’ä»¶å·¥å‚è¿”å›å®ä¾‹å‰è°ƒç”¨
    Init()
}

// ä¿®æ”¹åçš„æ’ä»¶å·¥å‚å®ç°å¦‚ä¸‹
func (i *InputFactory) Create(conf Config) Plugin {
    t, _ := inputNames[conf.Name]
    p := reflect.New(t).Interface().(Plugin)
  // è¿”å›æ’ä»¶å®ä¾‹å‰è°ƒç”¨Initå‡½æ•°ï¼Œå®Œæˆç›¸å…³åˆå§‹åŒ–æ–¹æ³•
    p.Init()
    return p
}

// KakkaInputçš„Initå‡½æ•°å®ç°
func (k *KafkaInput) Init() {
    k.consumer = &amp;amp;kafka.MockConsumer{}
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸Šè¿°ä»£ç ä¸­çš„&lt;code&gt;kafka.MockConsumer&lt;/code&gt;ä¸ºæˆ‘ä»¬æ¨¡å¼Kafkaæ¶ˆè´¹è€…çš„ä¸€ä¸ªå®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package kafka
...
type MockConsumer struct {}

func (m *MockConsumer) Poll() *Records {
    records := &amp;amp;Records{}
    records.Items = append(records.Items, &amp;quot;i am mock consumer.&amp;quot;)
    return records
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package test
...
func TestKafkaInputPipeline(t *testing.T) {
    config := pipeline.Config{
        Name: &amp;quot;pipeline2&amp;quot;,
        Input: plugin.Config{
            PluginType: plugin.InputType,
            Name:       &amp;quot;kafka&amp;quot;,
        },
        Filter: plugin.Config{
            PluginType: plugin.FilterType,
            Name:       &amp;quot;upper&amp;quot;,
        },
        Output: plugin.Config{
            PluginType: plugin.OutputType,
            Name:       &amp;quot;console&amp;quot;,
        },
    }
    p := pipeline.Of(config)
    p.Start()
    p.Exec()
    p.Stop()
}
// è¿è¡Œç»“æœ
=== RUN   TestKafkaInputPipeline
Console output plugin started.
Upper filter plugin started.
Kafka input plugin started.
Pipeline started.
Output:
    Header:map[content:kafka], Body:[I AM MOCK CONSUMER.]
Kafka input plugin stopped.
Upper filter plugin stopped.
Console output plugin stopped.
Pipeline stopped.
--- PASS: TestKafkaInputPipeline (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æ¡¥æ¥æ¨¡å¼bridge-pattern&#34;&gt;æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1gi00awfcxcj31f20l01ky.jpg&#34; alt=&#34;æ¡¥æ¥æ¨¡å¼ç»“æ„&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ç®€è¿°-3&#34;&gt;ç®€è¿°&lt;/h3&gt;
&lt;p&gt;æ¡¥æ¥æ¨¡å¼ä¸»è¦ç”¨äº&lt;strong&gt;å°†æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†è¿›è¡Œè§£è€¦ï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿå„è‡ªå¾€ç‹¬ç«‹çš„æ–¹å‘å˜åŒ–&lt;/strong&gt;ã€‚å®ƒè§£å†³äº†åœ¨æ¨¡å—æœ‰å¤šç§å˜åŒ–æ–¹å‘çš„æƒ…å†µä¸‹ï¼Œç”¨ç»§æ‰¿æ‰€å¯¼è‡´çš„ç±»çˆ†ç‚¸é—®é¢˜ã€‚ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä¸€ä¸ªäº§å“æœ‰å½¢çŠ¶å’Œé¢œè‰²ä¸¤ä¸ªç‰¹å¾ï¼ˆå˜åŒ–æ–¹å‘ï¼‰ï¼Œå…¶ä¸­å½¢çŠ¶åˆ†ä¸ºæ–¹å½¢å’Œåœ†å½¢ï¼Œé¢œè‰²åˆ†ä¸ºçº¢è‰²å’Œè“è‰²ã€‚å¦‚æœé‡‡ç”¨ç»§æ‰¿çš„è®¾è®¡æ–¹æ¡ˆï¼Œé‚£ä¹ˆå°±éœ€è¦æ–°å¢4ä¸ªäº§å“å­ç±»ï¼šæ–¹å½¢çº¢è‰²ã€åœ†å½¢çº¢è‰²ã€æ–¹å½¢è“è‰²ã€åœ†å½¢çº¢è‰²ã€‚å¦‚æœå½¢çŠ¶æ€»å…±æœ‰mç§å˜åŒ–ï¼Œé¢œè‰²æœ‰nç§å˜åŒ–ï¼Œé‚£ä¹ˆå°±éœ€è¦æ–°å¢m*nä¸ªäº§å“å­ç±»ï¼ç°åœ¨æˆ‘ä»¬ä½¿ç”¨æ¡¥æ¥æ¨¡å¼è¿›è¡Œä¼˜åŒ–ï¼Œå°†å½¢çŠ¶å’Œé¢œè‰²åˆ†åˆ«è®¾è®¡ä¸ºä¸€ä¸ªæŠ½è±¡æ¥å£ç‹¬ç«‹å‡ºæ¥ï¼Œè¿™æ ·éœ€è¦æ–°å¢2ä¸ªå½¢çŠ¶å­ç±»ï¼šæ–¹å½¢å’Œåœ†å½¢ï¼Œä»¥åŠ2ä¸ªé¢œè‰²å­ç±»ï¼šçº¢è‰²å’Œè“è‰²ã€‚åŒæ ·ï¼Œå¦‚æœå½¢çŠ¶æ€»å…±æœ‰mç§å˜åŒ–ï¼Œé¢œè‰²æœ‰nç§å˜åŒ–ï¼Œæ€»å…±åªéœ€è¦æ–°å¢m+nä¸ªå­ç±»ï¼&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1gi01kwmua8j31hs0s47wj.jpg&#34; alt=&#34;æ¡¥æ¥æ¨¡å¼ç¤ºä¾‹&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å°†å½¢çŠ¶å’Œé¢œè‰²æŠ½è±¡ä¸ºä¸€ä¸ªæ¥å£ï¼Œä½¿äº§å“ä¸å†ä¾èµ–äºå…·ä½“çš„å½¢çŠ¶å’Œé¢œè‰²ç»†èŠ‚ï¼Œä»è€Œè¾¾åˆ°äº†è§£è€¦çš„ç›®çš„ã€‚&lt;strong&gt;æ¡¥æ¥æ¨¡å¼æœ¬è´¨ä¸Šå°±æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œå¯ä»¥ç»™ç³»ç»Ÿå¸¦æ¥å¾ˆå¥½çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§&lt;/strong&gt;ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å­˜åœ¨å¤šä¸ªå˜åŒ–çš„æ–¹å‘ï¼Œè€Œä¸”æ¯ä¸ªå˜åŒ–æ–¹å‘éƒ½éœ€è¦æ‰©å±•ï¼Œé‚£ä¹ˆä½¿ç”¨æ¡¥æ¥æ¨¡å¼è¿›è¡Œè®¾è®¡é‚£æ˜¯å†åˆé€‚ä¸è¿‡äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;goå®ç°-3&#34;&gt;Goå®ç°&lt;/h3&gt;
&lt;p&gt;å›åˆ°æ¶ˆæ¯å¤„ç†ç³»ç»Ÿçš„ä¾‹å­ï¼Œä¸€ä¸ª&lt;code&gt;Pipeline&lt;/code&gt;å¯¹è±¡ä¸»è¦ç”±&lt;code&gt;Input&lt;/code&gt;ã€&lt;code&gt;Filter&lt;/code&gt;ã€&lt;code&gt;Output&lt;/code&gt;ä¸‰ç±»æ’ä»¶ç»„æˆï¼ˆ&lt;strong&gt;3ä¸ªç‰¹å¾&lt;/strong&gt;ï¼‰ï¼Œå› ä¸ºæ˜¯æ’ä»¶åŒ–çš„ç³»ç»Ÿï¼Œä¸å¯é¿å…çš„å°±è¦æ±‚æ”¯æŒå¤šç§&lt;code&gt;Input&lt;/code&gt;ã€&lt;code&gt;Filter&lt;/code&gt;ã€&lt;code&gt;Output&lt;/code&gt;çš„å®ç°ï¼Œå¹¶èƒ½å¤Ÿçµæ´»ç»„åˆï¼ˆ&lt;strong&gt;æœ‰å¤šä¸ªå˜åŒ–çš„æ–¹å‘&lt;/strong&gt;ï¼‰ã€‚æ˜¾ç„¶ï¼Œ&lt;code&gt;Pipeline&lt;/code&gt;å°±éå¸¸é€‚åˆä½¿ç”¨æ¡¥æ¥æ¨¡å¼è¿›è¡Œè®¾è®¡ï¼Œå®é™…ä¸Šæˆ‘ä»¬ä¹Ÿè¿™ä¹ˆåšäº†ã€‚æˆ‘ä»¬å°†&lt;code&gt;Input&lt;/code&gt;ã€&lt;code&gt;Filter&lt;/code&gt;ã€&lt;code&gt;Output&lt;/code&gt;åˆ†åˆ«è®¾è®¡æˆä¸€ä¸ªæŠ½è±¡çš„æ¥å£ï¼Œå®ƒä»¬æŒ‰ç…§å„è‡ªçš„æ–¹å‘å»æ‰©å±•ã€‚&lt;code&gt;Pipeline&lt;/code&gt;åªä¾èµ–çš„è¿™3ä¸ªæŠ½è±¡æ¥å£ï¼Œå¹¶ä¸æ„ŸçŸ¥å…·ä½“å®ç°çš„ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1gi0i6xpj9sj318a0nk4qq.jpg&#34; alt=&#34;ä½¿ç”¨æ¡¥æ¥æ¨¡å¼è®¾è®¡çš„Pipeline&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package plugin
...
type Input interface {
    Plugin
    Receive() *msg.Message
}

type Filter interface {
    Plugin
    Process(msg *msg.Message) *msg.Message
}

type Output interface {
    Plugin
    Send(msg *msg.Message)
}
å¤åˆ¶ä»£ç 
package pipeline
...
// ä¸€ä¸ªPipelineç”±inputã€filterã€outputä¸‰ä¸ªPluginç»„æˆ
type Pipeline struct {
    status plugin.Status
    input  plugin.Input
    filter plugin.Filter
    output plugin.Output
}
// é€šè¿‡æŠ½è±¡æ¥å£æ¥ä½¿ç”¨ï¼Œçœ‹ä¸åˆ°åº•å±‚çš„å®ç°ç»†èŠ‚
func (p *Pipeline) Exec() {
    msg := p.input.Receive()
    msg = p.filter.Process(msg)
    p.output.Send(msg)
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package test
...
func TestPipeline(t *testing.T) {
    p := pipeline.Of(pipeline.DefaultConfig())
    p.Start()
    p.Exec()
    p.Stop()
}
// è¿è¡Œç»“æœ
=== RUN   TestPipeline
Console output plugin started.
Upper filter plugin started.
Hello input plugin started.
Pipeline started.
Output:
    Header:map[content:text], Body:[HELLO WORLD]
Hello input plugin stopped.
Upper filter plugin stopped.
Console output plugin stopped.
Pipeline stopped.
--- PASS: TestPipeline (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ç»“æ„å‹æ¨¡å¼ä¸­çš„ç»„åˆæ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼å’Œæ¡¥æ¥æ¨¡å¼ã€‚&lt;strong&gt;ç»„åˆæ¨¡å¼&lt;/strong&gt;ä¸»è¦è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜ï¼Œç›¸æ¯”äºç»§æ‰¿å…³ç³»ï¼Œç»„åˆæ¨¡å¼å¯ä»¥é¿å…ç»§æ‰¿å±‚æ¬¡è¿‡æ·±å¯¼è‡´çš„ä»£ç å¤æ‚é—®é¢˜ï¼Œå› æ­¤é¢å‘å¯¹è±¡è®¾è®¡é¢†åŸŸæµä¼ ç€&lt;strong&gt;ç»„åˆä¼˜äºç»§æ‰¿&lt;/strong&gt;çš„åŸåˆ™ï¼Œè€ŒGoè¯­è¨€çš„è®¾è®¡ä¹Ÿå¾ˆå¥½å®è·µäº†è¯¥åŸåˆ™ï¼›&lt;strong&gt;é€‚é…å™¨æ¨¡å¼&lt;/strong&gt;å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªä¸å…¼å®¹æ¥å£ä¹‹é—´çš„æ¡¥æ¢ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆClientæ‰€å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œè§£å†³äº†æ¨¡å—ä¹‹é—´å› ä¸ºæ¥å£ä¸å…¼å®¹è€Œæ— æ³•ä¸€èµ·å·¥ä½œçš„é—®é¢˜ï¼›&lt;strong&gt;æ¡¥æ¥æ¨¡å¼&lt;/strong&gt;å°†æ¨¡å—çš„æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†è¿›è¡Œåˆ†ç¦»ï¼Œè®©å®ƒä»¬èƒ½å¤Ÿå¾€å„è‡ªçš„æ–¹å‘æ‰©å±•ï¼Œä»è€Œè¾¾åˆ°è§£è€¦çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†ç»§ç»­èšç„¦äºç»“æ„å‹æ¨¡å¼ï¼Œä»‹ç»å®Œå‰©ä½™çš„4ç§ç»“æ¨¡å¼ï¼šè£…é¥°æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€äº«å…ƒæ¨¡å¼å’Œä»£ç†æ¨¡å¼ã€‚&lt;/p&gt;
">ä½¿ç”¨Goå®ç°GoFçš„23ç§è®¾è®¡æ¨¡å¼ï¼ˆäºŒï¼‰</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/shi-yong-go-shi-xian-gof-de-23-chong-she-ji-mo-shi-yi/"" data-c="
          &lt;p&gt;ä½œè€…ï¼šå…ƒé—°å­&lt;br&gt;
é“¾æ¥ï¼šhttps://juejin.im/post/6859015515344633863&lt;br&gt;
æ¥æºï¼šæ˜é‡‘&lt;br&gt;
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä»1995å¹´GoFæå‡º23ç§&lt;strong&gt;è®¾è®¡æ¨¡å¼&lt;/strong&gt;åˆ°ç°åœ¨ï¼Œ25å¹´è¿‡å»äº†ï¼Œè®¾è®¡æ¨¡å¼ä¾æ—§æ˜¯è½¯ä»¶é¢†åŸŸçš„çƒ­é—¨è¯é¢˜ã€‚åœ¨å½“ä¸‹ï¼Œå¦‚æœä½ ä¸ä¼šä¸€ç‚¹è®¾è®¡æ¨¡å¼ï¼Œéƒ½ä¸å¥½æ„æ€è¯´è‡ªå·±æ˜¯ä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜ã€‚è®¾è®¡æ¨¡å¼é€šå¸¸è¢«å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è®¾è®¡æ¨¡å¼ï¼ˆDesign Patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£å¹¶ä¸”ä¿è¯ä»£ç å¯é æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»å®šä¹‰ä¸Šçœ‹ï¼Œ&lt;strong&gt;è®¾è®¡æ¨¡å¼å…¶å®æ˜¯ä¸€ç§ç»éªŒçš„æ€»ç»“ï¼Œæ˜¯é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ç®€æ´è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ã€‚æ—¢ç„¶æ˜¯ç»éªŒæ€»ç»“ï¼Œé‚£ä¹ˆå­¦ä¹ è®¾è®¡æ¨¡å¼æœ€ç›´æ¥çš„å¥½å¤„å°±åœ¨äºå¯ä»¥ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šè§£å†³è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€äº›ç‰¹å®šé—®é¢˜ã€‚ç„¶è€Œï¼Œå­¦ä¹ è®¾è®¡æ¨¡å¼çš„æœ€é«˜å¢ƒç•Œæ˜¯ä¹ å¾—å…¶ä¸­è§£å†³é—®é¢˜æ‰€ç”¨åˆ°çš„æ€æƒ³ï¼Œå½“ä½ æŠŠå®ƒä»¬çš„æœ¬è´¨æ€æƒ³åƒé€äº†ï¼Œä¹Ÿå°±èƒ½åšåˆ°&lt;strong&gt;å³ä½¿å·²ç»å¿˜æ‰æŸä¸ªè®¾è®¡æ¨¡å¼çš„åç§°å’Œç»“æ„ï¼Œä¹Ÿèƒ½åœ¨è§£å†³ç‰¹å®šé—®é¢˜æ—¶ä¿¡æ‰‹æ‹ˆæ¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¥½çš„ä¸œè¥¿æœ‰äººå¹æ§ï¼Œå½“ç„¶ä¹Ÿä¼šæ‹›é»‘ã€‚è®¾è®¡æ¨¡å¼è¢«æŠ¨å‡»ä¸»è¦å› ä¸ºä»¥ä¸‹ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;1ã€&lt;em&gt;è®¾è®¡æ¨¡å¼ä¼šå¢åŠ ä»£ç é‡ï¼ŒæŠŠç¨‹åºé€»è¾‘å˜å¾—å¤æ‚&lt;/em&gt;ã€‚è¿™ä¸€ç‚¹æ˜¯ä¸å¯é¿å…çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½ä»…ä»…åªè€ƒè™‘å¼€å‘é˜¶æ®µçš„æˆæœ¬ã€‚æœ€ç®€å•çš„ç¨‹åºå½“ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°ä»å¤´å†™åˆ°å°¾ï¼Œä½†æ˜¯è¿™æ ·åæœŸçš„ç»´æŠ¤æˆæœ¬ä¼šå˜å¾—éå¸¸å¤§ï¼›è€Œè®¾è®¡æ¨¡å¼è™½ç„¶å¢åŠ äº†ä¸€ç‚¹å¼€å‘æˆæœ¬ï¼Œä½†æ˜¯èƒ½è®©äººä»¬å†™å‡ºå¯å¤ç”¨ã€å¯ç»´æŠ¤æ€§é«˜çš„ç¨‹åºã€‚å¼•ç”¨ã€Šè½¯ä»¶è®¾è®¡çš„å“²å­¦ã€‹é‡Œçš„æ¦‚å¿µï¼Œå‰è€…å°±æ˜¯&lt;strong&gt;æˆ˜æœ¯ç¼–ç¨‹&lt;/strong&gt;ï¼Œåè€…å°±æ˜¯&lt;strong&gt;æˆ˜ç•¥ç¼–ç¨‹&lt;/strong&gt;ï¼Œæˆ‘ä»¬åº”è¯¥&lt;strong&gt;å¯¹æˆ˜æœ¯ç¼–ç¨‹Say No&lt;/strong&gt;ï¼ï¼ˆè¯·ç§»æ­¥&lt;a href=&#34;https://www.yrunz.com/archives/%E4%B8%80%E6%AD%A5%E6%AD%A5%E9%99%8D%E4%BD%8E%E8%BD%AF%E4%BB%B6%E5%A4%8D%E6%9D%82%E6%80%A7&#34;&gt;ã€Šä¸€æ­¥æ­¥é™ä½è½¯ä»¶å¤æ‚æ€§ã€‹&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;2ã€&lt;em&gt;æ»¥ç”¨è®¾è®¡æ¨¡å¼&lt;/em&gt;ã€‚è¿™æ˜¯åˆå­¦è€…æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ï¼Œå½“å­¦åˆ°ä¸€ä¸ªæ¨¡å¼æ—¶ï¼Œæ¨ä¸å¾—åœ¨æ‰€æœ‰çš„ä»£ç éƒ½ç”¨ä¸Šï¼Œä»è€Œåœ¨ä¸è¯¥ä½¿ç”¨æ¨¡å¼çš„åœ°æ–¹åˆ»æ„åœ°ä½¿ç”¨äº†æ¨¡å¼ï¼Œå¯¼è‡´äº†ç¨‹åºå˜å¾—å¼‚å¸¸å¤æ‚ã€‚å…¶å®æ¯ä¸ªè®¾è®¡æ¨¡å¼éƒ½æœ‰å‡ ä¸ªå…³é”®è¦ç´ ï¼š&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ã€&lt;strong&gt;è§£å†³æ–¹æ³•&lt;/strong&gt;ã€&lt;strong&gt;ä¼˜ç¼ºç‚¹&lt;/strong&gt;ã€‚æ¨¡å¼å¹¶ä¸æ˜¯ä¸‡èƒ½è¯ï¼Œå®ƒåªæœ‰åœ¨ç‰¹å®šçš„é—®é¢˜ä¸Šæ‰èƒ½æ˜¾ç°å‡ºæ•ˆæœã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ä¸€ä¸ªæ¨¡å¼å‰ï¼Œå…ˆé—®é—®è‡ªå·±ï¼Œå½“å‰çš„è¿™ä¸ªåœºæ™¯é€‚ç”¨è¿™ä¸ªæ¨¡å¼å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦çš„å‰¯æ ‡é¢˜æ˜¯â€œå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€â€ï¼Œä½†å¹¶ä¸æ„å‘³ç€åªæœ‰é¢å‘å¯¹è±¡è¯­è¨€æ‰èƒ½ä½¿ç”¨è®¾è®¡æ¨¡å¼ã€‚æ¨¡å¼åªæ˜¯ä¸€ç§è§£å†³ç‰¹å®šé—®é¢˜çš„æ€æƒ³ï¼Œè·Ÿè¯­è¨€æ— å…³ã€‚å°±åƒGoè¯­è¨€ä¸€æ ·ï¼Œå®ƒå¹¶éæ˜¯åƒC++å’ŒJavaä¸€æ ·çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä½†æ˜¯è®¾è®¡æ¨¡å¼åŒæ ·é€‚ç”¨ã€‚æœ¬ç³»åˆ—æ–‡ç« å°†ä½¿ç”¨Goè¯­è¨€æ¥å®ç°GoFæå‡ºçš„23ç§è®¾è®¡æ¨¡å¼ï¼ŒæŒ‰ç…§&lt;strong&gt;åˆ›å»ºå‹æ¨¡å¼&lt;/strong&gt;ï¼ˆCreational Patternï¼‰ã€&lt;strong&gt;ç»“æ„å‹æ¨¡å¼&lt;/strong&gt;ï¼ˆStructural Patternï¼‰å’Œ&lt;strong&gt;è¡Œä¸ºå‹æ¨¡å¼&lt;/strong&gt;ï¼ˆBehavioral Patternï¼‰ä¸‰ç§ç±»åˆ«è¿›è¡Œç»„ç»‡ï¼Œæ–‡æœ¬ä¸»è¦ä»‹ç»å…¶ä¸­çš„åˆ›å»ºå‹æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•ä¾‹æ¨¡å¼singleton-pattern&#34;&gt;å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1ghky3yanabj318q0iwnpd.jpg&#34; alt=&#34;å•ä¾‹æ¨¡å¼ç»“æ„&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ç®€è¿°&#34;&gt;ç®€è¿°&lt;/h3&gt;
&lt;p&gt;å•ä¾‹æ¨¡å¼ç®—æ˜¯23ä¸­è®¾è®¡æ¨¡å¼é‡Œæœ€ç®€å•çš„ä¸€ä¸ªäº†ï¼Œå®ƒä¸»è¦ç”¨äº&lt;strong&gt;ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæœ‰ä¸€äº›å¯¹è±¡é€šå¸¸æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå…±äº«çš„å®ä¾‹ï¼Œæ¯”å¦‚çº¿ç¨‹æ± ã€å…¨å±€ç¼“å­˜ã€å¯¹è±¡æ± ç­‰ï¼Œè¿™ç§åœºæ™¯ä¸‹å°±é€‚åˆä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰å…¨å±€å”¯ä¸€çš„åœºæ™¯éƒ½é€‚åˆä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚æ¯”å¦‚ï¼Œè€ƒè™‘éœ€è¦ç»Ÿè®¡ä¸€ä¸ªAPIè°ƒç”¨çš„æƒ…å†µï¼Œæœ‰ä¸¤ä¸ªæŒ‡æ ‡ï¼ŒæˆåŠŸè°ƒç”¨æ¬¡æ•°å’Œå¤±è´¥è°ƒç”¨æ¬¡æ•°ã€‚è¿™ä¸¤ä¸ªæŒ‡æ ‡éƒ½æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œæ‰€ä»¥æœ‰äººå¯èƒ½ä¼šå°†å…¶å»ºæ¨¡æˆä¸¤ä¸ªå•ä¾‹&lt;code&gt;SuccessApiMetric&lt;/code&gt;å’Œ&lt;code&gt;FailApiMetric&lt;/code&gt;ã€‚æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œéšç€æŒ‡æ ‡æ•°é‡çš„å¢å¤šï¼Œä½ ä¼šå‘ç°ä»£ç é‡Œç±»çš„å®šä¹‰ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¹Ÿè¶Šæ¥è¶Šè‡ƒè‚¿ã€‚è¿™ä¹Ÿæ˜¯å•ä¾‹æ¨¡å¼æœ€å¸¸è§çš„è¯¯ç”¨åœºæ™¯ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯å°†ä¸¤ä¸ªæŒ‡æ ‡è®¾è®¡æˆä¸€ä¸ªå¯¹è±¡&lt;code&gt;ApiMetric&lt;/code&gt;ä¸‹çš„ä¸¤ä¸ªå®ä¾‹&lt;code&gt;ApiMetic success&lt;/code&gt;å’Œ&lt;code&gt;ApiMetic fail&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åº”è¯¥è¢«å»ºæ¨¡æˆå•ä¾‹ï¼Ÿ&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;é€šå¸¸ï¼Œè¢«å»ºæ¨¡æˆå•ä¾‹çš„å¯¹è±¡éƒ½æœ‰â€œ&lt;strong&gt;ä¸­å¿ƒç‚¹&lt;/strong&gt;â€çš„å«ä¹‰ï¼Œæ¯”å¦‚çº¿ç¨‹æ± å°±æ˜¯ç®¡ç†æ‰€æœ‰çº¿ç¨‹çš„ä¸­å¿ƒã€‚æ‰€ä»¥ï¼Œåœ¨åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦é€‚åˆå•ä¾‹æ¨¡å¼æ—¶ï¼Œå…ˆæ€è€ƒä¸‹ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªä¸­å¿ƒç‚¹å—ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;goå®ç°&#34;&gt;Goå®ç°&lt;/h3&gt;
&lt;p&gt;åœ¨å¯¹æŸä¸ªå¯¹è±¡å®ç°å•ä¾‹æ¨¡å¼æ—¶ï¼Œæœ‰ä¸¤ä¸ªç‚¹å¿…é¡»è¦æ³¨æ„ï¼šï¼ˆ1ï¼‰&lt;strong&gt;é™åˆ¶è°ƒç”¨è€…ç›´æ¥å®ä¾‹åŒ–è¯¥å¯¹è±¡&lt;/strong&gt;ï¼›ï¼ˆ2ï¼‰&lt;strong&gt;ä¸ºè¯¥å¯¹è±¡çš„å•ä¾‹æä¾›ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„è®¿é—®æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºC++/Javaè€Œè¨€ï¼Œåªéœ€æŠŠç±»çš„æ„é€ å‡½æ•°è®¾è®¡æˆç§æœ‰çš„ï¼Œå¹¶æä¾›ä¸€ä¸ª&lt;code&gt;static&lt;/code&gt;æ–¹æ³•å»è®¿é—®è¯¥ç±»ç‚¹å”¯ä¸€å®ä¾‹å³å¯ã€‚ä½†å¯¹äºGoè¯­è¨€æ¥è¯´ï¼Œå³æ²¡æœ‰æ„é€ å‡½æ•°çš„æ¦‚å¿µï¼Œä¹Ÿæ²¡æœ‰&lt;code&gt;static&lt;/code&gt;æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦å¦å¯»å‡ºè·¯ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Goè¯­è¨€&lt;code&gt;package&lt;/code&gt;çš„è®¿é—®è§„åˆ™æ¥å®ç°ï¼Œå°†å•ä¾‹ç»“æ„ä½“è®¾è®¡æˆé¦–å­—æ¯å°å†™ï¼Œå°±èƒ½é™å®šå…¶è®¿é—®èŒƒå›´åªåœ¨å½“å‰packageä¸‹ï¼Œæ¨¡æ‹Ÿäº†C++/Javaä¸­çš„ç§æœ‰æ„é€ å‡½æ•°ï¼›å†åœ¨å½“å‰&lt;code&gt;package&lt;/code&gt;ä¸‹å®ç°ä¸€ä¸ªé¦–å­—æ¯å¤§å†™çš„è®¿é—®å‡½æ•°ï¼Œå°±ç›¸å½“äº&lt;code&gt;static&lt;/code&gt;æ–¹æ³•çš„ä½œç”¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ã€‚é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯ä¸€åˆ™æ¶ˆè€—CPUï¼ŒäºŒåˆ™å†…å­˜çš„åˆ©ç”¨ç‡ä¹Ÿä¸é«˜ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨å¯¹è±¡æ± æŠ€æœ¯æ¥è¿›è¡Œä¼˜åŒ–ã€‚è€ƒè™‘æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡æ± ï¼Œå› ä¸ºæ˜¯å…¨å±€çš„ä¸­å¿ƒç‚¹ï¼Œç®¡ç†æ‰€æœ‰çš„Messageå®ä¾‹ï¼Œæ‰€ä»¥å°†å…¶å®ç°æˆå•ä¾‹ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package msgpool
...
// æ¶ˆæ¯æ± 
type messagePool struct {
    pool *sync.Pool
}
// æ¶ˆæ¯æ± å•ä¾‹
var msgPool = &amp;amp;messagePool{
    // å¦‚æœæ¶ˆæ¯æ± é‡Œæ²¡æœ‰æ¶ˆæ¯ï¼Œåˆ™æ–°å»ºä¸€ä¸ªCountå€¼ä¸º0çš„Messageå®ä¾‹
    pool: &amp;amp;sync.Pool{New: func() interface{} { return &amp;amp;Message{Count: 0} }},
}
// è®¿é—®æ¶ˆæ¯æ± å•ä¾‹çš„å”¯ä¸€æ–¹æ³•
func Instance() *messagePool {
    return msgPool
}
// å¾€æ¶ˆæ¯æ± é‡Œæ·»åŠ æ¶ˆæ¯
func (m *messagePool) AddMsg(msg *Message) {
    m.pool.Put(msg)
}
// ä»æ¶ˆæ¯æ± é‡Œè·å–æ¶ˆæ¯
func (m *messagePool) GetMsg() *Message {
    return m.pool.Get().(*Message)
}
...
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package test
...
func TestMessagePool(t *testing.T) {
    msg0 := msgpool.Instance().GetMsg()
    if msg0.Count != 0 {
        t.Errorf(&amp;quot;expect msg count %d, but actual %d.&amp;quot;, 0, msg0.Count)
    }
    msg0.Count = 1
    msgpool.Instance().AddMsg(msg0)
    msg1 := msgpool.Instance().GetMsg()
    if msg1.Count != 1 {
        t.Errorf(&amp;quot;expect msg count %d, but actual %d.&amp;quot;, 1, msg1.Count)
    }
}
// è¿è¡Œç»“æœ
=== RUN   TestMessagePool
--- PASS: TestMessagePool (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šçš„å•ä¾‹æ¨¡å¼å°±æ˜¯å…¸å‹çš„â€œ&lt;strong&gt;é¥¿æ±‰æ¨¡å¼&lt;/strong&gt;â€ï¼Œå®ä¾‹åœ¨ç³»ç»ŸåŠ è½½çš„æ—¶å€™å°±å·²ç»å®Œæˆäº†åˆå§‹åŒ–ã€‚å¯¹åº”åœ°ï¼Œè¿˜æœ‰ä¸€ç§â€œ&lt;strong&gt;æ‡’æ±‰æ¨¡å¼&lt;/strong&gt;â€ï¼Œåªæœ‰ç­‰åˆ°å¯¹è±¡è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šå»åˆå§‹åŒ–å®ƒï¼Œä»è€Œä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çœäº†å†…å­˜ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œâ€œæ‡’æ±‰æ¨¡å¼â€ä¼šå¸¦æ¥çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡&lt;strong&gt;æ™®é€šåŠ é”&lt;/strong&gt;ï¼Œæˆ–è€…æ›´é«˜æ•ˆçš„&lt;strong&gt;åŒé‡æ£€éªŒé”&lt;/strong&gt;æ¥ä¼˜åŒ–ã€‚å¯¹äºâ€œæ‡’æ±‰æ¨¡å¼â€ï¼ŒGoè¯­è¨€æœ‰ä¸€ä¸ªæ›´ä¼˜é›…çš„å®ç°æ–¹å¼ï¼Œé‚£å°±æ˜¯åˆ©ç”¨&lt;code&gt;sync.Once&lt;/code&gt;ï¼Œå®ƒæœ‰ä¸€ä¸ª&lt;code&gt;Do&lt;/code&gt;æ–¹æ³•ï¼Œå…¶å…¥å‚æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ŒGoè¯­è¨€ä¼šä¿è¯ä»…ä»…åªè°ƒç”¨ä¸€æ¬¡è¯¥æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// å•ä¾‹æ¨¡å¼çš„â€œæ‡’æ±‰æ¨¡å¼â€å®ç°
package msgpool
...
var once = &amp;amp;sync.Once{}
// æ¶ˆæ¯æ± å•ä¾‹ï¼Œåœ¨é¦–æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–
var msgPool *messagePool
// å…¨å±€å”¯ä¸€è·å–æ¶ˆæ¯æ± poolåˆ°æ–¹æ³•
func Instance() *messagePool {
    // åœ¨åŒ¿åå‡½æ•°ä¸­å®ç°åˆå§‹åŒ–é€»è¾‘ï¼ŒGoè¯­è¨€ä¿è¯åªä¼šè°ƒç”¨ä¸€æ¬¡
    once.Do(func() {
        msgPool = &amp;amp;messagePool{
            // å¦‚æœæ¶ˆæ¯æ± é‡Œæ²¡æœ‰æ¶ˆæ¯ï¼Œåˆ™æ–°å»ºä¸€ä¸ªCountå€¼ä¸º0çš„Messageå®ä¾‹
            pool: &amp;amp;sync.Pool{New: func() interface{} { return &amp;amp;Message{Count: 0} }},
        }
    })
    return msgPool
}
...
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;å»ºé€ è€…æ¨¡å¼builder-pattern&#34;&gt;å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1ghky4kprezj319e0kuu0x.jpg&#34; alt=&#34;å»ºé€ è€…æ¨¡å¼ç»“æ„&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ç®€è¿°-2&#34;&gt;ç®€è¿°&lt;/h3&gt;
&lt;p&gt;åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ä¸€äº›å¤æ‚çš„å¯¹è±¡ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šæˆå‘˜å±æ€§ï¼Œç”šè‡³åµŒå¥—ç€å¤šä¸ªå¤æ‚çš„å¯¹è±¡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ›å»ºè¿™ä¸ªå¤æ‚å¯¹è±¡å°±ä¼šå˜å¾—å¾ˆç¹çã€‚å¯¹äºC++/Javaè€Œè¨€ï¼Œæœ€å¸¸è§çš„è¡¨ç°å°±æ˜¯æ„é€ å‡½æ•°æœ‰ç€é•¿é•¿çš„å‚æ•°åˆ—è¡¨ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;MyObject obj = new MyObject(param1, param2, param3, param4, param5, param6, ...)
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è€Œå¯¹äºGoè¯­è¨€æ¥è¯´ï¼Œæœ€å¸¸è§çš„è¡¨ç°å°±æ˜¯å¤šå±‚çš„åµŒå¥—å®ä¾‹åŒ–ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;obj := &amp;amp;MyObject{
  Field1: &amp;amp;Field1 {
    Param1: &amp;amp;Param1 {
      Val: 0,
    },
    Param2: &amp;amp;Param2 {
      Val: 1,
    },
    ...
  },
  Field2: &amp;amp;Field2 {
    Param3: &amp;amp;Param3 {
      Val: 2,
    },
    ...
  },
  ...
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸Šè¿°çš„å¯¹è±¡åˆ›å»ºæ–¹æ³•æœ‰ä¸¤ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼šï¼ˆ1ï¼‰&lt;strong&gt;å¯¹å¯¹è±¡ä½¿ç”¨è€…ä¸å‹å¥½&lt;/strong&gt;ï¼Œä½¿ç”¨è€…åœ¨åˆ›å»ºå¯¹è±¡æ—¶éœ€è¦çŸ¥é“çš„ç»†èŠ‚å¤ªå¤šï¼›ï¼ˆ2ï¼‰&lt;strong&gt;ä»£ç å¯è¯»æ€§å¾ˆå·®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;é’ˆå¯¹è¿™ç§å¯¹è±¡æˆå‘˜è¾ƒå¤šï¼Œåˆ›å»ºå¯¹è±¡é€»è¾‘è¾ƒä¸ºç¹ççš„åœºæ™¯ï¼Œå°±é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥è¿›è¡Œä¼˜åŒ–ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å»ºé€ è€…æ¨¡å¼çš„ä½œç”¨æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š&lt;/p&gt;
&lt;p&gt;1ã€å°è£…å¤æ‚å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä½¿å¯¹è±¡ä½¿ç”¨è€…ä¸æ„ŸçŸ¥å¤æ‚çš„åˆ›å»ºé€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;2ã€å¯ä»¥ä¸€æ­¥æ­¥æŒ‰ç…§é¡ºåºå¯¹æˆå‘˜è¿›è¡Œèµ‹å€¼ï¼Œæˆ–è€…åˆ›å»ºåµŒå¥—å¯¹è±¡ï¼Œå¹¶æœ€ç»ˆå®Œæˆç›®æ ‡å¯¹è±¡çš„åˆ›å»ºã€‚&lt;/p&gt;
&lt;p&gt;3ã€å¯¹å¤šä¸ªå¯¹è±¡å¤ç”¨åŒæ ·çš„å¯¹è±¡åˆ›å»ºé€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼Œç¬¬1å’Œç¬¬2ç‚¹æ¯”è¾ƒå¸¸ç”¨ï¼Œä¸‹é¢å¯¹å»ºé€ è€…æ¨¡å¼çš„å®ç°ä¹Ÿä¸»è¦æ˜¯é’ˆå¯¹è¿™ä¸¤ç‚¹è¿›è¡Œç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;goå®ç°-2&#34;&gt;Goå®ç°&lt;/h3&gt;
&lt;p&gt;è€ƒè™‘å¦‚ä¸‹çš„ä¸€ä¸ª&lt;code&gt;Message&lt;/code&gt;ç»“æ„ä½“ï¼Œå…¶ä¸»è¦æœ‰&lt;code&gt;Header&lt;/code&gt;å’Œ&lt;code&gt;Body&lt;/code&gt;ç»„æˆï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package msg
...
type Message struct {
    Header *Header
    Body   *Body
}
type Header struct {
    SrcAddr  string
    SrcPort  uint64
    DestAddr string
    DestPort uint64
    Items    map[string]string
}
type Body struct {
    Items []string
}
...
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚æœæŒ‰ç…§ç›´æ¥çš„å¯¹è±¡åˆ›å»ºæ–¹å¼ï¼Œåˆ›å»ºé€»è¾‘åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// å¤šå±‚çš„åµŒå¥—å®ä¾‹åŒ–
message := msg.Message{
    Header: &amp;amp;msg.Header{
        SrcAddr:  &amp;quot;192.168.0.1&amp;quot;,
        SrcPort:  1234,
        DestAddr: &amp;quot;192.168.0.2&amp;quot;,
        DestPort: 8080,
        Items:    make(map[string]string),
    },
    Body:   &amp;amp;msg.Body{
        Items: make([]string, 0),
    },
}
// éœ€è¦çŸ¥é“å¯¹è±¡çš„å®ç°ç»†èŠ‚
message.Header.Items[&amp;quot;contents&amp;quot;] = &amp;quot;application/json&amp;quot;
message.Body.Items = append(message.Body.Items, &amp;quot;record1&amp;quot;)
message.Body.Items = append(message.Body.Items, &amp;quot;record2&amp;quot;)
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è™½ç„¶&lt;code&gt;Message&lt;/code&gt;ç»“æ„ä½“åµŒå¥—çš„å±‚æ¬¡ä¸å¤šï¼Œä½†æ˜¯ä»å…¶åˆ›å»ºçš„ä»£ç æ¥çœ‹ï¼Œç¡®å®å­˜åœ¨&lt;strong&gt;å¯¹å¯¹è±¡ä½¿ç”¨è€…ä¸å‹å¥½&lt;/strong&gt;å’Œ&lt;strong&gt;ä»£ç å¯è¯»æ€§å·®&lt;/strong&gt;çš„ç¼ºç‚¹ã€‚ä¸‹é¢æˆ‘ä»¬å¼•å…¥å»ºé€ è€…æ¨¡å¼å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package msg
...
// Messageå¯¹è±¡çš„Builderå¯¹è±¡
type builder struct {
    once *sync.Once
    msg *Message
}
// è¿”å›Builderå¯¹è±¡
func Builder() *builder {
    return &amp;amp;builder{
        once: &amp;amp;sync.Once{},
        msg: &amp;amp;Message{Header: &amp;amp;Header{}, Body: &amp;amp;Body{}},
    }
}
// ä»¥ä¸‹æ˜¯å¯¹Messageæˆå‘˜å¯¹æ„å»ºæ–¹æ³•
func (b *builder) WithSrcAddr(srcAddr string) *builder {
    b.msg.Header.SrcAddr = srcAddr
    return b
}
func (b *builder) WithSrcPort(srcPort uint64) *builder {
    b.msg.Header.SrcPort = srcPort
    return b
}
func (b *builder) WithDestAddr(destAddr string) *builder {
    b.msg.Header.DestAddr = destAddr
    return b
}
func (b *builder) WithDestPort(destPort uint64) *builder {
    b.msg.Header.DestPort = destPort
    return b
}
func (b *builder) WithHeaderItem(key, value string) *builder {
  // ä¿è¯mapåªåˆå§‹åŒ–ä¸€æ¬¡
    b.once.Do(func() {
        b.msg.Header.Items = make(map[string]string)
    })
    b.msg.Header.Items[key] = value
    return b
}
func (b *builder) WithBodyItem(record string) *builder {
    b.msg.Body.Items = append(b.msg.Body.Items, record)
    return b
}
// åˆ›å»ºMessageå¯¹è±¡ï¼Œåœ¨æœ€åä¸€æ­¥è°ƒç”¨
func (b *builder) Build() *Message {
    return b.msg
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package test
...
func TestMessageBuilder(t *testing.T) {
  // ä½¿ç”¨æ¶ˆæ¯å»ºé€ è€…è¿›è¡Œå¯¹è±¡åˆ›å»º
    message := msg.Builder().
        WithSrcAddr(&amp;quot;192.168.0.1&amp;quot;).
        WithSrcPort(1234).
        WithDestAddr(&amp;quot;192.168.0.2&amp;quot;).
        WithDestPort(8080).
        WithHeaderItem(&amp;quot;contents&amp;quot;, &amp;quot;application/json&amp;quot;).
        WithBodyItem(&amp;quot;record1&amp;quot;).
        WithBodyItem(&amp;quot;record2&amp;quot;).
        Build()
    if message.Header.SrcAddr != &amp;quot;192.168.0.1&amp;quot; {
        t.Errorf(&amp;quot;expect src address 192.168.0.1, but actual %s.&amp;quot;, message.Header.SrcAddr)
    }
    if message.Body.Items[0] != &amp;quot;record1&amp;quot; {
        t.Errorf(&amp;quot;expect body item0 record1, but actual %s.&amp;quot;, message.Body.Items[0])
    }
}
// è¿è¡Œç»“æœ
=== RUN   TestMessageBuilder
--- PASS: TestMessageBuilder (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»æµ‹è¯•ä»£ç å¯çŸ¥ï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥è¿›è¡Œå¯¹è±¡åˆ›å»ºï¼Œä½¿ç”¨è€…ä¸å†éœ€è¦çŸ¥é“å¯¹è±¡å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œä»£ç å¯è¯»æ€§ä¹Ÿæ›´å¥½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å·¥å‚æ–¹æ³•æ¨¡å¼factory-method-pattern&#34;&gt;å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1ghkpq8hayrj31cm0sskjm.jpg&#34; alt=&#34;å·¥å‚æ–¹æ³•æ¨¡å¼ç»“æ„&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ç®€è¿°-3&#34;&gt;ç®€è¿°&lt;/h3&gt;
&lt;p&gt;å·¥å‚æ–¹æ³•æ¨¡å¼è·Ÿä¸Šä¸€èŠ‚è®¨è®ºçš„å»ºé€ è€…æ¨¡å¼ç±»ä¼¼ï¼Œéƒ½æ˜¯&lt;strong&gt;å°†å¯¹è±¡åˆ›å»ºçš„é€»è¾‘å°è£…èµ·æ¥ï¼Œä¸ºä½¿ç”¨è€…æä¾›ä¸€ä¸ªç®€å•æ˜“ç”¨çš„å¯¹è±¡åˆ›å»ºæ¥å£&lt;/strong&gt;ã€‚ä¸¤è€…åœ¨åº”ç”¨åœºæ™¯ä¸Šç¨æœ‰åŒºåˆ«ï¼Œå»ºé€ è€…æ¨¡å¼æ›´å¸¸ç”¨äºéœ€è¦ä¼ é€’å¤šä¸ªå‚æ•°æ¥è¿›è¡Œå®ä¾‹åŒ–çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ä¸»è¦æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š&lt;/p&gt;
&lt;p&gt;1ã€&lt;strong&gt;ä»£ç å¯è¯»æ€§æ›´å¥½&lt;/strong&gt;ã€‚ç›¸æ¯”äºä½¿ç”¨C++/Javaä¸­çš„æ„é€ å‡½æ•°ï¼Œæˆ–è€…Goä¸­çš„&lt;code&gt;{}&lt;/code&gt;æ¥åˆ›å»ºå¯¹è±¡ï¼Œå·¥å‚æ–¹æ³•å› ä¸ºå¯ä»¥é€šè¿‡å‡½æ•°åæ¥è¡¨è¾¾ä»£ç å«ä¹‰ï¼Œä»è€Œå…·å¤‡æ›´å¥½çš„å¯è¯»æ€§ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨å·¥å‚æ–¹æ³•&lt;code&gt;productA := CreateProductA()&lt;/code&gt;åˆ›å»ºä¸€ä¸ª&lt;code&gt;ProductA&lt;/code&gt;å¯¹è±¡ï¼Œæ¯”ç›´æ¥ä½¿ç”¨&lt;code&gt;productA := ProductA{}&lt;/code&gt;çš„å¯è¯»æ€§è¦å¥½ã€‚&lt;/p&gt;
&lt;p&gt;2ã€&lt;strong&gt;ä¸ä½¿ç”¨è€…ä»£ç è§£è€¦&lt;/strong&gt;ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„åˆ›å»ºå¾€å¾€æ˜¯ä¸€ä¸ªå®¹æ˜“å˜åŒ–çš„ç‚¹ï¼Œé€šè¿‡å·¥å‚æ–¹æ³•æ¥å°è£…å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå¯ä»¥åœ¨åˆ›å»ºé€»è¾‘å˜æ›´æ—¶ï¼Œé¿å…&lt;strong&gt;éœ°å¼¹å¼ä¿®æ”¹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å·¥å‚æ–¹æ³•æ¨¡å¼ä¹Ÿæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šï¼ˆ1ï¼‰æä¾›ä¸€ä¸ªå·¥å‚å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨å·¥å‚å¯¹è±¡çš„å·¥å‚æ–¹æ³•æ¥åˆ›å»ºäº§å“å¯¹è±¡ï¼›ï¼ˆ2ï¼‰å°†å·¥å‚æ–¹æ³•é›†æˆåˆ°äº§å“å¯¹è±¡ä¸­ï¼ˆC++/Javaä¸­å¯¹è±¡çš„&lt;code&gt;static&lt;/code&gt;æ–¹æ³•ï¼ŒGoä¸­åŒä¸€&lt;code&gt;package&lt;/code&gt;ä¸‹çš„å‡½æ•°ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;goå®ç°-3&#34;&gt;Goå®ç°&lt;/h3&gt;
&lt;p&gt;è€ƒè™‘æœ‰ä¸€ä¸ªäº‹ä»¶å¯¹è±¡&lt;code&gt;Event&lt;/code&gt;ï¼Œåˆ†åˆ«æœ‰ä¸¤ç§æœ‰æ•ˆçš„æ—¶é—´ç±»å‹&lt;code&gt;Start&lt;/code&gt;å’Œ&lt;code&gt;End&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package event
...
type Type uint8
// äº‹ä»¶ç±»å‹å®šä¹‰
const (
    Start Type = iota
    End
)
// äº‹ä»¶æŠ½è±¡æ¥å£
type Event interface {
    EventType() Type
    Content() string
}
// å¼€å§‹äº‹ä»¶ï¼Œå®ç°äº†Eventæ¥å£
type StartEvent struct{
    content string
}
...
// ç»“æŸäº‹ä»¶ï¼Œå®ç°äº†Eventæ¥å£
type EndEvent struct{
    content string
}
...
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;1ã€æŒ‰ç…§ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼Œä¸º&lt;code&gt;Event&lt;/code&gt;æä¾›ä¸€ä¸ªå·¥å‚å¯¹è±¡ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package event
...
// äº‹ä»¶å·¥å‚å¯¹è±¡
type Factory struct{}
// æ›´å…·äº‹ä»¶ç±»å‹åˆ›å»ºå…·ä½“äº‹ä»¶
func (e *Factory) Create(etype Type) Event {
    switch etype {
    case Start:
        return &amp;amp;StartEvent{
            content: &amp;quot;this is start event&amp;quot;,
        }
    case End:
        return &amp;amp;EndEvent{
            content: &amp;quot;this is end event&amp;quot;,
        }
    default:
        return nil
    }
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package test
...
func TestEventFactory(t *testing.T) {
    factory := event.Factory{}
    e := factory.Create(event.Start)
    if e.EventType() != event.Start {
        t.Errorf(&amp;quot;expect event.Start, but actual %v.&amp;quot;, e.EventType())
    }
    e = factory.Create(event.End)
    if e.EventType() != event.End {
        t.Errorf(&amp;quot;expect event.End, but actual %v.&amp;quot;, e.EventType())
    }
}
// è¿è¡Œç»“æœ
=== RUN   TestEventFactory
--- PASS: TestEventFactory (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€æŒ‰ç…§ç¬¬äºŒç§å®ç°æ–¹å¼ï¼Œåˆ†åˆ«ç»™&lt;code&gt;Start&lt;/code&gt;å’Œ&lt;code&gt;End&lt;/code&gt;ç±»å‹çš„&lt;code&gt;Event&lt;/code&gt;å•ç‹¬æä¾›ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package event
...
// Startç±»å‹Eventçš„å·¥å‚æ–¹æ³•
func OfStart() Event {
    return &amp;amp;StartEvent{
        content: &amp;quot;this is start event&amp;quot;,
    }
}
// Endç±»å‹Eventçš„å·¥å‚æ–¹æ³•
func OfEnd() Event {
    return &amp;amp;EndEvent{
        content: &amp;quot;this is end event&amp;quot;,
    }
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package event
...
func TestEvent(t *testing.T) {
    e := event.OfStart()
    if e.EventType() != event.Start {
        t.Errorf(&amp;quot;expect event.Start, but actual %v.&amp;quot;, e.EventType())
    }
    e = event.OfEnd()
    if e.EventType() != event.End {
        t.Errorf(&amp;quot;expect event.End, but actual %v.&amp;quot;, e.EventType())
    }
}
// è¿è¡Œç»“æœ
=== RUN   TestEvent
--- PASS: TestEvent (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æŠ½è±¡å·¥å‚æ¨¡å¼abstract-factory-pattern&#34;&gt;æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1ghkxo5tf5ij31ak0om4qq.jpg&#34; alt=&#34;æŠ½è±¡å·¥å‚æ¨¡å¼ç»“æ„&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ç®€è¿°-4&#34;&gt;ç®€è¿°&lt;/h3&gt;
&lt;p&gt;åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå·¥å‚å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªäº§å“æ—ï¼Œå…·ä½“åˆ›å»ºå“ªä¸ªäº§å“ï¼Œåˆ™é€šè¿‡&lt;code&gt;swtich-case&lt;/code&gt;çš„æ–¹å¼å»åˆ¤æ–­ã€‚è¿™ä¹Ÿæ„å‘³ç€è¯¥äº§å“ç»„ä¸Šï¼Œæ¯æ–°å¢ä¸€ç±»äº§å“å¯¹è±¡ï¼Œéƒ½å¿…é¡»ä¿®æ”¹åŸæ¥å·¥å‚å¯¹è±¡çš„ä»£ç ï¼›è€Œä¸”éšç€äº§å“çš„ä¸æ–­å¢å¤šï¼Œå·¥å‚å¯¹è±¡çš„èŒè´£ä¹Ÿè¶Šæ¥è¶Šé‡ï¼Œè¿åäº†&lt;strong&gt;å•ä¸€èŒè´£åŸåˆ™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æŠ½è±¡å·¥å‚æ¨¡å¼é€šè¿‡ç»™å·¥å‚ç±»æ–°å¢ä¸€ä¸ªæŠ½è±¡å±‚è§£å†³äº†è¯¥é—®é¢˜ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ&lt;code&gt;FactoryA&lt;/code&gt;å’Œ&lt;code&gt;FactoryB&lt;/code&gt;éƒ½å®ç°Â·æŠ½è±¡å·¥å‚æ¥å£ï¼Œåˆ†åˆ«ç”¨äºåˆ›å»º&lt;code&gt;ProductA&lt;/code&gt;å’Œ&lt;code&gt;ProductB&lt;/code&gt;ã€‚å¦‚æœåç»­æ–°å¢äº†&lt;code&gt;ProductC&lt;/code&gt;ï¼Œåªéœ€æ–°å¢ä¸€ä¸ª&lt;code&gt;FactoryC&lt;/code&gt;å³å¯ï¼Œæ— éœ€ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼›å› ä¸ºæ¯ä¸ªå·¥å‚åªè´Ÿè´£åˆ›å»ºä¸€ä¸ªäº§å“ï¼Œå› æ­¤ä¹Ÿéµå¾ªäº†&lt;strong&gt;å•ä¸€èŒè´£åŸåˆ™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;goå®ç°-4&#34;&gt;Goå®ç°&lt;/h3&gt;
&lt;p&gt;è€ƒè™‘éœ€è¦å¦‚ä¸‹ä¸€ä¸ªæ’ä»¶æ¶æ„é£æ ¼çš„æ¶ˆæ¯å¤„ç†ç³»ç»Ÿï¼Œ&lt;code&gt;pipeline&lt;/code&gt;æ˜¯æ¶ˆæ¯å¤„ç†çš„ç®¡é“ï¼Œå…¶ä¸­åŒ…å«äº†&lt;code&gt;input&lt;/code&gt;ã€&lt;code&gt;filter&lt;/code&gt;å’Œ&lt;code&gt;output&lt;/code&gt;ä¸‰ä¸ªæ’ä»¶ã€‚æˆ‘ä»¬éœ€è¦å®ç°æ ¹æ®é…ç½®æ¥åˆ›å»º&lt;code&gt;pipeline&lt;/code&gt; ï¼ŒåŠ è½½æ’ä»¶è¿‡ç¨‹çš„å®ç°éå¸¸é€‚åˆä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå…¶ä¸­&lt;code&gt;input&lt;/code&gt;ã€&lt;code&gt;filter&lt;/code&gt;å’Œ&lt;code&gt;output&lt;/code&gt;ä¸‰ç±»æ’ä»¶çš„åˆ›å»ºä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œè€Œ&lt;code&gt;pipeline&lt;/code&gt;çš„åˆ›å»ºåˆ™ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1ghkw23e4r3j31bs0nge82.jpg&#34; alt=&#34;æŠ½è±¡å·¥å‚æ¨¡å¼ç¤ºä¾‹&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;å„ç±»æ’ä»¶å’Œ&lt;code&gt;pipeline&lt;/code&gt;çš„æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package plugin
...
// æ’ä»¶æŠ½è±¡æ¥å£å®šä¹‰
type Plugin interface {}
// è¾“å…¥æ’ä»¶ï¼Œç”¨äºæ¥æ”¶æ¶ˆæ¯
type Input interface {
    Plugin
    Receive() string
}
// è¿‡æ»¤æ’ä»¶ï¼Œç”¨äºå¤„ç†æ¶ˆæ¯
type Filter interface {
    Plugin
    Process(msg string) string
}
// è¾“å‡ºæ’ä»¶ï¼Œç”¨äºå‘é€æ¶ˆæ¯
type Output interface {
    Plugin
    Send(msg string)
}
å¤åˆ¶ä»£ç 
package pipeline
...
// æ¶ˆæ¯ç®¡é“çš„å®šä¹‰
type Pipeline struct {
    input  plugin.Input
    filter plugin.Filter
    output plugin.Output
}
// ä¸€ä¸ªæ¶ˆæ¯çš„å¤„ç†æµç¨‹ä¸º input -&amp;gt; filter -&amp;gt; output
func (p *Pipeline) Exec() {
    msg := p.input.Receive()
    msg = p.filter.Process(msg)
    p.output.Send(msg)
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥ç€ï¼Œæˆ‘ä»¬å®šä¹‰&lt;code&gt;input&lt;/code&gt;ã€&lt;code&gt;filter&lt;/code&gt;ã€&lt;code&gt;output&lt;/code&gt;ä¸‰ç±»æ’ä»¶æ¥å£çš„å…·ä½“å®ç°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package plugin
...
// inputæ’ä»¶åç§°ä¸ç±»å‹çš„æ˜ å°„å…³ç³»ï¼Œä¸»è¦ç”¨äºé€šè¿‡åå°„åˆ›å»ºinputå¯¹è±¡
var inputNames = make(map[string]reflect.Type)
// Hello inputæ’ä»¶ï¼Œæ¥æ”¶â€œHello Worldâ€æ¶ˆæ¯
type HelloInput struct {}

func (h *HelloInput) Receive() string {
    return &amp;quot;Hello World&amp;quot;
}
// åˆå§‹åŒ–inputæ’ä»¶æ˜ å°„å…³ç³»è¡¨
func init() {
    inputNames[&amp;quot;hello&amp;quot;] = reflect.TypeOf(HelloInput{})
}
å¤åˆ¶ä»£ç 
package plugin
...
// filteræ’ä»¶åç§°ä¸ç±»å‹çš„æ˜ å°„å…³ç³»ï¼Œä¸»è¦ç”¨äºé€šè¿‡åå°„åˆ›å»ºfilterå¯¹è±¡
var filterNames = make(map[string]reflect.Type)
// Upper filteræ’ä»¶ï¼Œå°†æ¶ˆæ¯å…¨éƒ¨å­—æ¯è½¬æˆå¤§å†™
type UpperFilter struct {}

func (u *UpperFilter) Process(msg string) string {
    return strings.ToUpper(msg)
}
// åˆå§‹åŒ–filteræ’ä»¶æ˜ å°„å…³ç³»è¡¨
func init() {
    filterNames[&amp;quot;upper&amp;quot;] = reflect.TypeOf(UpperFilter{})
}
å¤åˆ¶ä»£ç 
package plugin
...
// outputæ’ä»¶åç§°ä¸ç±»å‹çš„æ˜ å°„å…³ç³»ï¼Œä¸»è¦ç”¨äºé€šè¿‡åå°„åˆ›å»ºoutputå¯¹è±¡
var outputNames = make(map[string]reflect.Type)
// Console outputæ’ä»¶ï¼Œå°†æ¶ˆæ¯è¾“å‡ºåˆ°æ§åˆ¶å°ä¸Š
type ConsoleOutput struct {}

func (c *ConsoleOutput) Send(msg string) {
    fmt.Println(msg)
}
// åˆå§‹åŒ–outputæ’ä»¶æ˜ å°„å…³ç³»è¡¨
func init() {
    outputNames[&amp;quot;console&amp;quot;] = reflect.TypeOf(ConsoleOutput{})
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰æ’ä»¶æŠ½è±¡å·¥å‚æ¥å£ï¼Œä»¥åŠå¯¹åº”æ’ä»¶çš„å·¥å‚å®ç°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package plugin
...
// æ’ä»¶æŠ½è±¡å·¥å‚æ¥å£
type Factory interface {
    Create(conf Config) Plugin
}
// inputæ’ä»¶å·¥å‚å¯¹è±¡ï¼Œå®ç°Factoryæ¥å£
type InputFactory struct{}
// è¯»å–é…ç½®ï¼Œé€šè¿‡åå°„æœºåˆ¶è¿›è¡Œå¯¹è±¡å®ä¾‹åŒ–
func (i *InputFactory) Create(conf Config) Plugin {
    t, _ := inputNames[conf.Name]
    return reflect.New(t).Interface().(Plugin)
}
// filterå’Œoutputæ’ä»¶å·¥å‚å®ç°ç±»ä¼¼
type FilterFactory struct{}
func (f *FilterFactory) Create(conf Config) Plugin {
    t, _ := filterNames[conf.Name]
    return reflect.New(t).Interface().(Plugin)
}
type OutputFactory struct{}
func (o *OutputFactory) Create(conf Config) Plugin {
    t, _ := outputNames[conf.Name]
    return reflect.New(t).Interface().(Plugin)
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æœ€åå®šä¹‰&lt;code&gt;pipeline&lt;/code&gt;çš„å·¥å‚æ–¹æ³•ï¼Œè°ƒç”¨&lt;code&gt;plugin.Factory&lt;/code&gt;æŠ½è±¡å·¥å‚å®Œæˆpipelienå¯¹è±¡çš„å®ä¾‹åŒ–ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package pipeline
...
// ä¿å­˜ç”¨äºåˆ›å»ºPluginçš„å·¥å‚å®ä¾‹ï¼Œå…¶ä¸­mapçš„keyä¸ºæ’ä»¶ç±»å‹ï¼Œvalueä¸ºæŠ½è±¡å·¥å‚æ¥å£
var pluginFactories = make(map[plugin.Type]plugin.Factory)
// æ ¹æ®plugin.Typeè¿”å›å¯¹åº”Pluginç±»å‹çš„å·¥å‚å®ä¾‹
func factoryOf(t plugin.Type) plugin.Factory {
    factory, _ := pluginFactories[t]
    return factory
}
// pipelineå·¥å‚æ–¹æ³•ï¼Œæ ¹æ®é…ç½®åˆ›å»ºä¸€ä¸ªPipelineå®ä¾‹
func Of(conf Config) *Pipeline {
    p := &amp;amp;Pipeline{}
    p.input = factoryOf(plugin.InputType).Create(conf.Input).(plugin.Input)
    p.filter = factoryOf(plugin.FilterType).Create(conf.Filter).(plugin.Filter)
    p.output = factoryOf(plugin.OutputType).Create(conf.Output).(plugin.Output)
    return p
}
// åˆå§‹åŒ–æ’ä»¶å·¥å‚å¯¹è±¡
func init() {
    pluginFactories[plugin.InputType] = &amp;amp;plugin.InputFactory{}
    pluginFactories[plugin.FilterType] = &amp;amp;plugin.FilterFactory{}
    pluginFactories[plugin.OutputType] = &amp;amp;plugin.OutputFactory{}
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package test
...
func TestPipeline(t *testing.T) {
  // å…¶ä¸­pipeline.DefaultConfig()çš„é…ç½®å†…å®¹è§ã€æŠ½è±¡å·¥å‚æ¨¡å¼ç¤ºä¾‹å›¾ã€‘
  // æ¶ˆæ¯å¤„ç†æµç¨‹ä¸º HelloInput -&amp;gt; UpperFilter -&amp;gt; ConsoleOutput
    p := pipeline.Of(pipeline.DefaultConfig())
    p.Exec()
}
// è¿è¡Œç»“æœ
=== RUN   TestPipeline
HELLO WORLD
--- PASS: TestPipeline (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;åŸå‹æ¨¡å¼prototype-pattern&#34;&gt;åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlgy1ghky39ichjj319u0gqhdt.jpg&#34; alt=&#34;åŸå‹æ¨¡å¼ç»“æ„&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ç®€è¿°-5&#34;&gt;ç®€è¿°&lt;/h3&gt;
&lt;p&gt;åŸå‹æ¨¡å¼ä¸»è¦è§£å†³å¯¹è±¡å¤åˆ¶çš„é—®é¢˜ï¼Œå®ƒçš„æ ¸å¿ƒå°±æ˜¯&lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•ï¼Œè¿”å›&lt;code&gt;Prototype&lt;/code&gt;å¯¹è±¡çš„å¤åˆ¶å“ã€‚åœ¨ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä¼šé‡åˆ°æœ‰ä¸€äº›åœºæ™¯éœ€è¦å¤§é‡ç›¸åŒçš„å¯¹è±¡ï¼Œå¦‚æœä¸ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·è¿›è¡Œå¯¹è±¡çš„åˆ›å»ºï¼š&lt;em&gt;æ–°åˆ›å»ºä¸€ä¸ªç›¸åŒå¯¹è±¡çš„å®ä¾‹ï¼Œç„¶åéå†åŸå§‹å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œ å¹¶å°†æˆå‘˜å˜é‡å€¼å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸­&lt;/em&gt;ã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œé‚£å°±æ˜¯ä½¿ç”¨è€…å¿…é¡»çŸ¥é“å¯¹è±¡çš„å®ç°ç»†èŠ‚ï¼Œå¯¼è‡´ä»£ç ä¹‹é—´çš„è€¦åˆã€‚å¦å¤–ï¼Œå¯¹è±¡å¾ˆæœ‰å¯èƒ½å­˜åœ¨é™¤äº†å¯¹è±¡æœ¬èº«ä»¥å¤–ä¸å¯è§çš„å˜é‡ï¼Œè¿™ç§æƒ…å†µä¸‹è¯¥æ–¹æ³•å°±è¡Œä¸é€šäº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºè¿™ç§æƒ…å†µï¼Œæ›´å¥½çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œå°†å¤åˆ¶é€»è¾‘å§”æ‰˜ç»™å¯¹è±¡æœ¬èº«ï¼Œè¿™æ ·ï¼Œä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ä¹Ÿéƒ½è¿åˆƒè€Œè§£äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;goå®ç°-5&#34;&gt;Goå®ç°&lt;/h3&gt;
&lt;p&gt;è¿˜æ˜¯ä»¥å»ºé€ è€…æ¨¡å¼ä¸€èŠ‚ä¸­çš„&lt;code&gt;Message&lt;/code&gt;ä½œä¸ºä¾‹å­ï¼Œç°åœ¨è®¾è®¡ä¸€ä¸ª&lt;code&gt;Prototype&lt;/code&gt;æŠ½è±¡æ¥å£ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package prototype
...
// åŸå‹å¤åˆ¶æŠ½è±¡æ¥å£
type Prototype interface {
    clone() Prototype
}

type Message struct {
    Header *Header
    Body   *Body
}

func (m *Message) clone() Prototype {
    msg := *m
    return &amp;amp;msg
}
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package test
...
func TestPrototype(t *testing.T) {
    message := msg.Builder().
        WithSrcAddr(&amp;quot;192.168.0.1&amp;quot;).
        WithSrcPort(1234).
        WithDestAddr(&amp;quot;192.168.0.2&amp;quot;).
        WithDestPort(8080).
        WithHeaderItem(&amp;quot;contents&amp;quot;, &amp;quot;application/json&amp;quot;).
        WithBodyItem(&amp;quot;record1&amp;quot;).
        WithBodyItem(&amp;quot;record2&amp;quot;).
        Build()
  // å¤åˆ¶ä¸€ä»½æ¶ˆæ¯
    newMessage := message.Clone().(*msg.Message)
    if newMessage.Header.SrcAddr != message.Header.SrcAddr {
        t.Errorf(&amp;quot;Clone Message failed.&amp;quot;)
    }
    if newMessage.Body.Items[0] != message.Body.Items[0] {
        t.Errorf(&amp;quot;Clone Message failed.&amp;quot;)
    }
}
// è¿è¡Œç»“æœ
=== RUN   TestPrototype
--- PASS: TestPrototype (0.00s)
PASS
å¤åˆ¶ä»£ç 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†GoFçš„23ç§è®¾è®¡æ¨¡å¼ä¸­çš„5ç§åˆ›å»ºå‹æ¨¡å¼ï¼Œåˆ›å»ºå‹æ¨¡å¼çš„ç›®çš„éƒ½æ˜¯&lt;strong&gt;æä¾›ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œè®©å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ä¸ä½¿ç”¨è€…è§£è€¦&lt;/strong&gt;ã€‚å…¶ä¸­ï¼Œ&lt;strong&gt;å•ä¾‹æ¨¡å¼&lt;/strong&gt;ä¸»è¦ç”¨äºä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ï¼›&lt;strong&gt;å»ºé€ è€…æ¨¡å¼&lt;/strong&gt;ä¸»è¦è§£å†³éœ€è¦åˆ›å»ºå¯¹è±¡æ—¶éœ€è¦ä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œæˆ–è€…å¯¹åˆå§‹åŒ–é¡ºåºæœ‰è¦æ±‚çš„åœºæ™¯ï¼›&lt;strong&gt;å·¥å‚æ–¹æ³•æ¨¡å¼&lt;/strong&gt;é€šè¿‡æä¾›ä¸€ä¸ªå·¥å‚å¯¹è±¡æˆ–è€…å·¥å‚æ–¹æ³•ï¼Œä¸ºä½¿ç”¨è€…éšè—äº†å¯¹è±¡åˆ›å»ºçš„ç»†èŠ‚ï¼›&lt;strong&gt;æŠ½è±¡å·¥å‚æ¨¡å¼&lt;/strong&gt;æ˜¯å¯¹å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¼˜åŒ–ï¼Œé€šè¿‡ä¸ºå·¥å‚å¯¹è±¡æ–°å¢ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œè®©å·¥å‚å¯¹è±¡éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œä¹Ÿé¿å…äº†éœ°å¼¹å¼ä¿®æ”¹ï¼›&lt;strong&gt;åŸå‹æ¨¡å¼&lt;/strong&gt;åˆ™è®©å¯¹è±¡å¤åˆ¶æ›´åŠ ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œå°†ä»‹ç»23ç§è®¾è®¡æ¨¡å¼ä¸­çš„7ç§&lt;strong&gt;ç»“æ„å‹æ¨¡å¼&lt;/strong&gt;ï¼ˆStructural Patternï¼‰ï¼ŒåŠå…¶Goè¯­è¨€çš„å®ç°ã€‚&lt;/p&gt;
">ä½¿ç”¨Goå®ç°GoFçš„23ç§è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/yong-golang-shi-xian-de-shi-da-jing-dian-pai-xu/"" data-c="
          &lt;p&gt;ç”¨goè¯­è¨€å®ç°çš„åå¤§ç»å…¸æ’åº&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h3 id=&#34;å†’æ³¡æ’åº&#34;&gt;å†’æ³¡æ’åº&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// å†’æ³¡æ’åº
func bubble(nums []int) []int {
   numLen := len(nums)

   for i := 0; i &amp;lt; numLen; i++ {
      // æŒ‰ç›¸é‚»ä¸¤ä¸ªä¸€èµ·æ¯”è¾ƒï¼Œæ‰€ä»¥æœ€åä¸€ä¸ªä¸ç”¨éå† -1,å·²ç»æ’åºçš„ä¹Ÿä¸ç”¨é‡æ–°æ’åºï¼Œæ‰€ä»¥-iï¼Œä¸å†™ä¹Ÿå¯
      for j := 0; j &amp;lt; numLen-1-i; j++ {
         // å½“å‰å€¼å¤§äºåä¸€ä¸ªå€¼ï¼Œåˆ™å¯¹æ¢ä½ç½®
         if nums[j] &amp;gt; nums[j+1] {
            nums[j], nums[j+1] = nums[j+1], nums[j]
         }
      }
   }

   return nums
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;é€‰æ‹©æ’åº&#34;&gt;é€‰æ‹©æ’åº&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func selection(nums []int) []int {
   numLen := len(nums)
   //æœ€åä¸€ä¸ªä¸ç”¨æ’åºäº†
   for i := 0; i &amp;lt; numLen-1; i++ {
      //æ¯æ¬¡æœ€å°å€¼çš„ä½ç½®index
      var minIndex = i
      // ä»ç¬¬äºŒä¸ªå¼€å§‹æ’åºï¼Œä¹Ÿå°±æ˜¯i+1
      for j := i + 1; j &amp;lt; numLen; j++ {
         if nums[j] &amp;lt; nums[minIndex] {
            minIndex = j
         }
      }
      nums[i], nums[minIndex] = nums[minIndex], nums[i]
   }

   return nums
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æ’å…¥æ’åº&#34;&gt;æ’å…¥æ’åº&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func insertion(nums []int) []int {
   // ç½‘ä¸Šå†™æ³•
   for i, tmp := range nums {
      // å‰ä¸€ä¸ªç´¢å¼•å€¼
      preIndex := i - 1
      // å®šä¹‰ä¸€ä¸ªä¸´æ—¶å˜é‡å–å½“å‰çš„å€¼ï¼ˆæŒ–å‡ºæ¥è…¾åœ°æ–¹ï¼Œç»™å‰é¢çš„å¾€åæŒªä½ç½®çš„ç©ºé—´
      //tmp := nums[i]
      // å¦‚æœå½“å‰å€¼ tmp å°äºå‰é¢çš„å€¼ï¼Œå°±æŠŠå‰é¢çš„å€¼å¾€åæŒªï¼Œå› ä¸ºtmpå·²ç»ä¿å­˜è¿‡ç›¸å½“äºç©ºçš„
      for preIndex &amp;gt;= 0 &amp;amp;&amp;amp; tmp &amp;lt; nums[preIndex] {
         nums[preIndex+1] = nums[preIndex]
         preIndex--
      }
      // ä¸æ»¡è¶³ä»¥ä¸Šæ¡ä»¶æ—¶ï¼Œè¯´æ˜æ²¡æœ‰æ¯”tmpæ›´å°çš„ï¼Œå°±ä¿å­˜tmpå½“å‰å€¼åˆ°æ–°çš„ä½ç½®
      nums[preIndex+1] = tmp
   }

   // è‡ªå·±å†™æ³•
   //numLen := len(nums)
   //for i := 1; i &amp;lt; numLen; i++ { //ä»ç¬¬2ä¸ªå¼€å§‹ï¼Œi=1å¼€å§‹
   //
   // temp := nums[i] // å®šä¹‰ä¸€ä¸ªä¸´æ—¶å˜é‡å–å½“å‰çš„å€¼
   // // æŠŠè¯¥å€¼tmpä¸ä¹‹å‰çš„æ•° ä»åå¾€å‰è¿›è¡Œæ¯”è¾ƒ
   // for j := i - 1; j &amp;gt;= 0; j-- {
   //    // å½“ å½“å‰å€¼tmp æ¯”ä¹‹å‰çš„æŸä¸ªå€¼å¤§,é‚£ä¹ˆæ’å…¥,å¦åˆ™æŠŠæ¯ä¸ªå€¼å¾€åç§»ä¸€ä½
   //    if temp &amp;gt; nums[j] {
   //       nums[j+1] = temp
   //       break
   //    } else {
   //       nums[j+1] = nums[j]
   //    }
   //    // å¦‚æœéƒ½ç§»åŠ¨äº†,ç„¶åéå†åˆ°0äº†,è¯´æ˜å½“å‰å€¼æ˜¯æœ€å°çš„,æŠŠå½“å‰å€¼æ”¾åˆ°æœ€å°çš„ä½ç½®
   //    if j == 0 {
   //       nums[0] = temp
   //    }
   // }
   //}
   return nums
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å¸Œå°”æ’åº&#34;&gt;å¸Œå°”æ’åº&lt;/h3&gt;
&lt;h3 id=&#34;å½’å¹¶æ’åº&#34;&gt;å½’å¹¶æ’åº&lt;/h3&gt;
&lt;h3 id=&#34;å¿«é€Ÿæ’åº&#34;&gt;å¿«é€Ÿæ’åº&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func partition(nums []int, left, right int) int {
   // è®¾åŸºå‡†å€¼ privot ä¸ºleft
   privot := left
   index := privot + 1
   for i := index; i &amp;lt;= right; i++ {
      if nums[i] &amp;lt; nums[privot] {
         nums[i], nums[index] = nums[index], nums[i]
         index++
      }
   }
   nums[privot], nums[index-1] = nums[index-1], nums[privot]
   return index - 1
}

func quickSort(nums []int, left, right int) {
   // å¦‚æœæ•°ç»„é•¿åº¦å°äºç­‰äº1ï¼Œè¯´æ˜è¿™ä¸ªæ•°ç»„åˆ†åŒºä¸éœ€è¦å†æ’åºäº†ï¼Œç›´æ¥return
   if len(nums) &amp;lt;= 1 {
      return
   }
   // å¦‚æœå·¦å°äºå³ï¼Œ
   if left &amp;lt; right {
      partIndex := partition(nums, left, right)
      quickSort(nums, left, partIndex-1)
      quickSort(nums, partIndex+1, right)
   }
   return
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å †æ’åº&#34;&gt;å †æ’åº&lt;/h3&gt;
">ç”¨ golang å®ç°çš„åå¤§ç»å…¸æ’åº</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/wo-ca-~zi-fu-chuan-zhuan-zi-jie-qie-pian-hou-qie-pian-de-rong-liang-jing-ran-qian-qi-bai-guai/"" data-c="
          &lt;p&gt;å­—ç¬¦ä¸²è½¬å­—èŠ‚åˆ‡ç‰‡æ­¥éª¤å¦‚ä¸‹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åˆ¤æ–­æ˜¯å¦æ˜¯å¸¸é‡ï¼Œ å¦‚æœæ˜¯å¸¸é‡åˆ™è½¬æ¢ä¸ºç­‰å®¹é‡ç­‰é•¿çš„å­—èŠ‚åˆ‡ç‰‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæ˜¯å˜é‡ï¼Œ å…ˆåˆ¤æ–­ç”Ÿæˆçš„åˆ‡ç‰‡æ˜¯å¦å‘ç”Ÿå˜é‡é€ƒé€¸&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœé€ƒé€¸æˆ–è€…å­—ç¬¦ä¸²é•¿åº¦&amp;gt;32ï¼Œ åˆ™æ ¹æ®å­—ç¬¦ä¸²é•¿åº¦å¯ä»¥è®¡ç®—å‡ºä¸åŒçš„å®¹é‡&lt;/li&gt;
&lt;li&gt;å¦‚æœæœªé€ƒé€¸ä¸”å­—ç¬¦ä¸²é•¿åº¦&amp;lt;=32, åˆ™å­—ç¬¦åˆ‡ç‰‡å®¹é‡ä¸º32&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- more --&gt;
&lt;p&gt;ä»¥ä¸‹æ–‡ç« æ¥æºäºæ–°ä¸–ç•Œæ‚è´§é“º ï¼Œä½œè€…è®¸æ–‡&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://baijiahao.baidu.com/s?id=1671902920320901161&#34;&gt;&lt;strong&gt;æ–°ä¸–ç•Œæ‚è´§é“º&lt;/strong&gt;ä½œä¸ºä¸€åGopherï¼Œ æˆ‘æ„¿ç§°ä¹‹ä¸ºGoçš„å¹²(æ‚)è´§é“ºå­ï¼&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¥å¥‡çš„ç°è±¡&lt;/p&gt;
&lt;p&gt;åˆ‡ç‰‡ï¼Œ åˆ‡ç‰‡ï¼Œ åˆæ˜¯åˆ‡ç‰‡!&lt;/p&gt;
&lt;p&gt;ä»Šå¤©é‡åˆ°çš„ç¥å¥‡é—®é¢˜å’Œåˆ‡ç‰‡æœ‰å…³ï¼Œ å…·ä½“æ€ä¹ˆä¸ªç¥å¥‡æ³•ï¼Œ æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢å‡ ä¸ªç°è±¡&lt;/p&gt;
&lt;h3 id=&#34;ç°è±¡ä¸€&#34;&gt;ç°è±¡ä¸€&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;a := &amp;quot;abc&amp;quot;
bs := []byte(a)
fmt.Println(bs, len(bs), cap(bs))
// è¾“å‡ºï¼š [97 98 99] 3 8
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ç°è±¡äºŒ&#34;&gt;ç°è±¡äºŒ&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;a := &amp;quot;abc&amp;quot;
bs := []byte(a)
fmt.Println(len(bs), cap(bs))
// è¾“å‡º: 3 32
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ç°è±¡ä¸‰&#34;&gt;ç°è±¡ä¸‰&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;bs := []byte(&amp;quot;abc&amp;quot;)
fmt.Println(len(bs), cap(bs))
// è¾“å‡º: 3 3
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ç°è±¡å››&#34;&gt;ç°è±¡å››&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;a := &amp;quot;&amp;quot;
bs := []byte(a)
fmt.Println(bs, len(bs), cap(bs))
// è¾“å‡º: [] 0 0
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ç°è±¡äº”&#34;&gt;ç°è±¡äº”&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;a := &amp;quot;&amp;quot;
bs := []byte(a)
fmt.Println(len(bs), cap(bs))
// è¾“å‡º: 0 32
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;åˆ†æ&#34;&gt;åˆ†æ&lt;/h2&gt;
&lt;p&gt;åˆ°è¿™å„¿æˆ‘å·²ç»æ»¡è„‘å­é—®å·äº†&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://pics4.baidu.com/feed/b7003af33a87e95024fc161f982aa645faf2b4f7.jpeg?token=851a11b97e2f5c17586d5100942c414e&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;å­—ç¬¦ä¸²å˜é‡è½¬åˆ‡ç‰‡&#34;&gt;å­—ç¬¦ä¸²å˜é‡è½¬åˆ‡ç‰‡&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªå°å°çš„å­—ç¬¦ä¸²è½¬åˆ‡ç‰‡ï¼Œ å†…éƒ¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Œ ç«Ÿç„¶å¦‚æ­¤çš„ç¥å¥‡ã€‚è¿™ç§æ—¶å€™åªå¥½ç¥­å‡ºæ±‡ç¼–å¤§æ³•ï¼Œ çœ‹çœ‹æ±‡ç¼–ä»£ç (&lt;code&gt;å¸Œæœ›ä¹‹åæœ‰æœºä¼šèƒ½å¤Ÿå¯¹goçš„æ±‡ç¼–è¯­æ³•è¿›è¡Œç®€å•çš„ä»‹ç»&lt;/code&gt;)æœ‰æ²¡æœ‰ä»€ä¹ˆå…³é”®è¯èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ä¸ºç°è±¡ä¸€è½¬æ¢çš„æ±‡ç¼–ä»£ç å…³é”®éƒ¨åˆ†&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;quot;&amp;quot;.main STEXT size=495 args=0x0 locals=0xd8
	0x0000 00000 (test.go:5)	TEXT	&amp;quot;&amp;quot;.main(SB), ABIInternal, $216-0
	0x0000 00000 (test.go:5)	MOVQ	(TLS), CX
	0x0009 00009 (test.go:5)	LEAQ	-88(SP), AX
	0x000e 00014 (test.go:5)	CMPQ	AX, 16(CX)
	0x0012 00018 (test.go:5)	JLS	485
	0x0018 00024 (test.go:5)	SUBQ	$216, SP
	0x001f 00031 (test.go:5)	MOVQ	BP, 208(SP)
	0x0027 00039 (test.go:5)	LEAQ	208(SP), BP
	0x002f 00047 (test.go:5)	FUNCDATA	$0, gclocalsÂ·7be4bbacbfdb05fb3044e36c22b41e8b(SB)
	0x002f 00047 (test.go:5)	FUNCDATA	$1, gclocalsÂ·648d0b72bb9d7f59fbfdbee57a078eee(SB)
	0x002f 00047 (test.go:5)	FUNCDATA	$2, gclocalsÂ·2dfddcc7190380b1ae77e69d81f0a101(SB)
	0x002f 00047 (test.go:5)	FUNCDATA	$3, &amp;quot;&amp;quot;.main.stkobj(SB)
	0x002f 00047 (test.go:6)	PCDATA	$0, $1
	0x002f 00047 (test.go:6)	PCDATA	$1, $0
	0x002f 00047 (test.go:6)	LEAQ	go.string.&amp;quot;abc&amp;quot;(SB), AX
	0x0036 00054 (test.go:6)	MOVQ	AX, &amp;quot;&amp;quot;.a+96(SP)
	0x003b 00059 (test.go:6)	MOVQ	$3, &amp;quot;&amp;quot;.a+104(SP)
	0x0044 00068 (test.go:7)	MOVQ	$0, (SP)
	0x004c 00076 (test.go:7)	PCDATA	$0, $0
	0x004c 00076 (test.go:7)	MOVQ	AX, 8(SP)
	0x0051 00081 (test.go:7)	MOVQ	$3, 16(SP)
	0x005a 00090 (test.go:7)	CALL	runtime.stringtoslicebyte(SB)
	0x005f 00095 (test.go:7)	MOVQ	40(SP), AX
	0x0064 00100 (test.go:7)	MOVQ	32(SP), CX
	0x0069 00105 (test.go:7)	PCDATA	$0, $2
	0x0069 00105 (test.go:7)	MOVQ	24(SP), DX
	0x006e 00110 (test.go:7)	PCDATA	$0, $0
	0x006e 00110 (test.go:7)	PCDATA	$1, $1
	0x006e 00110 (test.go:7)	MOVQ	DX, &amp;quot;&amp;quot;.bs+112(SP)
	0x0073 00115 (test.go:7)	MOVQ	CX, &amp;quot;&amp;quot;.bs+120(SP)
	0x0078 00120 (test.go:7)	MOVQ	AX, &amp;quot;&amp;quot;.bs+128(SP)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸‹ä¸ºç°è±¡äºŒè½¬æ¢çš„æ±‡ç¼–ä»£ç å…³é”®éƒ¨åˆ†&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;quot;&amp;quot;.main STEXT size=393 args=0x0 locals=0xe0
	0x0000 00000 (test.go:5)	TEXT	&amp;quot;&amp;quot;.main(SB), ABIInternal, $224-0
	0x0000 00000 (test.go:5)	MOVQ	(TLS), CX
	0x0009 00009 (test.go:5)	LEAQ	-96(SP), AX
	0x000e 00014 (test.go:5)	CMPQ	AX, 16(CX)
	0x0012 00018 (test.go:5)	JLS	383
	0x0018 00024 (test.go:5)	SUBQ	$224, SP
	0x001f 00031 (test.go:5)	MOVQ	BP, 216(SP)
	0x0027 00039 (test.go:5)	LEAQ	216(SP), BP
	0x002f 00047 (test.go:5)	FUNCDATA	$0, gclocalsÂ·0ce64bbc7cfa5ef04d41c861de81a3d7(SB)
	0x002f 00047 (test.go:5)	FUNCDATA	$1, gclocalsÂ·00590b99cfcd6d71bbbc6e05cb4f8bf8(SB)
	0x002f 00047 (test.go:5)	FUNCDATA	$2, gclocalsÂ·8dcadbff7c52509cfe2d26e4d7d24689(SB)
	0x002f 00047 (test.go:5)	FUNCDATA	$3, &amp;quot;&amp;quot;.main.stkobj(SB)
	0x002f 00047 (test.go:6)	PCDATA	$0, $1
	0x002f 00047 (test.go:6)	PCDATA	$1, $0
	0x002f 00047 (test.go:6)	LEAQ	go.string.&amp;quot;abc&amp;quot;(SB), AX
	0x0036 00054 (test.go:6)	MOVQ	AX, &amp;quot;&amp;quot;.a+120(SP)
	0x003b 00059 (test.go:6)	MOVQ	$3, &amp;quot;&amp;quot;.a+128(SP)
	0x0047 00071 (test.go:7)	PCDATA	$0, $2
	0x0047 00071 (test.go:7)	LEAQ	&amp;quot;&amp;quot;..autotmp_5+64(SP), CX
	0x004c 00076 (test.go:7)	PCDATA	$0, $1
	0x004c 00076 (test.go:7)	MOVQ	CX, (SP)
	0x0050 00080 (test.go:7)	PCDATA	$0, $0
	0x0050 00080 (test.go:7)	MOVQ	AX, 8(SP)
	0x0055 00085 (test.go:7)	MOVQ	$3, 16(SP)
	0x005e 00094 (test.go:7)	CALL	runtime.stringtoslicebyte(SB)
	0x0063 00099 (test.go:7)	MOVQ	40(SP), AX
	0x0068 00104 (test.go:7)	MOVQ	32(SP), CX
	0x006d 00109 (test.go:7)	PCDATA	$0, $3
	0x006d 00109 (test.go:7)	MOVQ	24(SP), DX
	0x0072 00114 (test.go:7)	PCDATA	$0, $0
	0x0072 00114 (test.go:7)	PCDATA	$1, $1
	0x0072 00114 (test.go:7)	MOVQ	DX, &amp;quot;&amp;quot;.bs+136(SP)
	0x007a 00122 (test.go:7)	MOVQ	CX, &amp;quot;&amp;quot;.bs+144(SP)
	0x0082 00130 (test.go:7)	MOVQ	AX, &amp;quot;&amp;quot;.bs+152(SP)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨çœ‹æ±‡ç¼–ä»£ç ä¹‹å‰ï¼Œ æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€çœ‹&lt;code&gt;runtime.stringtoslicebyte&lt;/code&gt;çš„å‡½æ•°ç­¾å&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;func stringtoslicebyte(buf *tmpBuf, s string) []byte
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆ°è¿™é‡Œåªé å…³é”®è¯å·²ç»æ— æ³•çœ‹å‡ºæ›´å¤šçš„ä¿¡æ¯äº†,è¿˜æ˜¯éœ€è¦ç¨å¾®äº†è§£ä¸€ä¸‹æ±‡ç¼–çš„è¯­æ³•,ç¬”è€…åœ¨è¿™é‡Œåˆ—å‡ºä¸€ç‚¹ç®€å•çš„åˆ†æï¼Œ ä¹‹åæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥é€šè¿‡å–å·§çš„æ–¹æ³•å‘ç°æ›´å¤šçš„ä¸œè¥¿&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// ç°è±¡ä¸€ç»™runtime.stringtoslicebyteçš„ä¼ å‚
0x002f 00047 (test.go:6)	LEAQ	go.string.&amp;quot;abc&amp;quot;(SB), AX // å°†å­—ç¬¦ä¸²&amp;quot;abc&amp;quot;æ”¾å…¥å¯„å­˜å™¨AX
0x0036 00054 (test.go:6)	MOVQ	AX, &amp;quot;&amp;quot;.a+96(SP) // å°†AXä¸­çš„å†…å®¹å­˜å…¥å˜é‡aä¸­
0x003b 00059 (test.go:6)	MOVQ	$3, &amp;quot;&amp;quot;.a+104(SP) // å°†å­—ç¬¦ä¸²é•¿åº¦3å­˜å…¥å˜é‡aä¸­
0x0044 00068 (test.go:7)	MOVQ	$0, (SP) // å°†0 ä¼ é€’ä¸ªruntime.stringtoslicebyte(SB)çš„ç¬¬ä¸€ä¸ªå‚æ•°(ç¬”è€…çŒœæµ‹å¯¹åº”goä¸­çš„nil)
0x004c 00076 (test.go:7)	PCDATA	$0, $0 // æ®è¯´å’Œgcæœ‰å…³ï¼Œ å…·ä½“è¿˜ä¸æ¸…æ¥šï¼Œ ä¸€èˆ¬æƒ…å†µå¯ä»¥å¿½ç•¥
0x004c 00076 (test.go:7)	MOVQ	AX, 8(SP) // å°†AXä¸­çš„å†…å®¹ä¼ é€’ç»™runtime.stringtoslicebyte(SB)çš„ç¬¬äºŒä¸ªå‚æ•°
0x0051 00081 (test.go:7)	MOVQ	$3, 16(SP) // å°†å­—ç¬¦ä¸²é•¿åº¦ä¼ é€’ç»™runtime.stringtoslicebyte(SB)çš„ç¬¬äºŒä¸ªå‚æ•°
0x005a 00090 (test.go:7)	CALL	runtime.stringtoslicebyte(SB) // è°ƒç”¨å‡½æ•°ï¼Œ æ­¤è¡Œåé¢çš„å‡ è¡Œä»£ç æ˜¯å°†è¿”å›å€¼èµ‹å€¼ç»™å˜é‡bs

// ç°è±¡äºŒç»™runtime.stringtoslicebyteçš„ä¼ å‚
0x002f 00047 (test.go:6)	LEAQ	go.string.&amp;quot;abc&amp;quot;(SB), AX // å°†å­—ç¬¦ä¸²&amp;quot;abc&amp;quot;æ”¾å…¥å¯„å­˜å™¨AX
0x0036 00054 (test.go:6)	MOVQ	AX, &amp;quot;&amp;quot;.a+120(SP) // å°†AXä¸­çš„å†…å®¹å­˜å…¥å˜é‡aä¸­
0x003b 00059 (test.go:6)	MOVQ	$3, &amp;quot;&amp;quot;.a+128(SP) // å°†å­—ç¬¦ä¸²é•¿åº¦3å­˜å…¥å˜é‡aä¸­
0x0047 00071 (test.go:7)	PCDATA	$0, $2
0x0047 00071 (test.go:7)	LEAQ	&amp;quot;&amp;quot;..autotmp_5+64(SP), CX // å°†å†…éƒ¨å˜é‡autotmp_5æ”¾å…¥å¯„å­˜å™¨CX
0x004c 00076 (test.go:7)	PCDATA	$0, $1
0x004c 00076 (test.go:7)	MOVQ	CX, (SP) // å°†CXä¸­çš„å†…å®¹ä¼ é€’ç»™runtime.stringtoslicebyte(SB)çš„ç¬¬ä¸€ä¸ªå‚æ•°
0x0050 00080 (test.go:7)	PCDATA	$0, $0
0x0050 00080 (test.go:7)	MOVQ	AX, 8(SP) // å°†AXä¸­çš„å†…å®¹ä¼ é€’ç»™runtime.stringtoslicebyte(SB)çš„ç¬¬äºŒä¸ªå‚æ•°
0x0055 00085 (test.go:7)	MOVQ	$3, 16(SP) // å°†å­—ç¬¦ä¸²é•¿åº¦ä¼ é€’ç»™runtime.stringtoslicebyte(SB)çš„ç¬¬äºŒä¸ªå‚æ•°
0x005e 00094 (test.go:7)	CALL	runtime.stringtoslicebyte(SB)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢æ±‡ç¼–ä»£ç çš„åˆ†æå¯ä»¥çŸ¥é“ï¼Œç°è±¡ä¸€å’Œç°è±¡äºŒçš„åŒºåˆ«å°±æ˜¯ä¼ é€’ç»™&lt;code&gt;runtime.stringtoslicebyte&lt;/code&gt;çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸åŒã€‚é€šè¿‡å¯¹runtimeåŒ…ä¸­&lt;code&gt;stringtoslicebyte&lt;/code&gt;å‡½æ•°åˆ†æï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦æœ‰å€¼å’Œå­—ç¬¦ä¸²é•¿åº¦ä¼šå½±å“ä»£ç æ‰§è¡Œçš„åˆ†æ”¯ï¼Œä»è€Œç”Ÿæˆä¸åŒçš„åˆ‡ç‰‡ï¼Œ å› æ­¤å®¹é‡ä¸ä¸€æ ·ä¹Ÿæ˜¯å¸¸ç†ä¹‹ä¸­ï¼Œ ä¸‹é¢æˆ‘ä»¬çœ‹æºç &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;func stringtoslicebyte(buf *tmpBuf, s string) []byte {
	var b []byte
	if buf != nil &amp;amp;&amp;amp; len(s) &amp;lt;= len(buf) {
		*buf = tmpBuf{}
		b = buf[:len(s)]
	} else {
		b = rawbyteslice(len(s))
	}
	copy(b, s)
	return b
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶è€Œï¼Œ stringtoslicebyteçš„ç¬¬ä¸€ä¸ªå‚æ•°ä»€ä¹ˆæƒ…å†µä¸‹æ‰ä¼šæœ‰å€¼ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¸ºnil, æˆ‘ä»¬ä»ç„¶ä¸æ¸…æ¥šã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Œ åªå¥½ç¥­å‡ºå…¨å±€æœç´¢å¤§æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# åœ¨goæºç æ ¹ç›®å½•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤
grep stringtoslicebyte -r . | grep -v &amp;quot;//&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æœ€ç»ˆåœ¨goçš„ç¼–è¯‘å™¨æºç cmd/compile/internal/gc/walk.goå‘ç°äº†å¦‚ä¸‹ä»£ç å—&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬æŸ¥çœ‹&lt;code&gt;mkcall&lt;/code&gt; å‡½æ•°ç­¾åå¯ä»¥çŸ¥é“, ä»ç¬¬å››ä¸ªå‚æ•°å¼€å§‹çš„æ‰€æœ‰å˜é‡éƒ½ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™ç¬¬ä¸€ä¸ªå‚æ•°å¯¹åº”çš„å‡½æ•°ï¼Œ æœ€åç”Ÿæˆä¸€ä¸ª&lt;code&gt;*Node&lt;/code&gt;çš„å˜é‡ã€‚å…¶ä¸­Nodeç»“æ„ä½“è§£é‡Šå¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// A Node is a single node in the syntax tree.
// Actually the syntax tree is a syntax DAG, because there is only one
// node with Op=ONAME for a given instance of a variable x.
// The same is true for Op=OTYPE and Op=OLITERAL. See Node.mayBeShared.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»¼åˆä¸Šè¿°ä¿¡æ¯æˆ‘ä»¬å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œç¼–è¯‘å™¨ä¼šå¯¹stringtoslicebyteçš„å‡½æ•°è°ƒç”¨ç”Ÿæˆä¸€ä¸ªAST(æŠ½è±¡è¯­æ³•æ ‘)å¯¹åº”çš„èŠ‚ç‚¹ã€‚å› æ­¤æˆ‘ä»¬ä¹ŸçŸ¥é“ä¼ é€’ç»™stringtoslicebyteå‡½æ•°çš„ç¬¬ä¸€ä¸ªå˜é‡ä¹Ÿå°±å¯¹åº”äºä¸Šå›¾ä¸­çš„å˜é‡a.&lt;/p&gt;
&lt;p&gt;å…¶ä¸­açš„åˆå§‹å€¼ä¸º&lt;code&gt;nodnil()&lt;/code&gt;çš„è¿”å›å€¼ï¼Œå³é»˜è®¤ä¸º&lt;code&gt;nil&lt;/code&gt;. ä½†æ˜¯&lt;code&gt;n.Esc == EscNone&lt;/code&gt;æ—¶ï¼Œaä¼šå˜æˆä¸€ä¸ªæ•°ç»„ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹EscNoneçš„è§£é‡Š.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// æ­¤ä»£ç ä½äºcmd/compile/internal/gc/esc.goä¸­
const (
	// ...
	EscNone           // Does not escape to heap, result, or parameters.
    ...
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç”±ä¸Šå¯çŸ¥, &lt;code&gt;EscNone&lt;/code&gt;ç”¨æ¥åˆ¤æ–­å˜é‡æ˜¯å¦é€ƒé€¸,åˆ°è¿™å„¿äº†æˆ‘ä»¬å°±å¾ˆå¥½åŠäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ç°è±¡ä¸€å’Œç°è±¡äºŒçš„ä»£ç è¿›è¡Œé€ƒé€¸åˆ†æ.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# æ‰§è¡Œå˜é‡é€ƒé€¸åˆ†æå‘½ä»¤: go run -gcflags &#39;-m -l&#39; test.go
# ç°è±¡ä¸€é€ƒé€¸åˆ†æå¦‚ä¸‹ï¼š
./test.go:7:14: ([]byte)(a) escapes to heap
./test.go:8:13: main ... argument does not escape
./test.go:8:13: bs escapes to heap
./test.go:8:21: len(bs) escapes to heap
./test.go:8:30: cap(bs) escapes to heap
[97 98 99] 3 8
# ç°è±¡äºŒé€ƒé€¸åˆ†æå¦‚ä¸‹ï¼š
./test.go:7:14: main ([]byte)(a) does not escape
./test.go:8:13: main ... argument does not escape
./test.go:8:17: len(bs) escapes to heap
./test.go:8:26: cap(bs) escapes to heap
3 32
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ ¹æ®ä¸Šé¢çš„ä¿¡æ¯æˆ‘ä»¬çŸ¥é“åœ¨ç°è±¡ä¸€ä¸­ï¼Œbså˜é‡å‘ç”Ÿäº†é€ƒé€¸ï¼Œç°è±¡äºŒä¸­å˜é‡æœªå‘ç”Ÿé€ƒé€¸ï¼Œä¹Ÿå°±æ˜¯è¯´stringtoslicebyteå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åœ¨å˜é‡æœªå‘ç”Ÿé€ƒé€¸æ—¶å…¶å€¼ä¸ä¸ºnil,å˜é‡å‘ç”Ÿé€ƒé€¸æ—¶å…¶å€¼ä¸ºnilã€‚åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»ææ˜ç™½stringtoslicebyteçš„ç¬¬ä¸€ä¸ªå‚æ•°äº†ï¼Œ é‚£æˆ‘ä»¬ç»§ç»­åˆ†æstringtoslicebyteçš„å†…éƒ¨é€»è¾‘&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨runtime/string.goä¸­çœ‹åˆ°stringtoslicebyteç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;const tmpStringBufSize = 32

type tmpBuf [tmpStringBufSize]byte
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»¼ä¸Š: ç°è±¡äºŒä¸­bså˜é‡æœªå‘ç”Ÿå˜é‡é€ƒé€¸, stringtoslicebyteç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¸ºç©ºä¸”æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º32çš„byteæ•°ç»„, å› æ­¤åœ¨ç°è±¡äºŒä¸­ç”Ÿæˆäº†ä¸€ä¸ªå®¹é‡ä¸º32çš„åˆ‡ç‰‡&lt;/p&gt;
&lt;p&gt;æ ¹æ®å¯¹stringtoslicebyteçš„æºç åˆ†æï¼Œ æˆ‘ä»¬çŸ¥é“ç°è±¡ä¸€è°ƒç”¨äº†&lt;code&gt;rawbyteslice&lt;/code&gt;å‡½æ•°&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;func rawbyteslice(size int) (b []byte) {
	cap := roundupsize(uintptr(size))
	p := mallocgc(cap, nil, false)
	if cap != uintptr(size) {
		memclrNoHeapPointers(add(p, uintptr(size)), cap-uintptr(size))
	}

	*(*slice)(unsafe.Pointer(&amp;amp;b)) = slice{p, size, int(cap)}
	return
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç”±ä¸Šé¢çš„ä»£ç çŸ¥é“ï¼Œ åˆ‡ç‰‡çš„å®¹é‡é€šè¿‡runtime/msize.goä¸­çš„&lt;code&gt;roundupsize&lt;/code&gt;å‡½æ•°è®¡ç®—å¾—å‡º, å…¶ä¸­_MaxSmallSizeå’Œclass_to_sizeå‡å®šä¹‰åœ¨runtime/sizeclasses.go&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;func roundupsize(size uintptr) uintptr {
	if size &amp;lt; _MaxSmallSize {
		if size &amp;lt;= smallSizeMax-8 {
			return uintptr(class_to_size[size_to_class8[(size+smallSizeDiv-1)/smallSizeDiv]])
		} else {
			return uintptr(class_to_size[size_to_class128[(size-smallSizeMax+largeSizeDiv-1)/largeSizeDiv]])
		}
	}
	if size+_PageSize &amp;lt; size {
		return size
	}
	return round(size, _PageSize)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç”±äºå­—ç¬¦ä¸²abcçš„é•¿åº¦å°äº_MaxSmallSize(32768)ï¼Œæ•…åˆ‡ç‰‡çš„é•¿åº¦åªèƒ½å–æ•°ç»„class_to_sizeä¸­çš„å€¼ï¼Œ å³&lt;code&gt;0, 8, 16, 32, 48, 64, 80, 96, 112, 128....&lt;/code&gt;s&lt;/p&gt;
&lt;p&gt;è‡³æ­¤, ç°è±¡ä¸€ä¸­åˆ‡ç‰‡å®¹é‡ä¸ºä»€ä¹ˆä¸º8ä¹ŸçœŸç›¸å¤§ç™½äº†ã€‚ç›¸ä¿¡åˆ°è¿™é‡Œå¾ˆå¤šäººå·²ç»æ˜ç™½ç°è±¡å››å’Œç°è±¡äº”æ˜¯æ€ä¹ˆå›äº‹å„¿äº†, å…¶é€»è¾‘åˆ†åˆ«ä¸ç°è±¡ä¸€å’Œç°è±¡äºŒæ˜¯ä¸€è‡´çš„ï¼Œ æœ‰å…´è¶£çš„ï¼Œ å¯ä»¥åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šé¢è¯•ä¸€è¯•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å­—ç¬¦ä¸²ç›´æ¥è½¬åˆ‡ç‰‡&#34;&gt;å­—ç¬¦ä¸²ç›´æ¥è½¬åˆ‡ç‰‡&lt;/h3&gt;
&lt;p&gt;é‚£ä½ è¯´äº†è¿™ä¹ˆå¤šï¼Œ ç°è±¡ä¸‰è¿˜æ˜¯ä¸èƒ½è§£é‡Šå•Šã€‚è¯·å„ä½çœ‹å®˜è«æ€¥ï¼Œ æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;ç›¸ä¿¡å„ä½ç»†å¿ƒçš„å°ä¼™ä¼´åº”è¯¥æ—©å°±å‘ç°äº†æˆ‘ä»¬åœ¨ä¸Šé¢çš„&lt;code&gt;cmd/compile/internal/gc/walk.go&lt;/code&gt;æºç å›¾ä¸­æŠ˜å äº†éƒ¨åˆ†ä»£ç ï¼Œ ç°åœ¨æˆ‘ä»¬å°±å°†è¿™å—ç¥ç§˜çš„ä»£ç èµ¤è£¸è£¸çš„å±•ç¤ºå‡ºæ¥&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åˆ†æè¿™å—ä»£ç å‘ç°,goç¼–è¯‘å™¨åœ¨å°†&lt;code&gt;å­—ç¬¦ä¸²è½¬å­—èŠ‚åˆ‡ç‰‡&lt;/code&gt;ç”ŸæˆASTæ—¶ï¼Œæ€»å…±åˆ†ä¸ºä¸‰æ­¥ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…ˆåˆ¤æ–­è¯¥å˜é‡æ˜¯å¦æ˜¯å¸¸é‡å­—ç¬¦ä¸²,å¦‚æœæ˜¯å¸¸é‡å­—ç¬¦ä¸²,åˆ™ç›´æ¥é€šè¿‡&lt;code&gt;types.NewArray&lt;/code&gt;åˆ›å»ºä¸€ä¸ªå’Œå­—ç¬¦ä¸²ç­‰é•¿çš„æ•°ç»„&lt;/li&gt;
&lt;li&gt;å¸¸é‡å­—ç¬¦ä¸²ç”Ÿæˆçš„åˆ‡ç‰‡å˜é‡ä¹Ÿè¦è¿›è¡Œé€ƒé€¸åˆ†æï¼Œå¹¶åˆ¤æ–­å…¶å¤§å°æ˜¯å¦å¤§äºå‡½æ•°æ ˆå…è®¸åˆ†é…ç»™å˜é‡çš„æœ€å¤§é•¿åº¦ï¼Œ ä»è€Œåˆ¤æ–­èŠ‚ç‚¹æ˜¯åˆ†é…åœ¨æ ˆä¸Šè¿˜æ˜¯åœ¨å †ä¸Š&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œå¦‚æœå­—ç¬¦ä¸²é•¿åº¦æ˜¯å¤§äº0ï¼Œ å°†å­—ç¬¦ä¸²å†…å®¹å¤åˆ¶åˆ°å­—èŠ‚åˆ‡ç‰‡ä¸­ï¼Œ ç„¶åè¿”å›ã€‚å› æ­¤ç°è±¡ä¸‰ä¸­çš„åˆ‡ç‰‡å®¹é‡æ˜¯3ä¹Ÿå°±å®Œå…¨æ¸…æ¥šäº†&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;å­—ç¬¦ä¸²è½¬å­—èŠ‚åˆ‡ç‰‡æ­¥éª¤å¦‚ä¸‹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åˆ¤æ–­æ˜¯å¦æ˜¯å¸¸é‡ï¼Œ å¦‚æœæ˜¯å¸¸é‡åˆ™è½¬æ¢ä¸ºç­‰å®¹é‡ç­‰é•¿çš„å­—èŠ‚åˆ‡ç‰‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæ˜¯å˜é‡ï¼Œ å…ˆåˆ¤æ–­ç”Ÿæˆçš„åˆ‡ç‰‡æ˜¯å¦å‘ç”Ÿå˜é‡é€ƒé€¸&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœé€ƒé€¸æˆ–è€…å­—ç¬¦ä¸²é•¿åº¦&amp;gt;32ï¼Œ åˆ™æ ¹æ®å­—ç¬¦ä¸²é•¿åº¦å¯ä»¥è®¡ç®—å‡ºä¸åŒçš„å®¹é‡&lt;/li&gt;
&lt;li&gt;å¦‚æœæœªé€ƒé€¸ä¸”å­—ç¬¦ä¸²é•¿åº¦&amp;lt;=32, åˆ™å­—ç¬¦åˆ‡ç‰‡å®¹é‡ä¸º32&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ‰©å±•&#34;&gt;æ‰©å±•&lt;/h2&gt;
&lt;p&gt;å¸¸è§é€ƒé€¸æƒ…å†µ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‡½æ•°è¿”å›å±€éƒ¨æŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;æ ˆç©ºé—´ä¸è¶³é€ƒé€¸&lt;/li&gt;
&lt;li&gt;åŠ¨æ€ç±»å‹é€ƒé€¸, å¾ˆå¤šå‡½æ•°å‚æ•°ä¸ºinterfaceç±»å‹ï¼Œæ¯”å¦‚fmt.Println(a ...interface{})ï¼Œç¼–è¯‘æœŸé—´å¾ˆéš¾ç¡®å®šå…¶å‚æ•°çš„å…·ä½“ç±»å‹, ä¹Ÿä¼šå‘ç”Ÿé€ƒé€¸&lt;/li&gt;
&lt;li&gt;é—­åŒ…å¼•ç”¨å¯¹è±¡é€ƒé€¸&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨: å†™æœ¬æ–‡æ—¶ï¼Œ ç¬”è€…æ‰€ç”¨goç‰ˆæœ¬ä¸º: go1.13.4&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”Ÿå‘½ä¸æ¯ï¼Œ æ¢ç´¢ä¸æ­¢ï¼Œ åç»­å°†æŒç»­æ›´æ–°æœ‰å…³äºgoçš„æŠ€æœ¯æ¢ç´¢&lt;/p&gt;
&lt;/blockquote&gt;
">æˆ‘æ“¦~å­—ç¬¦ä¸²è½¬å­—èŠ‚åˆ‡ç‰‡åï¼Œåˆ‡ç‰‡çš„å®¹é‡ç«Ÿç„¶åƒå¥‡ç™¾æ€ª</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/shi-yong-hugo-da-jian-bo-ke/"" data-c="
          &lt;p&gt;https://www.diguage.com/post/building-blog-with-hugo/&lt;/p&gt;
">ä½¿ç”¨ Hugo æ­å»ºåšå®¢</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/shi-yong-2-ge-goroutine-lun-liu-da-yin-yi-ge-shu-zu/"" data-c="
          &lt;p&gt;ä»Šå¤©é‡åˆ°ç¾¤å‹çš„ä¸€åˆ°é¢è¯•é¢˜ï¼Œæ„Ÿè§‰åœ¨å„ç§åœ°æ–¹çœ‹åˆ°å¾ˆå¤šæ¬¡è¿™ç§ç±»ä¼¼çš„é¢˜ç›®ï¼Œæ¯”å¦‚ä¸¤ä¸ªgoroutineè½®æµæ‰“å°å¥‡å¶æ•°ï¼Œæ‰€ä»¥è®°å½•æ•´ç†ä¸‹æ¥ã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package main

import (
    &amp;quot;fmt&amp;quot;
    &amp;quot;sync&amp;quot;
)

// ä½¿ç”¨2ä¸ªgoroutineè½®æµæ‰“å°ä¸€ä¸ªæ•°ç»„
var wg sync.WaitGroup
var ch = make(chan bool)
var send = make(chan int)

func main() {
    wg.Add(3)
    nums := []int{1, 2, 3, 4, 5, 6, 7, 8, 9}
    l := len(nums)
    go Send(nums, l)      // å‘é€
    go printOdd(l)  // æ‰“å°å¥‡æ•°
    go printEven(l) // æ‰“å°å¶æ•°
    wg.Wait()
}

// å‘é€æ•°ç»„å…ƒç´ 
func Send(nums []int, l int) {
    defer wg.Done()
    for i := 0; i &amp;lt; l; i++ {
        a := nums[i]
        send &amp;lt;- a
    }
}

// æ‰“å°å¥‡æ•°
func printEven(l int) {
    defer wg.Done()
    for i := 0; i &amp;lt; l; i++ {
        ch &amp;lt;- true
        if i&amp;amp;1 == 0 {
            a := &amp;lt;-send
            fmt.Println(&amp;quot;printEven:&amp;quot;, a)
        }
    }
}

// æ‰“å°å¶æ•°
func printOdd(l int) {
    defer wg.Done()
    for i := 0; i &amp;lt; l; i++ {
        &amp;lt;-ch
        if i&amp;amp;1 == 1 {
            a := &amp;lt;-send
            fmt.Println(&amp;quot;printOdd: &amp;quot;, a)
        }
    }
}

&lt;/code&gt;&lt;/pre&gt;
">ä½¿ç”¨2ä¸ªgoroutineè½®æµæ‰“å°ä¸€ä¸ªæ•°ç»„</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/golang-bing-fa-kong-zhi-de-liang-chong-mo-shi/"" data-c="
          &lt;p&gt;Golang ä¸¤ç§å¸¸ç”¨çš„å¹¶å‘æ§åˆ¶ï¼Œä½¿ç”¨ channel å’Œ WaitGroup ä¸¤ç§æ¨¡å¼&lt;/p&gt;
&lt;!-- more --&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package main

import (
	&amp;quot;fmt&amp;quot;
	&amp;quot;sync&amp;quot;
	&amp;quot;time&amp;quot;
)

func main() {
	fmt.Println(&amp;quot;Hello, ä¸–ç•Œ&amp;quot;)
	handle1()
	handle2()
}

func handle1() {
	// é€šè¿‡æ— ç¼“å†²é€šé“æ¥å®ç°å¤š goroutine å¹¶å‘æ§åˆ¶

	// create channel to synchronize
	done := make(chan bool) // æ— ç¼“å†²é€šé“
	defer close(done)

	go func() {
		time.Sleep(1 * time.Second)
		fmt.Println(&amp;quot;one done&amp;quot;)
		done &amp;lt;- true
	}()

	go func() {
		time.Sleep(1 * time.Second)
		fmt.Println(&amp;quot;two done&amp;quot;)
		done &amp;lt;- true
	}()

	// wait until both are done
	for c := 0; c &amp;lt; 2; c++ {
		&amp;lt;-done
	}
	fmt.Println(&amp;quot;handle1 done&amp;quot;)
	// å½“ä¸» goroutine è¿è¡Œåˆ° &amp;lt;-done æ¥å— channel çš„å€¼çš„æ—¶å€™ï¼Œå¦‚æœè¯¥  channel ä¸­æ²¡æœ‰æ•°æ®ï¼Œå°±ä¼šä¸€ç›´é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æœ‰å€¼ã€‚
}

func handle2() {
	// é€šè¿‡syncåŒ…ä¸­çš„WaitGroup å®ç°å¹¶å‘æ§åˆ¶

	var wg sync.WaitGroup

	wg.Add(1)
	go func() {
		time.Sleep(1 * time.Second)
		fmt.Println(&amp;quot;1 done&amp;quot;)
		wg.Done()
	}()

	wg.Add(1)
	go func() {
		time.Sleep(1 * time.Second)
		fmt.Println(&amp;quot;2 done&amp;quot;)
		wg.Done()
	}()
	wg.Wait()
	fmt.Println(&amp;quot;handle2 done&amp;quot;)

	// åœ¨ sync åŒ…ä¸­ï¼Œæä¾›äº† WaitGroup ï¼Œå®ƒä¼šç­‰å¾…å®ƒæ”¶é›†çš„æ‰€æœ‰ goroutine ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œåœ¨ä¸» goroutine ä¸­ Add(delta int) ç´¢è¦ç­‰å¾…goroutine çš„æ•°é‡ã€‚åœ¨æ¯ä¸€ä¸ª goroutine å®Œæˆå Done() è¡¨ç¤ºè¿™ä¸€ä¸ªgoroutine å·²ç»å®Œæˆï¼Œå½“æ‰€æœ‰çš„ goroutine éƒ½å®Œæˆåï¼Œåœ¨ä¸» goroutine ä¸­ WaitGroup è¿”å›ã€‚
}
&lt;/code&gt;&lt;/pre&gt;
">Golang å¹¶å‘æ§åˆ¶çš„ä¸¤ç§æ¨¡å¼</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/golang-bing-fa-mo-xing-bing-fa-xie-cheng-de-you-ya-tui-chu/"" data-c="
          &lt;p&gt;æ–‡ç« æ¥æºï¼š&lt;a href=&#34;https://lessisbetter.site/2018/12/02/golang-exit-goroutine-in-3-ways/&#34;&gt;Golangå¹¶å‘æ¨¡å‹ï¼šå¹¶å‘åç¨‹çš„ä¼˜é›…é€€å‡º&lt;/a&gt;&lt;br&gt;
goroutineä½œä¸ºGolangå¹¶å‘çš„æ ¸å¿ƒï¼Œæˆ‘ä»¬ä¸ä»…è¦å…³æ³¨å®ƒä»¬çš„åˆ›å»ºå’Œç®¡ç†ï¼Œå½“ç„¶è¿˜è¦å…³æ³¨å¦‚ä½•åˆç†çš„é€€å‡ºè¿™äº›åç¨‹ï¼Œä¸ï¼ˆåˆç†ï¼‰é€€å‡ºä¸ç„¶å¯èƒ½ä¼šé€ æˆé˜»å¡ã€panicã€ç¨‹åºè¡Œä¸ºå¼‚å¸¸ã€æ•°æ®ç»“æœä¸æ­£ç¡®ç­‰é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»ï¼Œå¦‚ä½•åˆç†çš„é€€å‡ºgoroutineï¼Œå‡å°‘è½¯ä»¶bugã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;goroutineåœ¨é€€å‡ºæ–¹é¢ï¼Œä¸åƒçº¿ç¨‹å’Œè¿›ç¨‹ï¼Œä¸èƒ½é€šè¿‡æŸç§æ‰‹æ®µ&lt;strong&gt;å¼ºåˆ¶&lt;/strong&gt;å…³é—­å®ƒä»¬ï¼Œåªèƒ½ç­‰å¾…goroutineä¸»åŠ¨é€€å‡ºã€‚ä½†ä¹Ÿæ— éœ€ä¸ºé€€å‡ºã€å…³é—­goroutineè€Œçƒ¦æ¼ï¼Œä¸‹é¢å°±ä»‹ç»3ç§ä¼˜é›…é€€å‡ºgoroutineçš„æ–¹æ³•ï¼Œåªè¦é‡‡ç”¨è¿™ç§æœ€ä½³å®è·µå»è®¾è®¡ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥ç¡®ä¿goroutineé€€å‡ºä¸Šä¸ä¼šæœ‰é—®é¢˜ï¼Œå°½æƒ…äº«ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;1ä½¿ç”¨for-rangeé€€å‡º&#34;&gt;1ï¼šä½¿ç”¨for-rangeé€€å‡º&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;for-range&lt;/code&gt;æ˜¯ä½¿ç”¨é¢‘ç‡å¾ˆé«˜çš„ç»“æ„ï¼Œå¸¸ç”¨å®ƒæ¥éå†æ•°æ®ï¼Œ&lt;strong&gt;&lt;code&gt;range&lt;/code&gt;èƒ½å¤Ÿæ„ŸçŸ¥channelçš„å…³é—­ï¼Œå½“channelè¢«å‘é€æ•°æ®çš„åç¨‹å…³é—­æ—¶ï¼Œrangeå°±ä¼šç»“æŸ&lt;/strong&gt;ï¼Œæ¥ç€é€€å‡ºforå¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒåœ¨å¹¶å‘ä¸­çš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼šå½“åç¨‹åªä»1ä¸ªchannelè¯»å–æ•°æ®ï¼Œç„¶åè¿›è¡Œå¤„ç†ï¼Œå¤„ç†ååç¨‹é€€å‡ºã€‚ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ç¨‹åºï¼Œå½“iné€šé“è¢«å…³é—­æ—¶ï¼Œåç¨‹å¯è‡ªåŠ¨é€€å‡ºã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;go func(in &amp;lt;-chan int) {
    // Using for-range to exit goroutine
    // range has the ability to detect the close/end of a channel
    for x := range in {
        fmt.Printf(&amp;quot;Process %d\n&amp;quot;, x)
    }
}(inCh)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2ä½¿ç”¨oké€€å‡º&#34;&gt;2ï¼šä½¿ç”¨,oké€€å‡º&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;for-select&lt;/code&gt;ä¹Ÿæ˜¯ä½¿ç”¨é¢‘ç‡å¾ˆé«˜çš„ç»“æ„ï¼Œselectæä¾›äº†å¤šè·¯å¤ç”¨çš„èƒ½åŠ›ï¼Œæ‰€ä»¥for-selectå¯ä»¥è®©å‡½æ•°å…·æœ‰æŒç»­å¤šè·¯å¤„ç†å¤šä¸ªchannelçš„èƒ½åŠ›ã€‚&lt;strong&gt;ä½†selectæ²¡æœ‰æ„ŸçŸ¥channelçš„å…³é—­ï¼Œè¿™å¼•å‡ºäº†2ä¸ªé—®é¢˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»§ç»­åœ¨å…³é—­çš„é€šé“ä¸Šè¯»ï¼Œä¼šè¯»åˆ°é€šé“ä¼ è¾“æ•°æ®ç±»å‹çš„é›¶å€¼ï¼Œå¦‚æœæ˜¯æŒ‡é’ˆç±»å‹ï¼Œè¯»åˆ°nilï¼Œç»§ç»­å¤„ç†è¿˜ä¼šäº§ç”Ÿnilã€‚&lt;/li&gt;
&lt;li&gt;ç»§ç»­åœ¨å…³é—­çš„é€šé“ä¸Šå†™ï¼Œå°†ä¼španicã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é—®é¢˜2å¯ä»¥è¿™æ ·è§£å†³ï¼Œé€šé“åªç”±å‘é€æ–¹å…³é—­ï¼Œæ¥æ”¶æ–¹ä¸å¯å…³é—­ï¼Œå³æŸä¸ªå†™é€šé“åªç”±ä½¿ç”¨è¯¥selectçš„åç¨‹å…³é—­ï¼Œselectä¸­å°±ä¸å­˜åœ¨ç»§ç»­åœ¨å…³é—­çš„é€šé“ä¸Šå†™æ•°æ®çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;é—®é¢˜1å¯ä»¥ä½¿ç”¨&lt;code&gt;,ok&lt;/code&gt;æ¥æ£€æµ‹é€šé“çš„å…³é—­ï¼Œä½¿ç”¨æƒ…å†µæœ‰2ç§ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç§ï¼š&lt;strong&gt;å¦‚æœæŸä¸ªé€šé“å…³é—­åï¼Œéœ€è¦é€€å‡ºåç¨‹ï¼Œç›´æ¥returnå³å¯&lt;/strong&gt;ã€‚ç¤ºä¾‹ä»£ç ä¸­ï¼Œè¯¥åç¨‹éœ€è¦ä»iné€šé“è¯»æ•°æ®ï¼Œè¿˜éœ€è¦å®šæ—¶æ‰“å°å·²ç»å¤„ç†çš„æ•°é‡ï¼Œæœ‰2ä»¶äº‹è¦åšï¼Œæ‰€æœ‰ä¸èƒ½ä½¿ç”¨for-rangeï¼Œéœ€è¦ä½¿ç”¨for-selectï¼Œå½“inå…³é—­æ—¶ï¼Œ&lt;code&gt;ok=false&lt;/code&gt;ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;go func() {
	// in for-select using ok to exit goroutine
	for {
		select {
		case x, ok := &amp;lt;-in:
			if !ok {
				return
			}
			fmt.Printf(&amp;quot;Process %d\n&amp;quot;, x)
			processedCnt++
		case &amp;lt;-t.C:
			fmt.Printf(&amp;quot;Working, processedCnt = %d\n&amp;quot;, processedCnt)
		}
	}
}()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¬¬äºŒç§ï¼šå¦‚æœ&lt;strong&gt;æŸä¸ªé€šé“å…³é—­äº†ï¼Œä¸å†å¤„ç†è¯¥é€šé“ï¼Œè€Œæ˜¯ç»§ç»­å¤„ç†å…¶ä»–case&lt;/strong&gt;ï¼Œé€€å‡ºæ˜¯ç­‰å¾…æ‰€æœ‰çš„å¯è¯»é€šé“å…³é—­ã€‚æˆ‘ä»¬éœ€è¦&lt;strong&gt;ä½¿ç”¨selectçš„ä¸€ä¸ªç‰¹å¾ï¼šselectä¸ä¼šåœ¨nilçš„é€šé“ä¸Šè¿›è¡Œç­‰å¾…&lt;/strong&gt;ã€‚è¿™ç§æƒ…å†µï¼ŒæŠŠåªè¯»é€šé“è®¾ç½®ä¸ºnilå³å¯è§£å†³ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;go func() {
	// in for-select using ok to exit goroutine
	for {
		select {
		case x, ok := &amp;lt;-in1:
			if !ok {
				in1 = nil
			}
			// Process
		case y, ok := &amp;lt;-in2:
			if !ok {
				in2 = nil
			}
			// Process
		case &amp;lt;-t.C:
			fmt.Printf(&amp;quot;Working, processedCnt = %d\n&amp;quot;, processedCnt)
		}

		// If both in channel are closed, goroutine exit
		if in1 == nil &amp;amp;&amp;amp; in2 == nil {
			return
		}
	}
}()
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3ä½¿ç”¨é€€å‡ºé€šé“é€€å‡º&#34;&gt;3ï¼šä½¿ç”¨é€€å‡ºé€šé“é€€å‡º&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨&lt;code&gt;,ok&lt;/code&gt;æ¥é€€å‡ºä½¿ç”¨for-selectåç¨‹ï¼Œè§£å†³æ˜¯å½“è¯»å…¥æ•°æ®çš„é€šé“å…³é—­æ—¶ï¼Œæ²¡æ•°æ®è¯»æ—¶ç¨‹åºçš„æ­£å¸¸ç»“æŸ&lt;/strong&gt;ã€‚æƒ³æƒ³ä¸‹é¢è¿™2ç§åœºæ™¯ï¼Œ&lt;code&gt;,ok&lt;/code&gt;è¿˜èƒ½é€‚ç”¨å—ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¥æ”¶çš„åç¨‹è¦é€€å‡ºäº†ï¼Œå¦‚æœå®ƒç›´æ¥é€€å‡ºï¼Œä¸å‘ŠçŸ¥å‘é€åç¨‹ï¼Œå‘é€åç¨‹å°†é˜»å¡ã€‚&lt;/li&gt;
&lt;li&gt;å¯åŠ¨äº†ä¸€ä¸ªå·¥ä½œåç¨‹å¤„ç†æ•°æ®ï¼Œå¦‚ä½•é€šçŸ¥å®ƒé€€å‡ºï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„é€šé“ï¼Œå‘é€é€€å‡ºçš„ä¿¡å·ï¼Œå¯ä»¥è§£å†³è¿™ç±»é—®é¢˜&lt;/strong&gt;ã€‚ä»¥ç¬¬2ä¸ªåœºæ™¯ä¸ºä¾‹ï¼Œåç¨‹å…¥å‚åŒ…å«ä¸€ä¸ªåœæ­¢é€šé“&lt;code&gt;stopCh&lt;/code&gt;ï¼Œå½“&lt;code&gt;stopCh&lt;/code&gt;è¢«å…³é—­ï¼Œ&lt;code&gt;case &amp;lt;-stopCh&lt;/code&gt;ä¼šæ‰§è¡Œï¼Œç›´æ¥è¿”å›å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å½“æˆ‘å¯åŠ¨äº†100ä¸ªworkeræ—¶ï¼Œåªè¦&lt;code&gt;main()&lt;/code&gt;æ‰§è¡Œå…³é—­stopChï¼Œæ¯ä¸€ä¸ªworkeréƒ½ä¼šéƒ½åˆ°ä¿¡å·ï¼Œè¿›è€Œå…³é—­ã€‚å¦‚æœ&lt;code&gt;main()&lt;/code&gt;å‘stopChå‘é€100ä¸ªæ•°æ®ï¼Œè¿™ç§å°±ä½æ•ˆäº†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;func worker(stopCh &amp;lt;-chan struct{}) {
	go func() {
		defer fmt.Println(&amp;quot;worker exit&amp;quot;)
		// Using stop channel explicit exit
		for {
			select {
			case &amp;lt;-stopCh:
				fmt.Println(&amp;quot;Recv stop signal&amp;quot;)
				return
			case &amp;lt;-t.C:
				fmt.Println(&amp;quot;Working .&amp;quot;)
			}
		}
	}()
	return
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æœ€ä½³å®è·µå›é¡¾&#34;&gt;æœ€ä½³å®è·µå›é¡¾&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å‘é€åç¨‹ä¸»åŠ¨å…³é—­é€šé“ï¼Œæ¥æ”¶åç¨‹ä¸å…³é—­é€šé“ã€‚æŠ€å·§ï¼šæŠŠæ¥æ”¶æ–¹çš„é€šé“å…¥å‚å£°æ˜ä¸ºåªè¯»ï¼Œå¦‚æœæ¥æ”¶åç¨‹å…³é—­åªè¯»åç¨‹ï¼Œç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ã€‚&lt;/li&gt;
&lt;li&gt;åç¨‹å¤„ç†1ä¸ªé€šé“ï¼Œå¹¶ä¸”æ˜¯è¯»æ—¶ï¼Œåç¨‹ä¼˜å…ˆä½¿ç”¨&lt;code&gt;for-range&lt;/code&gt;ï¼Œå› ä¸º&lt;code&gt;range&lt;/code&gt;å¯ä»¥å…³é—­é€šé“çš„å…³é—­è‡ªåŠ¨é€€å‡ºåç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;,ok&lt;/code&gt;å¯ä»¥å¤„ç†å¤šä¸ªè¯»é€šé“å…³é—­ï¼Œéœ€è¦å…³é—­å½“å‰ä½¿ç”¨&lt;code&gt;for-select&lt;/code&gt;çš„åç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;æ˜¾å¼å…³é—­é€šé“&lt;code&gt;stopCh&lt;/code&gt;å¯ä»¥å¤„ç†ä¸»åŠ¨é€šçŸ¥åç¨‹é€€å‡ºçš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å®Œæ•´ç¤ºä¾‹ä»£ç &#34;&gt;å®Œæ•´ç¤ºä¾‹ä»£ç &lt;/h3&gt;
&lt;p&gt;æœ¬æ–‡æ‰€æœ‰ä»£ç éƒ½åœ¨ä»“åº“ï¼Œå¯æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹ä»£ç ï¼šhttps://github.com/Shitaibin/golang_goroutine_exit&lt;/p&gt;
&lt;h3 id=&#34;å¹¶å‘ç³»åˆ—æ–‡ç« æ¨è&#34;&gt;å¹¶å‘ç³»åˆ—æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://lessisbetter.site/2018/11/16/golang-introduction-to-pipeline/&#34;&gt;Golangå¹¶å‘æ¨¡å‹ï¼šè½»æ¾å…¥é—¨æµæ°´çº¿æ¨¡å‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://lessisbetter.site/2018/11/28/golang-pipeline-fan-model/&#34;&gt;Golangå¹¶å‘æ¨¡å‹ï¼šè½»æ¾å…¥é—¨æµæ°´çº¿FANæ¨¡å¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://lessisbetter.site/2018/12/02/golang-exit-goroutine-in-3-ways/&#34;&gt;Golangå¹¶å‘æ¨¡å‹ï¼šå¹¶å‘åç¨‹çš„ä¼˜é›…é€€å‡º&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨å…³æ³¨ä¸‹æˆ‘çš„Githubï¼Œæœ‰æ–‡ç« ä¼šæ”¶åˆ°é€šçŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;æœ¬æ–‡ä½œè€…ï¼š&lt;a href=&#34;http://lessisbetter.site/about/&#34;&gt;å¤§å½¬&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœå–œæ¬¢æœ¬æ–‡ï¼Œéšæ„è½¬è½½ï¼Œä½†è¯·ä¿ç•™æ­¤åŸæ–‡é“¾æ¥ï¼šhttp://lessisbetter.site/2018/12/02/golang-exit-goroutine-in-3-ways/&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
">Golangå¹¶å‘æ¨¡å‹ï¼šå¹¶å‘åç¨‹çš„ä¼˜é›…é€€å‡º</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/yong-golang-xie-pa-chong-yi/"" data-c="
          &lt;p&gt;ä½¿ç”¨ Golang å¯¹è±†ç“£çˆ¬è™«&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;åŸæ–‡åœ°å€: &lt;a href=&#34;https://link.zhihu.com/?target=https%3A//strconv.com/posts/web-crawler-exercise-1/&#34;&gt;https://strconv.com/posts/web-crawler-exercise-1/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¹‹å‰ä¸€ç›´éƒ½æ˜¯å†ç”¨Pythonå†™çˆ¬è™«ï¼Œæœ€è¿‘æƒ³ä½“éªŒä¸‹Golangå†™çˆ¬è™«çš„æ„Ÿè§‰ï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ä¸ªç³»åˆ—ã€‚æˆ‘æƒ³è¦æŠ“å–çš„é¡µé¢æ˜¯&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//movie.douban.com/top250&#34;&gt;è±†ç“£Top250é¡µé¢&lt;/a&gt;ï¼Œé€‰æ‹©å®ƒçš„ç†ç”±æœ‰3ä¸ª:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è±†ç“£é¡µé¢ä»£ç ç›¸å¯¹è§„èŒƒ&lt;/li&gt;
&lt;li&gt;è±†ç“£å¯¹çˆ¬è™«çˆ±å¥½è€…ç›¸å¯¹æ›´å®½å®¹&lt;/li&gt;
&lt;li&gt;Top250é¡µé¢ç®€æ´ï¼Œå¾ˆé€‚åˆæ‹¿æ¥ç»ƒæ‰‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ç‰ˆçš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‰é€»è¾‘æˆ‘æŠŠæŠ“å–ä»£ç åˆ†æˆ2ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;HTTPè¯·æ±‚&lt;/li&gt;
&lt;li&gt;è§£æé¡µé¢ä¸­çš„å†…å®¹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆçœ‹HTTPè¯·æ±‚ï¼ŒGolangè¯­è¨€çš„HTTPè¯·æ±‚åº“ä¸éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„åº“ï¼Œæ ‡å‡†åº“å°±å†…ç½®äº†è¶³å¤Ÿå¥½çš„æ”¯æŒï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;import (
    &amp;quot;fmt&amp;quot;
    &amp;quot;net/http&amp;quot;
    &amp;quot;io/ioutil&amp;quot;
)

func fetch (url string) string {
    fmt.Println(&amp;quot;Fetch Url&amp;quot;, url)
    client := &amp;amp;http.Client{}
    req, _ := http.NewRequest(&amp;quot;GET&amp;quot;, url, nil)
    req.Header.Set(&amp;quot;User-Agent&amp;quot;, &amp;quot;Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)&amp;quot;)
    resp, err := client.Do(req)
    if err != nil {
        fmt.Println(&amp;quot;Http get err:&amp;quot;, err)
        return &amp;quot;&amp;quot;
    }
    if resp.StatusCode != 200 {
        fmt.Println(&amp;quot;Http status code:&amp;quot;, resp.StatusCode)
        return &amp;quot;&amp;quot;
    }
    defer resp.Body.Close()
    body, err := ioutil.ReadAll(resp.Body)
    if err != nil {
        fmt.Println(&amp;quot;Read error&amp;quot;, err)
        return &amp;quot;&amp;quot;
    }
    return string(body)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘æŠŠURLè¯·æ±‚çš„é€»è¾‘éƒ½æ”¾åœ¨äº†fetchå‡½æ•°ä¸­ï¼Œé‡Œé¢åšäº†ä¸€äº›å¼‚å¸¸å¤„ç†ã€‚å€¼å¾—è¯´çš„æœ‰2ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨Headerä¸­è®¾ç½®äº†User-Agentï¼Œè®©è®¿é—®çœ‹èµ·æ¥æ›´åƒæœç´¢å¼•æ“Botã€‚å¦‚æœä¸€ä¸ªç½‘ç«™å¸Œæœ›è‡ªå·±çš„å†…å®¹è¢«Googleæ”¶å½•é‚£ä¹ˆä»–å°±ä¸ä¼šæ‹’ç»è¿™æ ·çš„UAçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦é€šè¿‡ioutil.ReadAll è¯»å–respçš„bodyå†…å®¹ï¼Œæœ€åç”¨string(body)æŠŠå®ƒè½¬åŒ–æˆå­—ç¬¦ä¸²&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ¥ç€å°±æ˜¯è§£æé¡µé¢çš„éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;import (
    &amp;quot;regexp&amp;quot;
    &amp;quot;strings&amp;quot;
)

func parseUrls(url string) {
    body := fetch(url)
    body = strings.Replace(body, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)
    rp := regexp.MustCompile(`&amp;lt;div class=&amp;quot;hd&amp;quot;&amp;gt;(.*?)&amp;lt;/div&amp;gt;`)
    titleRe := regexp.MustCompile(`&amp;lt;span class=&amp;quot;title&amp;quot;&amp;gt;(.*?)&amp;lt;/span&amp;gt;`)
    idRe := regexp.MustCompile(`&amp;lt;a href=&amp;quot;https://movie.douban.com/subject/(\d+)/&amp;quot;`)
    items := rp.FindAllStringSubmatch(body, -1)
    for _, item := range items {
        fmt.Println(idRe.FindStringSubmatch(item[1])[1],
            titleRe.FindStringSubmatch(item[1])[1])
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« æˆ‘ä»¬ä¸»è¦ä½“éªŒç”¨æ ‡å‡†åº“å®Œæˆé¡µé¢çš„è§£æï¼Œä¹Ÿå°±æ˜¯ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ…regexpæ¥å®Œæˆã€‚ä¸è¿‡è¦æ³¨æ„éœ€è¦ç”¨&lt;code&gt;strings.Replace(body, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)&lt;/code&gt;è¿™æ­¥æŠŠbodyå†…å®¹ä¸­çš„å›è½¦ç¬¦å»æ‰ï¼Œè¦ä¸ç„¶ä¸‹é¢çš„æ­£åˆ™è¡¨è¾¾å¼&lt;code&gt;.*&lt;/code&gt;å°±ä¸ç¬¦åˆäº†ã€‚&lt;code&gt;FindAllStringSubmatch&lt;/code&gt;æ–¹æ³•ä¼šæŠŠç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœéƒ½è§£æå‡ºæ¥ï¼ˆä¸€ä¸ªåˆ—è¡¨ï¼‰ï¼Œè€Œ&lt;code&gt;FindStringSubmatch&lt;/code&gt;æ˜¯æ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;Top250é¡µé¢æ˜¯è¦ç¿»é¡µçš„ï¼Œæœ€ååœ¨mainå‡½æ•°é‡Œé¢å®ç°æŠ“å–å…¨éƒ¨Top250é¡µé¢ã€‚å¦å¤–ä¸ºäº†å’Œä¹‹åçš„æ”¹è¿›åšå¯¹æ¯”ï¼Œæˆ‘ä»¬åŠ ä¸Šä»£ç è¿è¡Œè€—æ—¶çš„é€»è¾‘ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;import (
       &amp;quot;time&amp;quot;
       &amp;quot;strconv&amp;quot;
)
func main() {
        start := time.Now()
        for i := 0; i &amp;lt; 10; i++ {
                parseUrls(&amp;quot;https://movie.douban.com/top250?start=&amp;quot; + strconv.Itoa(25 * i))
        }
        elapsed := time.Since(start)
        fmt.Printf(&amp;quot;Took %s&amp;quot;, elapsed)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨Golangä¸­æŠŠæ•°å­—è½¬æˆå­—ç¬¦ä¸²éœ€è¦ä½¿ç”¨&lt;code&gt;strconv.Itoa&lt;/code&gt;ï¼ˆå˜¿å˜¿ï¼Œæœ¬åšå®¢åŸŸåå°±æ˜¯è¿™ä¸ªæ¨¡å—ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®startçš„å‚æ•°çš„ä¸é€šæ‹¼å‡ºæ­£ç¡®çš„é¡µé¢è·¯å¾„ã€‚ç”¨ä¸€ä¸ªforå¾ªç¯å®Œæˆç¿»é¡µã€‚&lt;/p&gt;
&lt;p&gt;è¿è¡Œèµ·æ¥éå¸¸å¿«ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;â¯ go run crawler/doubanCrawler1.go
... # çœç•¥è¾“å‡º
Took 1.454627547s
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ç»ˆç«¯è¾“å‡ºå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ‹¿åˆ°äº†å¯¹åº”ç”µå½±æ¡ç›®çš„IDå’Œç”µå½±æ ‡é¢˜ï¼&lt;/p&gt;
&lt;h3 id=&#34;ä»£ç åœ°å€&#34;&gt;ä»£ç åœ°å€&lt;/h3&gt;
&lt;p&gt;å®Œæ•´ä»£ç å¯ä»¥åœ¨&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//github.com/golang-dev/strconv.code/blob/master/crawler/doubanCrawler1.go&#34;&gt;è¿™ä¸ªåœ°å€&lt;/a&gt;æ‰¾åˆ°ã€‚&lt;/p&gt;
">ç”¨Golangå†™çˆ¬è™«(ä¸€)</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/zai-go-zhong-qia-dao-hao-chu-de-nei-cun-dui-qi/"" data-c="
          &lt;p&gt;åœ¨Golangä¸­å¯¹ç»“æ„ä½“æˆå‘˜è¿›è¡Œå†…å­˜å¯¹é½ï¼Œä»¥æ­¤ä¿è¯å†…å­˜çš„è®¿é—®è¾¹ç•Œï¼Œå¹¶å¯ä»¥ä¼˜åŒ–å†…å­˜å ç”¨&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;åŸæ–‡åœ°å€ï¼š&lt;a href=&#34;https://eddycjy.com/posts/go/talk/2018-12-26-go-memory-align/&#34;&gt;åœ¨ Go ä¸­æ°åˆ°å¥½å¤„çš„å†…å­˜å¯¹é½&lt;/a&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://s2.ax1x.com/2020/02/27/3wuT0A.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;é—®é¢˜&#34;&gt;é—®é¢˜&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type Part1 struct {
	a bool
	b int32
	c int8
	d int64
	e byte
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨å¼€å§‹ä¹‹å‰ï¼Œå¸Œæœ›ä½ è®¡ç®—ä¸€ä¸‹ &lt;code&gt;Part1&lt;/code&gt; å…±å ç”¨çš„å¤§å°æ˜¯å¤šå°‘å‘¢ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func main() {
	fmt.Printf(&amp;quot;bool size: %d\n&amp;quot;, unsafe.Sizeof(bool(true)))
	fmt.Printf(&amp;quot;int32 size: %d\n&amp;quot;, unsafe.Sizeof(int32(0)))
	fmt.Printf(&amp;quot;int8 size: %d\n&amp;quot;, unsafe.Sizeof(int8(0)))
	fmt.Printf(&amp;quot;int64 size: %d\n&amp;quot;, unsafe.Sizeof(int64(0)))
	fmt.Printf(&amp;quot;byte size: %d\n&amp;quot;, unsafe.Sizeof(byte(0)))
	fmt.Printf(&amp;quot;string size: %d\n&amp;quot;, unsafe.Sizeof(&amp;quot;EDDYCJY&amp;quot;))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bool size: 1
int32 size: 4
int8 size: 1
int64 size: 8
byte size: 1
string size: 16
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¹ˆä¸€ç®—ï¼Œ&lt;code&gt;Part1&lt;/code&gt; è¿™ä¸€ä¸ªç»“æ„ä½“çš„å ç”¨å†…å­˜å¤§å°ä¸º 1+4+1+8+1 = 15 ä¸ªå­—èŠ‚ã€‚ç›¸ä¿¡æœ‰çš„å°ä¼™ä¼´æ˜¯è¿™ä¹ˆç®—çš„ï¼Œçœ‹ä¸Šå»ä¹Ÿæ²¡ä»€ä¹ˆæ¯›ç—…&lt;/p&gt;
&lt;p&gt;çœŸå®æƒ…å†µæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿæˆ‘ä»¬å®é™…è°ƒç”¨çœ‹çœ‹ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type Part1 struct {
	a bool
	b int32
	c int8
	d int64
	e byte
}

func main() {
	part1 := Part1{}

	fmt.Printf(&amp;quot;part1 size: %d, align: %d\n&amp;quot;, unsafe.Sizeof(part1), unsafe.Alignof(part1))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;part1 size: 32, align: 8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æœ€ç»ˆè¾“å‡ºä¸ºå ç”¨ 32 ä¸ªå­—èŠ‚ã€‚è¿™ä¸å‰é¢æ‰€é¢„æœŸçš„ç»“æœå®Œå…¨ä¸ä¸€æ ·ã€‚è¿™å……åˆ†åœ°è¯´æ˜äº†å…ˆå‰çš„è®¡ç®—æ–¹å¼æ˜¯é”™è¯¯çš„ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨è¿™é‡Œè¦æåˆ° â€œå†…å­˜å¯¹é½â€ è¿™ä¸€æ¦‚å¿µï¼Œæ‰èƒ½å¤Ÿç”¨æ­£ç¡®çš„å§¿åŠ¿å»è®¡ç®—ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†çš„è®²è®²å®ƒæ˜¯ä»€ä¹ˆ&lt;/p&gt;
&lt;h2 id=&#34;å†…å­˜å¯¹é½&#34;&gt;å†…å­˜å¯¹é½&lt;/h2&gt;
&lt;p&gt;æœ‰çš„å°ä¼™ä¼´å¯èƒ½ä¼šè®¤ä¸ºå†…å­˜è¯»å–ï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„å­—èŠ‚æ•°ç»„æ‘†æ”¾&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://s2.ax1x.com/2020/02/27/3wuLff.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šå›¾è¡¨ç¤ºä¸€ä¸ªå‘ä¸€ä¸ªèåœçš„å†…å­˜è¯»å–æ–¹å¼ã€‚ä½†å®é™…ä¸Š CPU å¹¶ä¸ä¼šä»¥ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚å»è¯»å–å’Œå†™å…¥å†…å­˜ã€‚ç›¸å CPU è¯»å–å†…å­˜æ˜¯&lt;strong&gt;ä¸€å—ä¸€å—è¯»å–&lt;/strong&gt;çš„ï¼Œå—çš„å¤§å°å¯ä»¥ä¸º 2ã€4ã€6ã€8ã€16 å­—èŠ‚ç­‰å¤§å°ã€‚å—å¤§å°æˆ‘ä»¬ç§°å…¶ä¸º&lt;strong&gt;å†…å­˜è®¿é—®ç²’åº¦&lt;/strong&gt;ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://s2.ax1x.com/2020/02/27/3wKSmj.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨æ ·ä¾‹ä¸­ï¼Œå‡è®¾è®¿é—®ç²’åº¦ä¸º 4ã€‚ CPU æ˜¯ä»¥æ¯ 4 ä¸ªå­—èŠ‚å¤§å°çš„è®¿é—®ç²’åº¦å»è¯»å–å’Œå†™å…¥å†…å­˜çš„ã€‚è¿™æ‰æ˜¯æ­£ç¡®çš„å§¿åŠ¿&lt;/p&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆè¦å…³å¿ƒå¯¹é½&#34;&gt;ä¸ºä»€ä¹ˆè¦å…³å¿ƒå¯¹é½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½ æ­£åœ¨ç¼–å†™çš„ä»£ç åœ¨æ€§èƒ½ï¼ˆCPUã€Memoryï¼‰æ–¹é¢æœ‰ä¸€å®šçš„è¦æ±‚&lt;/li&gt;
&lt;li&gt;ä½ æ­£åœ¨å¤„ç†å‘é‡æ–¹é¢çš„æŒ‡ä»¤&lt;/li&gt;
&lt;li&gt;æŸäº›ç¡¬ä»¶å¹³å°ï¼ˆARMï¼‰ä½“ç³»ä¸æ”¯æŒæœªå¯¹é½çš„å†…å­˜è®¿é—®&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦å¤–ä½œä¸ºä¸€ä¸ªå·¥ç¨‹å¸ˆï¼Œä½ ä¹Ÿå¾ˆæœ‰å¿…è¦å­¦ä¹ è¿™å—çŸ¥è¯†ç‚¹å“¦ ğŸ˜ƒ&lt;/p&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆè¦åšå¯¹é½&#34;&gt;ä¸ºä»€ä¹ˆè¦åšå¯¹é½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¹³å°ï¼ˆç§»æ¤æ€§ï¼‰åŸå› ï¼šä¸æ˜¯æ‰€æœ‰çš„ç¡¬ä»¶å¹³å°éƒ½èƒ½å¤Ÿè®¿é—®ä»»æ„åœ°å€ä¸Šçš„ä»»æ„æ•°æ®ã€‚ä¾‹å¦‚ï¼šç‰¹å®šçš„ç¡¬ä»¶å¹³å°åªå…è®¸åœ¨ç‰¹å®šåœ°å€è·å–ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¼‚å¸¸æƒ…å†µ&lt;/li&gt;
&lt;li&gt;æ€§èƒ½åŸå› ï¼šè‹¥è®¿é—®æœªå¯¹é½çš„å†…å­˜ï¼Œå°†ä¼šå¯¼è‡´ CPU è¿›è¡Œä¸¤æ¬¡å†…å­˜è®¿é—®ï¼Œå¹¶ä¸”è¦èŠ±è´¹é¢å¤–çš„æ—¶é’Ÿå‘¨æœŸæ¥å¤„ç†å¯¹é½åŠè¿ç®—ã€‚è€Œæœ¬èº«å°±å¯¹é½çš„å†…å­˜ä»…éœ€è¦ä¸€æ¬¡è®¿é—®å°±å¯ä»¥å®Œæˆè¯»å–åŠ¨ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://s2.ax1x.com/2020/02/27/3wKApT.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ä¸Šå›¾ä¸­ï¼Œå‡è®¾ä» Index 1 å¼€å§‹è¯»å–ï¼Œå°†ä¼šå‡ºç°å¾ˆå´©æºƒçš„é—®é¢˜ã€‚å› ä¸ºå®ƒçš„å†…å­˜è®¿é—®è¾¹ç•Œæ˜¯ä¸å¯¹é½çš„ã€‚å› æ­¤ CPU ä¼šåšä¸€äº›é¢å¤–çš„å¤„ç†å·¥ä½œã€‚å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;CPU &lt;strong&gt;é¦–æ¬¡&lt;/strong&gt;è¯»å–æœªå¯¹é½åœ°å€çš„ç¬¬ä¸€ä¸ªå†…å­˜å—ï¼Œè¯»å– 0-3 å­—èŠ‚ã€‚å¹¶ç§»é™¤ä¸éœ€è¦çš„å­—èŠ‚ 0&lt;/li&gt;
&lt;li&gt;CPU &lt;strong&gt;å†æ¬¡&lt;/strong&gt;è¯»å–æœªå¯¹é½åœ°å€çš„ç¬¬äºŒä¸ªå†…å­˜å—ï¼Œè¯»å– 4-7 å­—èŠ‚ã€‚å¹¶ç§»é™¤ä¸éœ€è¦çš„å­—èŠ‚ 5ã€6ã€7 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;åˆå¹¶ 1-4 å­—èŠ‚çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;åˆå¹¶åæ”¾å…¥å¯„å­˜å™¨&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»ä¸Šè¿°æµç¨‹å¯å¾—å‡ºï¼Œä¸åš â€œå†…å­˜å¯¹é½â€ æ˜¯ä¸€ä»¶æœ‰ç‚¹ â€œéº»çƒ¦â€ çš„äº‹ã€‚å› ä¸ºå®ƒä¼šå¢åŠ è®¸å¤šè€—è´¹æ—¶é—´çš„åŠ¨ä½œ&lt;/p&gt;
&lt;p&gt;è€Œå‡è®¾åšäº†å†…å­˜å¯¹é½ï¼Œä» Index 0 å¼€å§‹è¯»å– 4 ä¸ªå­—èŠ‚ï¼Œåªéœ€è¦è¯»å–ä¸€æ¬¡ï¼Œä¹Ÿä¸éœ€è¦é¢å¤–çš„è¿ç®—ã€‚è¿™æ˜¾ç„¶é«˜æ•ˆå¾ˆå¤šï¼Œæ˜¯æ ‡å‡†çš„&lt;strong&gt;ç©ºé—´æ¢æ—¶é—´&lt;/strong&gt;åšæ³•&lt;/p&gt;
&lt;h3 id=&#34;é»˜è®¤ç³»æ•°&#34;&gt;é»˜è®¤ç³»æ•°&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸åŒå¹³å°ä¸Šçš„ç¼–è¯‘å™¨éƒ½æœ‰è‡ªå·±é»˜è®¤çš„ â€œå¯¹é½ç³»æ•°â€ï¼Œå¯é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤ &lt;code&gt;#pragma pack(n)&lt;/code&gt; è¿›è¡Œå˜æ›´ï¼Œn å°±æ˜¯ä»£æŒ‡ â€œå¯¹é½ç³»æ•°â€ã€‚ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„å¹³å°çš„ç³»æ•°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;32 ä½ï¼š4&lt;/li&gt;
&lt;li&gt;64 ä½ï¼š8&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦å¤–è¦æ³¨æ„ï¼Œä¸åŒç¡¬ä»¶å¹³å°å ç”¨çš„å¤§å°å’Œå¯¹é½å€¼éƒ½å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚å› æ­¤æœ¬æ–‡çš„å€¼ä¸æ˜¯å”¯ä¸€çš„ï¼Œè°ƒè¯•çš„æ—¶å€™éœ€æŒ‰æœ¬æœºçš„å®é™…æƒ…å†µè€ƒè™‘&lt;/p&gt;
&lt;h3 id=&#34;æˆå‘˜å¯¹é½&#34;&gt;æˆå‘˜å¯¹é½&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func main() {
	fmt.Printf(&amp;quot;bool align: %d\n&amp;quot;, unsafe.Alignof(bool(true)))
	fmt.Printf(&amp;quot;int32 align: %d\n&amp;quot;, unsafe.Alignof(int32(0)))
	fmt.Printf(&amp;quot;int8 align: %d\n&amp;quot;, unsafe.Alignof(int8(0)))
	fmt.Printf(&amp;quot;int64 align: %d\n&amp;quot;, unsafe.Alignof(int64(0)))
	fmt.Printf(&amp;quot;byte align: %d\n&amp;quot;, unsafe.Alignof(byte(0)))
	fmt.Printf(&amp;quot;string align: %d\n&amp;quot;, unsafe.Alignof(&amp;quot;EDDYCJY&amp;quot;))
	fmt.Printf(&amp;quot;map align: %d\n&amp;quot;, unsafe.Alignof(map[string]string{}))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bool align: 1
int32 align: 4
int8 align: 1
int64 align: 8
byte align: 1
string align: 8
map align: 8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ Go ä¸­å¯ä»¥è°ƒç”¨ &lt;code&gt;unsafe.Alignof&lt;/code&gt; æ¥è¿”å›ç›¸åº”ç±»å‹çš„å¯¹é½ç³»æ•°ã€‚é€šè¿‡è§‚å¯Ÿè¾“å‡ºç»“æœï¼Œå¯å¾—çŸ¥åŸºæœ¬éƒ½æ˜¯ &lt;code&gt;2^n&lt;/code&gt;ï¼Œæœ€å¤§ä¹Ÿä¸ä¼šè¶…è¿‡ 8ã€‚è¿™æ˜¯å› ä¸ºæˆ‘æ‰‹æï¼ˆ64 ä½ï¼‰ç¼–è¯‘å™¨é»˜è®¤å¯¹é½ç³»æ•°æ˜¯ 8ï¼Œå› æ­¤æœ€å¤§å€¼ä¸ä¼šè¶…è¿‡è¿™ä¸ªæ•°&lt;/p&gt;
&lt;h3 id=&#34;æ•´ä½“å¯¹é½&#34;&gt;æ•´ä½“å¯¹é½&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸Šå°èŠ‚ä¸­ï¼Œæåˆ°äº†ç»“æ„ä½“ä¸­çš„æˆå‘˜å˜é‡è¦åšå­—èŠ‚å¯¹é½ã€‚é‚£ä¹ˆæƒ³å½“ç„¶èº«ä¸ºæœ€ç»ˆç»“æœçš„ç»“æ„ä½“ï¼Œä¹Ÿæ˜¯éœ€è¦åšå­—èŠ‚å¯¹é½çš„&lt;/p&gt;
&lt;h3 id=&#34;å¯¹é½è§„åˆ™&#34;&gt;å¯¹é½è§„åˆ™&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç»“æ„ä½“çš„æˆå‘˜å˜é‡ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡çš„åç§»é‡ä¸º 0ã€‚å¾€åçš„æ¯ä¸ªæˆå‘˜å˜é‡çš„å¯¹é½å€¼å¿…é¡»ä¸º&lt;strong&gt;ç¼–è¯‘å™¨é»˜è®¤å¯¹é½é•¿åº¦&lt;/strong&gt;ï¼ˆ&lt;code&gt;#pragma pack(n)&lt;/code&gt;ï¼‰æˆ–&lt;strong&gt;å½“å‰æˆå‘˜å˜é‡ç±»å‹çš„é•¿åº¦&lt;/strong&gt;ï¼ˆ&lt;code&gt;unsafe.Sizeof&lt;/code&gt;ï¼‰ï¼Œå–&lt;strong&gt;æœ€å°å€¼ä½œä¸ºå½“å‰ç±»å‹çš„å¯¹é½å€¼&lt;/strong&gt;ã€‚å…¶åç§»é‡å¿…é¡»ä¸ºå¯¹é½å€¼çš„æ•´æ•°å€&lt;/li&gt;
&lt;li&gt;ç»“æ„ä½“æœ¬èº«ï¼Œå¯¹é½å€¼å¿…é¡»ä¸º&lt;strong&gt;ç¼–è¯‘å™¨é»˜è®¤å¯¹é½é•¿åº¦&lt;/strong&gt;ï¼ˆ&lt;code&gt;#pragma pack(n)&lt;/code&gt;ï¼‰æˆ–&lt;strong&gt;ç»“æ„ä½“çš„æ‰€æœ‰æˆå‘˜å˜é‡ç±»å‹ä¸­çš„æœ€å¤§é•¿åº¦&lt;/strong&gt;ï¼Œå–&lt;strong&gt;æœ€å¤§æ•°çš„æœ€å°æ•´æ•°å€&lt;/strong&gt;ä½œä¸ºå¯¹é½å€¼&lt;/li&gt;
&lt;li&gt;ç»“åˆä»¥ä¸Šä¸¤ç‚¹ï¼Œå¯å¾—çŸ¥è‹¥&lt;strong&gt;ç¼–è¯‘å™¨é»˜è®¤å¯¹é½é•¿åº¦&lt;/strong&gt;ï¼ˆ&lt;code&gt;#pragma pack(n)&lt;/code&gt;ï¼‰è¶…è¿‡ç»“æ„ä½“å†…æˆå‘˜å˜é‡çš„ç±»å‹æœ€å¤§é•¿åº¦æ—¶ï¼Œé»˜è®¤å¯¹é½é•¿åº¦æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åˆ†ææµç¨‹&#34;&gt;åˆ†ææµç¨‹&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·åˆ†æä¸€ä¸‹ï¼Œâ€œå®ƒâ€ åˆ°åº•ç»å†äº†äº›ä»€ä¹ˆï¼Œå½±å“äº† â€œé¢„æœŸâ€ ç»“æœ&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æˆå‘˜å˜é‡&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;åç§»é‡&lt;/th&gt;
&lt;th&gt;è‡ªèº«å ç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å­—èŠ‚å¯¹é½&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;b&lt;/td&gt;
&lt;td&gt;int32&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;c&lt;/td&gt;
&lt;td&gt;int8&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å­—èŠ‚å¯¹é½&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;td&gt;int64&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;e&lt;/td&gt;
&lt;td&gt;byte&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å­—èŠ‚å¯¹é½&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;25&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ€»å ç”¨å¤§å°&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;32&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;æˆå‘˜å¯¹é½-2&#34;&gt;æˆå‘˜å¯¹é½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªæˆå‘˜ a
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º bool&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;åˆå§‹åœ°å€ï¼Œåç§»é‡ä¸º 0ã€‚å ç”¨äº†ç¬¬ 1 ä½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒä¸ªæˆå‘˜ b
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º int32&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 4 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 4 çš„æ•´æ•°å€ã€‚ç¡®å®šåç§»é‡ä¸º 4ï¼Œå› æ­¤ 2-4 ä½ä¸º Paddingã€‚è€Œå½“å‰æ•°å€¼ä»ç¬¬ 5 ä½å¼€å§‹å¡«å……ï¼Œåˆ°ç¬¬ 8 ä½ã€‚å¦‚ä¸‹ï¼šaxxx|bbbb&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰ä¸ªæˆå‘˜ c
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º int8&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 1 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 8ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½ï¼Œå¡«å…… 1 ä¸ªå­—èŠ‚åˆ°ç¬¬ 9 ä½ã€‚å¦‚ä¸‹ï¼šaxxx|bbbb|câ€¦&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬å››ä¸ªæˆå‘˜ d
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º int64&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 8 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 8 çš„æ•´æ•°å€ã€‚ç¡®å®šåç§»é‡ä¸º 16ï¼Œå› æ­¤ 9-16 ä½ä¸º Paddingã€‚è€Œå½“å‰æ•°å€¼ä»ç¬¬ 17 ä½å¼€å§‹å†™å…¥ï¼Œåˆ°ç¬¬ 24 ä½ã€‚å¦‚ä¸‹ï¼šaxxx|bbbb|cxxx|xxxx|dddd|dddd&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äº”ä¸ªæˆå‘˜ e
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º byte&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 1 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 24ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½ï¼Œå¡«å…… 1 ä¸ªå­—èŠ‚åˆ°ç¬¬ 25 ä½ã€‚å¦‚ä¸‹ï¼šaxxx|bbbb|cxxx|xxxx|dddd|dddd|eâ€¦&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ•´ä½“å¯¹é½-2&#34;&gt;æ•´ä½“å¯¹é½&lt;/h3&gt;
&lt;p&gt;åœ¨æ¯ä¸ªæˆå‘˜å˜é‡è¿›è¡Œå¯¹é½åï¼Œæ ¹æ®è§„åˆ™ 2ï¼Œæ•´ä¸ªç»“æ„ä½“æœ¬èº«ä¹Ÿè¦è¿›è¡Œå­—èŠ‚å¯¹é½ï¼Œå› ä¸ºå¯å‘ç°å®ƒå¯èƒ½å¹¶ä¸æ˜¯ &lt;code&gt;2^n&lt;/code&gt;ï¼Œä¸æ˜¯å¶æ•°å€ã€‚æ˜¾ç„¶ä¸ç¬¦åˆå¯¹é½çš„è§„åˆ™&lt;/p&gt;
&lt;p&gt;æ ¹æ®è§„åˆ™ 2ï¼Œå¯å¾—å‡ºå¯¹é½å€¼ä¸º 8ã€‚ç°åœ¨çš„åç§»é‡ä¸º 25ï¼Œä¸æ˜¯ 8 çš„æ•´å€æ•°ã€‚å› æ­¤ç¡®å®šåç§»é‡ä¸º 32ã€‚å¯¹ç»“æ„ä½“è¿›è¡Œå¯¹é½&lt;/p&gt;
&lt;h3 id=&#34;ç»“æœ&#34;&gt;ç»“æœ&lt;/h3&gt;
&lt;p&gt;Part1 å†…å­˜å¸ƒå±€ï¼šaxxx|bbbb|cxxx|xxxx|dddd|dddd|exxx|xxxx&lt;/p&gt;
&lt;h3 id=&#34;å°ç»“&#34;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;é€šè¿‡æœ¬èŠ‚çš„åˆ†æï¼Œå¯å¾—çŸ¥å…ˆå‰çš„ â€œæ¨ç®—â€ ä¸ºä»€ä¹ˆé”™è¯¯ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ˜¯å› ä¸ºå®é™…å†…å­˜ç®¡ç†å¹¶é â€œä¸€ä¸ªèåœä¸€ä¸ªå‘â€ çš„æ€æƒ³ã€‚è€Œæ˜¯ä¸€å—ä¸€å—ã€‚é€šè¿‡ç©ºé—´æ¢æ—¶é—´ï¼ˆæ•ˆç‡ï¼‰çš„æ€æƒ³æ¥å®Œæˆè¿™å—è¯»å–ã€å†™å…¥ã€‚å¦å¤–ä¹Ÿéœ€è¦å…¼é¡¾ä¸åŒå¹³å°çš„å†…å­˜æ“ä½œæƒ…å†µ&lt;/p&gt;
&lt;h2 id=&#34;å·§å¦™çš„ç»“æ„ä½“&#34;&gt;å·§å¦™çš„ç»“æ„ä½“&lt;/h2&gt;
&lt;p&gt;åœ¨ä¸Šä¸€å°èŠ‚ï¼Œå¯å¾—çŸ¥æ ¹æ®æˆå‘˜å˜é‡çš„ç±»å‹ä¸åŒï¼Œå…¶ç»“æ„ä½“çš„å†…å­˜ä¼šäº§ç”Ÿå¯¹é½ç­‰åŠ¨ä½œã€‚é‚£å‡è®¾å­—æ®µé¡ºåºä¸åŒï¼Œä¼šä¸ä¼šæœ‰ä»€ä¹ˆå˜åŒ–å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥è¯•è¯•å§ ğŸ˜ƒ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type Part1 struct {
	a bool
	b int32
	c int8
	d int64
	e byte
}

type Part2 struct {
	e byte
	c int8
	a bool
	b int32
	d int64
}

func main() {
	part1 := Part1{}
	part2 := Part2{}

	fmt.Printf(&amp;quot;part1 size: %d, align: %d\n&amp;quot;, unsafe.Sizeof(part1), unsafe.Alignof(part1))
	fmt.Printf(&amp;quot;part2 size: %d, align: %d\n&amp;quot;, unsafe.Sizeof(part2), unsafe.Alignof(part2))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;part1 size: 32, align: 8
part2 size: 16, align: 8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ç»“æœå¯ä»¥æƒŠå–œçš„å‘ç°ï¼Œåªæ˜¯ â€œç®€å•â€ å¯¹æˆå‘˜å˜é‡çš„å­—æ®µé¡ºåºè¿›è¡Œæ”¹å˜ï¼Œå°±æ”¹å˜äº†ç»“æ„ä½“å ç”¨å¤§å°&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·å‰–æä¸€ä¸‹ &lt;code&gt;Part2&lt;/code&gt;ï¼Œçœ‹çœ‹å®ƒçš„å†…éƒ¨åˆ°åº•å’Œä¸Šä¸€ä½ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ‰å¯¼è‡´äº†è¿™æ ·çš„ç»“æœï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;åˆ†ææµç¨‹-2&#34;&gt;åˆ†ææµç¨‹&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æˆå‘˜å˜é‡&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;åç§»é‡&lt;/th&gt;
&lt;th&gt;è‡ªèº«å ç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;e&lt;/td&gt;
&lt;td&gt;byte&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;c&lt;/td&gt;
&lt;td&gt;int8&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å­—èŠ‚å¯¹é½&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;b&lt;/td&gt;
&lt;td&gt;int32&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;td&gt;int64&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ€»å ç”¨å¤§å°&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;æˆå‘˜å¯¹é½-3&#34;&gt;æˆå‘˜å¯¹é½&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªæˆå‘˜ e
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º byte&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;åˆå§‹åœ°å€ï¼Œåç§»é‡ä¸º 0ã€‚å ç”¨äº†ç¬¬ 1 ä½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒä¸ªæˆå‘˜ c
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º int8&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 1 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 2ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰ä¸ªæˆå‘˜ a
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º bool&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 1 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 3ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬å››ä¸ªæˆå‘˜ b
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º int32&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 4 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 4 çš„æ•´æ•°å€ã€‚ç¡®å®šåç§»é‡ä¸º 4ï¼Œå› æ­¤ç¬¬ 3 ä½ä¸º Paddingã€‚è€Œå½“å‰æ•°å€¼ä»ç¬¬ 4 ä½å¼€å§‹å¡«å……ï¼Œåˆ°ç¬¬ 8 ä½ã€‚å¦‚ä¸‹ï¼šecax|bbbb&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äº”ä¸ªæˆå‘˜ d
&lt;ul&gt;
&lt;li&gt;ç±»å‹ä¸º int64&lt;/li&gt;
&lt;li&gt;å¤§å°/å¯¹é½å€¼ä¸º 8 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 8 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 8ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½ï¼Œä» 9-16 ä½å¡«å…… 8 ä¸ªå­—èŠ‚ã€‚å¦‚ä¸‹ï¼šecax|bbbb|dddd|dddd&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ•´ä½“å¯¹é½-3&#34;&gt;æ•´ä½“å¯¹é½&lt;/h4&gt;
&lt;p&gt;ç¬¦åˆè§„åˆ™ 2ï¼Œä¸éœ€è¦é¢å¤–å¯¹é½&lt;/p&gt;
&lt;h4 id=&#34;ç»“æœ-2&#34;&gt;ç»“æœ&lt;/h4&gt;
&lt;p&gt;Part2 å†…å­˜å¸ƒå±€ï¼šecax|bbbb|dddd|dddd&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é€šè¿‡å¯¹æ¯” &lt;code&gt;Part1&lt;/code&gt; å’Œ &lt;code&gt;Part2&lt;/code&gt; çš„å†…å­˜å¸ƒå±€ï¼Œä½ ä¼šå‘ç°ä¸¤è€…æœ‰å¾ˆå¤§çš„ä¸åŒã€‚å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Part1ï¼šaxxx|bbbb|cxxx|xxxx|dddd|dddd|exxx|xxxx&lt;/li&gt;
&lt;li&gt;Part2ï¼šecax|bbbb|dddd|dddd&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»”ç»†ä¸€çœ‹ï¼Œ&lt;code&gt;Part1&lt;/code&gt; å­˜åœ¨è®¸å¤š Paddingã€‚æ˜¾ç„¶å®ƒå æ®äº†ä¸å°‘ç©ºé—´ï¼Œé‚£ä¹ˆ Padding æ˜¯æ€ä¹ˆå‡ºç°çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œå¯å¾—çŸ¥æ˜¯ç”±äºä¸åŒç±»å‹å¯¼è‡´éœ€è¦è¿›è¡Œå­—èŠ‚å¯¹é½ï¼Œä»¥æ­¤ä¿è¯å†…å­˜çš„è®¿é—®è¾¹ç•Œ&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆä¹Ÿä¸éš¾ç†è§£ï¼Œä¸ºä»€ä¹ˆ&lt;strong&gt;è°ƒæ•´ç»“æ„ä½“å†…æˆå‘˜å˜é‡çš„å­—æ®µé¡ºåº&lt;/strong&gt;å°±èƒ½è¾¾åˆ°ç¼©å°ç»“æ„ä½“å ç”¨å¤§å°çš„ç–‘é—®äº†ï¼Œæ˜¯å› ä¸ºå·§å¦™åœ°å‡å°‘äº† Padding çš„å­˜åœ¨ã€‚è®©å®ƒä»¬æ›´ â€œç´§å‡‘â€ äº†ã€‚è¿™ä¸€ç‚¹å¯¹äºåŠ æ·± Go çš„å†…å­˜å¸ƒå±€å°è±¡å’Œå¤§å¯¹è±¡çš„ä¼˜åŒ–éå¸¸æœ‰å¸®&lt;/p&gt;
&lt;p&gt;å½“ç„¶äº†ï¼Œæ²¡ä»€ä¹ˆç‰¹æ®Šé—®é¢˜ï¼Œä½ å¯ä»¥ä¸å…³æ³¨è¿™ä¸€å—ã€‚ä½†ä½ è¦çŸ¥é“è¿™å—çŸ¥è¯†ç‚¹ ğŸ˜„&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Data_structure_alignment&#34;&gt;Data structure alignment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ibm.com/developerworks/library/pa-dalign/&#34;&gt;Data alignment&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
">åœ¨ Go ä¸­æ°åˆ°å¥½å¤„çš„å†…å­˜å¯¹é½</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/golang-zhong-ling-zhi-de-keng/"" data-c="
          &lt;p&gt;å¯¹äºint, string, boolæ¥è¯´ï¼Œå£°æ˜è¿™ä¸‰ç§åŸºæœ¬ç±»å‹çš„å˜é‡ï¼ŒGoä¼šé»˜è®¤åˆ†é…ä¸€ä¸ªé›¶å€¼ï¼Œé›¶å€¼åˆ†åˆ«ä¸º 0 , &#39;&#39; ,falseï¼Œæ‰€ä»¥åœ¨GORMä¸­é€šè¿‡tagå®šä¹‰å­—æ®µçš„é»˜è®¤å€¼åï¼Œè¿™äº›æœ‰é»˜è®¤å€¼çš„å­—æ®µåœ¨ä½¿ç”¨è¿™äº›é›¶å€¼ä½œä¸ºå‚æ•°æ—¶ï¼ŒGORMä¸ä¼šæŠŠè¿™äº›å­—æ®µçš„å€¼æ’å…¥æ•°æ®åº“ä¸­ï¼Œè¿™ä¸ªå‘ä¸€å®šè¦åˆ‡è®°ã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;é»˜è®¤å€¼&#34;&gt;é»˜è®¤å€¼&lt;/h2&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ tag å®šä¹‰å­—æ®µçš„é»˜è®¤å€¼ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type User struct {
  ID   int64
  Name string `gorm:&amp;quot;default:&#39;å°ç‹å­&#39;&amp;quot;`
  Age  int64
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt; é€šè¿‡tagå®šä¹‰å­—æ®µçš„é»˜è®¤å€¼ï¼Œåœ¨åˆ›å»ºè®°å½•æ—¶å€™ç”Ÿæˆçš„ SQL è¯­å¥ä¼šæ’é™¤æ²¡æœ‰å€¼æˆ–å€¼ä¸º é›¶å€¼ çš„å­—æ®µã€‚ åœ¨å°†è®°å½•æ’å…¥åˆ°æ•°æ®åº“åï¼ŒGormä¼šä»æ•°æ®åº“åŠ è½½é‚£äº›å­—æ®µçš„é»˜è®¤å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;var user = User{Name: &amp;quot;&amp;quot;, Age: 99}
db.Create(&amp;amp;user)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢ä»£ç å®é™…æ‰§è¡Œçš„SQLè¯­å¥æ˜¯&lt;code&gt;INSERT INTO users(&amp;quot;age&amp;quot;) values(&#39;99&#39;);&lt;/code&gt;ï¼Œæ’é™¤äº†é›¶å€¼å­—æ®µ&lt;code&gt;Name&lt;/code&gt;ï¼Œè€Œåœ¨æ•°æ®åº“ä¸­è¿™ä¸€æ¡æ•°æ®ä¼šä½¿ç”¨è®¾ç½®çš„é»˜è®¤å€¼&lt;code&gt;å°ç‹å­&lt;/code&gt;ä½œä¸ºNameå­—æ®µçš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;**æ³¨æ„ï¼š**æ‰€æœ‰å­—æ®µçš„é›¶å€¼, æ¯”å¦‚&lt;code&gt;0&lt;/code&gt;, &lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt;,&lt;code&gt;false&lt;/code&gt;æˆ–è€…å…¶å®ƒ&lt;code&gt;é›¶å€¼&lt;/code&gt;ï¼Œéƒ½ä¸ä¼šä¿å­˜åˆ°æ•°æ®åº“å†…ï¼Œä½†ä¼šä½¿ç”¨ä»–ä»¬çš„é»˜è®¤å€¼ã€‚ å¦‚æœä½ æƒ³é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æŒ‡é’ˆæˆ–å®ç° &lt;code&gt;Scanner/Valuer&lt;/code&gt;æ¥å£ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;h3 id=&#34;ä½¿ç”¨æŒ‡é’ˆæ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“&#34;&gt;ä½¿ç”¨æŒ‡é’ˆæ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// ä½¿ç”¨æŒ‡é’ˆ
type User struct {
  ID   int64
  Name *string `gorm:&amp;quot;default:&#39;å°ç‹å­&#39;&amp;quot;`
  Age  int64
}
user := User{Name: new(string), Age: 18))}
db.Create(&amp;amp;user)  // æ­¤æ—¶æ•°æ®åº“ä¸­è¯¥æ¡è®°å½•nameå­—æ®µçš„å€¼å°±æ˜¯&#39;&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ä½¿ç”¨scannervalueræ¥å£æ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“&#34;&gt;ä½¿ç”¨Scanner/Valueræ¥å£æ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// ä½¿ç”¨ Scanner/Valuer
type User struct {
	ID int64
	Name sql.NullString `gorm:&amp;quot;default:&#39;å°ç‹å­&#39;&amp;quot;` // sql.NullString å®ç°äº†Scanner/Valueræ¥å£
	Age  int64
}
user := User{Name: sql.NullString{&amp;quot;&amp;quot;, true}, Age:18}
db.Create(&amp;amp;user)  // æ­¤æ—¶æ•°æ®åº“ä¸­è¯¥æ¡è®°å½•nameå­—æ®µçš„å€¼å°±æ˜¯&#39;&#39;
&lt;/code&gt;&lt;/pre&gt;
">Golang ä¸­é›¶å€¼çš„å‘</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/golang-zhong-range-de-keng/"" data-c="
          &lt;p&gt;é¿å…è¸©å‘æŒ‡åŒ—ï¼ŒGolang ä¸­å®¹æ˜“åœ¨ for range ä¸­è¸©åˆ°çš„å‘&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;ä½¿ç”¨-range-è¿­ä»£éå†æ•°ç»„&#34;&gt;ä½¿ç”¨ range è¿­ä»£éå†æ•°ç»„&lt;/h2&gt;
&lt;p&gt;range ä¼šå¤åˆ¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸æ˜¯ç›´æ¥åœ¨åŸå¯¹è±¡ä¸Šæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ä¸€ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func main() {
    a := [3]int{1, 2, 3}
    for _, v := range a { // å¤åˆ¶ä¸€ä»½aéå†[1, 2, 3]
        v += 100 // væ˜¯å¤åˆ¶å¯¹è±¡ä¸­çš„å€¼ï¼Œä¸ä¼šæ”¹å˜aæ•°ç»„å…ƒç´ çš„å€¼
    }
    fmt.Println(a) // 1 2 3
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¤ºä¾‹äºŒï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func main() {
    a := [3]int{1, 2, 3}
    for i, v := range a { // i,vä»aå¤åˆ¶çš„å¯¹è±¡é‡Œæå–å‡º
        if i == 0 {
            a[1], a[2] = 200, 300
            fmt.Println(a) // è¾“å‡º[1 200 300]
        }
        a[i] = v + 100 // væ˜¯å¤åˆ¶å¯¹è±¡é‡Œçš„å…ƒç´ [1, 2, 3]
    }
    fmt.Println(a) // è¾“å‡º[101, 102, 103]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;[1 200 300]
[101 102 103]
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;ä½¿ç”¨-range-è¿­ä»£éå†åˆ‡ç‰‡&#34;&gt;ä½¿ç”¨ range è¿­ä»£éå†åˆ‡ç‰‡&lt;/h2&gt;
&lt;p&gt;rangeè¿­ä»£éå†å¼•ç”¨ç±»å‹æ—¶ï¼Œåº•å±‚çš„æ•°æ®ä¸ä¼šè¢«å¤åˆ¶ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func main() {
    a := []int{1, 2, 3} // æ”¹æˆslice
    for i, v := range a {
        if i == 0 {
            a[1], a[2] = 200, 300
            fmt.Println(a) // [1 200 300]
        }
        a[i] = v + 100
    }
    fmt.Println(a) // è¾“å‡º[101 300 400]
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;[1 200 300]
[101 300 400]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å› ä¸ºåˆ‡ç‰‡çš„å†…éƒ¨ç»“æ„ä¸ºstruct slice{*point, len, cap}ã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®éƒ¨åˆ†æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘åœ°å€ï¼Œå¤åˆ¶å¯¹è±¡çš„æ—¶å€™åªæ˜¯æŠŠæŒ‡é’ˆçš„å€¼å¤åˆ¶äº†ï¼Œè€Œä¸æ˜¯é‡æ–°æ‹·è´ä¸€å—æ–°çš„å†…å­˜å†æŠŠå€¼æ”¾è¿›å»ï¼Œæ‰€ä»¥ä¿®æ”¹çš„æ—¶å€™è¿˜æ˜¯ä¿®æ”¹çš„åŸæ¥çš„å€¼ã€‚&lt;/p&gt;
">Golang ä¸­ range çš„å‘</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/go-wei-shi-me-zhe-me-kuai/"" data-c="
          &lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº† Go ç¨‹åºä¸ºäº†å®ç°æé«˜çš„å¹¶å‘æ€§èƒ½ï¼Œå…¶å†…éƒ¨è°ƒåº¦å™¨çš„å®ç°æ¶æ„ï¼ˆG-P-M æ¨¡å‹ï¼‰ï¼Œä»¥åŠä¸ºäº†æœ€å¤§é™åº¦åˆ©ç”¨è®¡ç®—èµ„æºï¼ŒGo è°ƒåº¦å™¨æ˜¯å¦‚ä½•å¤„ç†çº¿ç¨‹é˜»å¡çš„åœºæ™¯&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;è½¬è‡ª&lt;a href=&#34;https://zhuanlan.zhihu.com/p/111346689&#34;&gt;çŸ¥ä¹ï¼šGoä¸ºä»€ä¹ˆè¿™ä¹ˆâ€œå¿«â€&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ€ä¹ˆè®©æˆ‘ä»¬çš„ç³»ç»Ÿæ›´å¿«&#34;&gt;&lt;strong&gt;æ€ä¹ˆè®©æˆ‘ä»¬çš„ç³»ç»Ÿæ›´å¿«&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;éšç€ä¿¡æ¯æŠ€æœ¯çš„è¿…é€Ÿå‘å±•ï¼Œå•å°æœåŠ¡å™¨å¤„ç†èƒ½åŠ›è¶Šæ¥è¶Šå¼ºï¼Œè¿«ä½¿ç¼–ç¨‹æ¨¡å¼ç”±ä»å‰çš„ä¸²è¡Œæ¨¡å¼å‡çº§åˆ°å¹¶å‘æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;å¹¶å‘æ¨¡å‹åŒ…å« IO å¤šè·¯å¤ç”¨ã€å¤šè¿›ç¨‹ä»¥åŠå¤šçº¿ç¨‹ï¼Œè¿™å‡ ç§æ¨¡å‹éƒ½å„æœ‰ä¼˜åŠ£ï¼Œç°ä»£å¤æ‚çš„é«˜å¹¶å‘æ¶æ„å¤§å¤šæ˜¯å‡ ç§æ¨¡å‹ååŒä½¿ç”¨ï¼Œä¸åŒåœºæ™¯åº”ç”¨ä¸åŒæ¨¡å‹ï¼Œæ‰¬é•¿é¿çŸ­ï¼Œå‘æŒ¥æœåŠ¡å™¨çš„æœ€å¤§æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è€Œ&lt;strong&gt;å¤šçº¿ç¨‹ï¼Œå› ä¸ºå…¶è½»é‡å’Œæ˜“ç”¨&lt;/strong&gt;ï¼Œæˆä¸ºå¹¶å‘ç¼–ç¨‹ä¸­ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å¹¶å‘æ¨¡å‹ï¼ŒåŒ…æ‹¬åè¡ç”Ÿçš„åç¨‹ç­‰å…¶ä»–å­äº§å“ï¼Œä¹Ÿéƒ½åŸºäºå®ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¹¶å‘-å¹¶è¡Œ&#34;&gt;&lt;strong&gt;å¹¶å‘ â‰  å¹¶è¡Œ&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘ (concurrency) å’Œ å¹¶è¡Œ ( parallelism) æ˜¯ä¸åŒçš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å•ä¸ª CPU æ ¸ä¸Šï¼Œçº¿ç¨‹é€šè¿‡æ—¶é—´ç‰‡æˆ–è€…è®©å‡ºæ§åˆ¶æƒæ¥å®ç°ä»»åŠ¡åˆ‡æ¢ï¼Œè¾¾åˆ° &amp;quot;åŒæ—¶&amp;quot; è¿è¡Œå¤šä¸ªä»»åŠ¡çš„ç›®çš„ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å¹¶å‘ã€‚ä½†å®é™…ä¸Šä»»ä½•æ—¶åˆ»éƒ½åªæœ‰ä¸€ä¸ªä»»åŠ¡è¢«æ‰§è¡Œï¼Œå…¶ä»–ä»»åŠ¡é€šè¿‡æŸç§ç®—æ³•æ¥æ’é˜Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¤šæ ¸ CPU å¯ä»¥è®©åŒä¸€è¿›ç¨‹å†…çš„ &amp;quot;å¤šä¸ªçº¿ç¨‹&amp;quot; åšåˆ°çœŸæ­£æ„ä¹‰ä¸Šçš„åŒæ—¶è¿è¡Œï¼Œè¿™æ‰æ˜¯å¹¶è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¿›ç¨‹-çº¿ç¨‹-åç¨‹&#34;&gt;&lt;strong&gt;è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;è¿›ç¨‹ï¼šè¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œæœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹ï¼šçº¿ç¨‹æ˜¯ CPU è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹ä¾é™„äºè¿›ç¨‹å­˜åœ¨ï¼Œæ¯ä¸ªçº¿ç¨‹ä¼šå…±äº«çˆ¶è¿›ç¨‹çš„èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;åç¨‹ï¼š**åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œ**åç¨‹çš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ§åˆ¶ï¼Œåç¨‹é—´åˆ‡æ¢åªéœ€è¦ä¿å­˜ä»»åŠ¡çš„ä¸Šä¸‹æ–‡ï¼Œæ²¡æœ‰å†…æ ¸çš„å¼€é”€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢&#34;&gt;&lt;strong&gt;çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;ç”±äºä¸­æ–­å¤„ç†ï¼Œå¤šä»»åŠ¡å¤„ç†ï¼Œç”¨æˆ·æ€åˆ‡æ¢ç­‰åŸå› ä¼šå¯¼è‡´ CPU ä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œåˆ‡æ¢è¿‡ç¨‹éœ€è¦ä¿å­˜å½“å‰è¿›ç¨‹çš„çŠ¶æ€å¹¶æ¢å¤å¦ä¸€ä¸ªè¿›ç¨‹çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ä»£ä»·æ˜¯é«˜æ˜‚çš„&lt;/strong&gt;ï¼Œå› ä¸ºåœ¨æ ¸å¿ƒä¸Šäº¤æ¢çº¿ç¨‹ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å»¶è¿Ÿå–å†³äºä¸åŒçš„å› ç´ ï¼Œå¤§æ¦‚åœ¨åœ¨ 50 åˆ° 100 çº³ç§’ä¹‹é—´ã€‚è€ƒè™‘åˆ°ç¡¬ä»¶å¹³å‡åœ¨æ¯ä¸ªæ ¸å¿ƒä¸Šæ¯çº³ç§’æ‰§è¡Œ 12 æ¡æŒ‡ä»¤ï¼Œé‚£ä¹ˆä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢å¯èƒ½ä¼šèŠ±è´¹ 600 åˆ° 1200 æ¡æŒ‡ä»¤çš„å»¶è¿Ÿæ—¶é—´ã€‚å®é™…ä¸Šï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å ç”¨äº†å¤§é‡ç¨‹åºæ‰§è¡ŒæŒ‡ä»¤çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå­˜åœ¨&lt;strong&gt;è·¨æ ¸ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;ï¼ˆCross-Core Context Switchï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´ CPU ç¼“å­˜å¤±æ•ˆï¼ˆCPU ä»ç¼“å­˜è®¿é—®æ•°æ®çš„æˆæœ¬å¤§çº¦ 3 åˆ° 40 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œä»ä¸»å­˜è®¿é—®æ•°æ®çš„æˆæœ¬å¤§çº¦ 100 åˆ° 300 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼‰ï¼Œè¿™ç§åœºæ™¯çš„åˆ‡æ¢æˆæœ¬ä¼šæ›´åŠ æ˜‚è´µã€‚&lt;/p&gt;
&lt;h2 id=&#34;golang-ä¸ºå¹¶å‘è€Œç”Ÿ&#34;&gt;&lt;strong&gt;Golang ä¸ºå¹¶å‘è€Œç”Ÿ&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Golang ä» 2009 å¹´æ­£å¼å‘å¸ƒä»¥æ¥ï¼Œä¾é å…¶æé«˜è¿è¡Œé€Ÿåº¦å’Œé«˜æ•ˆçš„å¼€å‘æ•ˆç‡ï¼Œè¿…é€Ÿå æ®å¸‚åœºä»½é¢ã€‚Golang ä»è¯­è¨€çº§åˆ«æ”¯æŒå¹¶å‘ï¼Œé€šè¿‡è½»é‡çº§åç¨‹ Goroutine æ¥å®ç°ç¨‹åºå¹¶å‘è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Goroutine éå¸¸è½»é‡&lt;/strong&gt;ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢ä»£ä»·å°ï¼š&lt;/strong&gt; Goroutine ä¸Šä¸‹æ–‡åˆ‡æ¢åªæ¶‰åŠåˆ°ä¸‰ä¸ªå¯„å­˜å™¨ï¼ˆPC / SP / DXï¼‰çš„å€¼ä¿®æ”¹ï¼›è€Œå¯¹æ¯”çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ™éœ€è¦æ¶‰åŠæ¨¡å¼åˆ‡æ¢ï¼ˆä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼‰ã€ä»¥åŠ 16 ä¸ªå¯„å­˜å™¨ã€PCã€SPâ€¦ç­‰å¯„å­˜å™¨çš„åˆ·æ–°ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜å ç”¨å°‘ï¼š&lt;/strong&gt; çº¿ç¨‹æ ˆç©ºé—´é€šå¸¸æ˜¯ 2Mï¼ŒGoroutine æ ˆç©ºé—´æœ€å° 2Kï¼›&lt;/p&gt;
&lt;p&gt;Golang ç¨‹åºä¸­å¯ä»¥è½»æ¾æ”¯æŒ&lt;strong&gt;10w çº§åˆ«&lt;/strong&gt;çš„ Goroutine è¿è¡Œï¼Œè€Œçº¿ç¨‹æ•°é‡è¾¾åˆ° 1k æ—¶ï¼Œå†…å­˜å ç”¨å°±å·²ç»è¾¾åˆ° 2Gã€‚&lt;/p&gt;
&lt;h2 id=&#34;go-è°ƒåº¦å™¨å®ç°æœºåˆ¶&#34;&gt;&lt;strong&gt;Go è°ƒåº¦å™¨å®ç°æœºåˆ¶ï¼š&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Go ç¨‹åºé€šè¿‡è°ƒåº¦å™¨æ¥è°ƒåº¦**Goroutine åœ¨å†…æ ¸çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œ**ä½†æ˜¯ G&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Goroutine&lt;/em&gt;å¹¶ä¸ç›´æ¥ç»‘å®š OS çº¿ç¨‹ M - &lt;em&gt;Machine&lt;/em&gt;è¿è¡Œï¼Œè€Œæ˜¯ç”± Goroutine Scheduler ä¸­çš„ P - &lt;em&gt;Processor&lt;/em&gt; ï¼ˆé€»è¾‘å¤„ç†å™¨ï¼‰æ¥ä½œè·å–å†…æ ¸çº¿ç¨‹èµ„æºçš„ã€ä¸­ä»‹ã€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Go è°ƒåº¦å™¨æ¨¡å‹æˆ‘ä»¬é€šå¸¸å«åš&lt;strong&gt;G-P-M æ¨¡å‹&lt;/strong&gt;ï¼Œä»–åŒ…æ‹¬ 4 ä¸ªé‡è¦ç»“æ„ï¼Œåˆ†åˆ«æ˜¯&lt;strong&gt;Gã€Pã€Mã€Schedï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;**G:Goroutineï¼Œ**æ¯ä¸ª Goroutine å¯¹åº”ä¸€ä¸ª G ç»“æ„ä½“ï¼ŒG å­˜å‚¨ Goroutine çš„è¿è¡Œå †æ ˆã€çŠ¶æ€ä»¥åŠä»»åŠ¡å‡½æ•°ï¼Œå¯é‡ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;G å¹¶éæ‰§è¡Œä½“ï¼Œæ¯ä¸ª G éœ€è¦ç»‘å®šåˆ° P æ‰èƒ½è¢«è°ƒåº¦æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;**P: Processorï¼Œ**è¡¨ç¤ºé€»è¾‘å¤„ç†å™¨ï¼Œå¯¹ G æ¥è¯´ï¼ŒP ç›¸å½“äº CPU æ ¸ï¼ŒG åªæœ‰ç»‘å®šåˆ° P æ‰èƒ½è¢«è°ƒåº¦ã€‚å¯¹ M æ¥è¯´ï¼ŒP æä¾›äº†ç›¸å…³çš„æ‰§è¡Œç¯å¢ƒ(Context)ï¼Œå¦‚å†…å­˜åˆ†é…çŠ¶æ€(mcache)ï¼Œä»»åŠ¡é˜Ÿåˆ—(G)ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;P çš„æ•°é‡å†³å®šäº†ç³»ç»Ÿå†…æœ€å¤§å¯å¹¶è¡Œçš„ G çš„æ•°é‡ï¼ˆå‰æï¼šç‰©ç† CPU æ ¸æ•° &amp;gt;= P çš„æ•°é‡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;P çš„æ•°é‡ç”±ç”¨æˆ·è®¾ç½®çš„ GoMAXPROCS å†³å®šï¼Œä½†æ˜¯ä¸è®º GoMAXPROCS è®¾ç½®ä¸ºå¤šå¤§ï¼ŒP çš„æ•°é‡æœ€å¤§ä¸º 256ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;**M: Machineï¼Œ**OS å†…æ ¸çº¿ç¨‹æŠ½è±¡ï¼Œä»£è¡¨ç€çœŸæ­£æ‰§è¡Œè®¡ç®—çš„èµ„æºï¼Œåœ¨ç»‘å®šæœ‰æ•ˆçš„ P åï¼Œè¿›å…¥ schedule å¾ªç¯ï¼›è€Œ schedule å¾ªç¯çš„æœºåˆ¶å¤§è‡´æ˜¯ä» Global é˜Ÿåˆ—ã€P çš„ Local é˜Ÿåˆ—ä»¥åŠ wait é˜Ÿåˆ—ä¸­è·å–ã€‚&lt;/p&gt;
&lt;p&gt;**M çš„æ•°é‡æ˜¯ä¸å®šçš„ï¼Œç”± Go Runtime è°ƒæ•´ï¼Œ**ä¸ºäº†é˜²æ­¢åˆ›å»ºè¿‡å¤š OS çº¿ç¨‹å¯¼è‡´ç³»ç»Ÿè°ƒåº¦ä¸è¿‡æ¥ï¼Œç›®å‰é»˜è®¤æœ€å¤§é™åˆ¶ä¸º 10000 ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;M å¹¶ä¸ä¿ç•™ G çŠ¶æ€ï¼Œè¿™æ˜¯ G å¯ä»¥è·¨ M è°ƒåº¦çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;**Schedï¼šGo è°ƒåº¦å™¨ï¼Œ**å®ƒç»´æŠ¤æœ‰å­˜å‚¨ M å’Œ G çš„é˜Ÿåˆ—ä»¥åŠè°ƒåº¦å™¨çš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;è°ƒåº¦å™¨å¾ªç¯çš„æœºåˆ¶å¤§è‡´æ˜¯ä»å„ç§é˜Ÿåˆ—ã€P çš„æœ¬åœ°é˜Ÿåˆ—ä¸­è·å– Gï¼Œåˆ‡æ¢åˆ° G çš„æ‰§è¡Œæ ˆä¸Šå¹¶æ‰§è¡Œ G çš„å‡½æ•°ï¼Œè°ƒç”¨ Goexit åšæ¸…ç†å·¥ä½œå¹¶å›åˆ° Mï¼Œå¦‚æ­¤åå¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç†è§£ Mã€Pã€G ä¸‰è€…çš„å…³ç³»ï¼Œå¯ä»¥é€šè¿‡ç»å…¸çš„åœ°é¼ æ¨è½¦æ¬ç –çš„æ¨¡å‹æ¥è¯´æ˜å…¶ä¸‰è€…å…³ç³»ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://pic3.zhimg.com/80/v2-a27259141ff915578ab5165d75432930_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;åœ°é¼ (Gopher)çš„å·¥ä½œä»»åŠ¡æ˜¯ï¼š&lt;strong&gt;å·¥åœ°ä¸Šæœ‰è‹¥å¹²ç –å¤´ï¼Œåœ°é¼ &lt;/strong&gt;å€ŸåŠ©å°è½¦&lt;/strong&gt;æŠŠç –å¤´è¿é€åˆ°ç«ç§ä¸Šå»çƒ§åˆ¶ã€‚&lt;strong&gt;M å°±å¯ä»¥çœ‹ä½œå›¾ä¸­çš„åœ°é¼ ï¼ŒP å°±æ˜¯å°è½¦ï¼ŒG å°±æ˜¯å°è½¦é‡Œè£…çš„ç –ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¼„æ¸…æ¥šäº†å®ƒä»¬ä¸‰è€…çš„å…³ç³»ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¼€å§‹é‡ç‚¹èŠåœ°é¼ æ˜¯å¦‚ä½•åœ¨æ¬è¿ç –å—çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Processorï¼ˆPï¼‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®ç”¨æˆ·è®¾ç½®çš„ **GoMAXPROCS **å€¼æ¥åˆ›å»ºä¸€æ‰¹å°è½¦(P)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Goroutine(G)ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ Go å…³é”®å­—å°±æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ª Goroutineï¼Œä¹Ÿå°±ç›¸å½“äºåˆ¶é€ ä¸€å—ç –(G)ï¼Œç„¶åå°†è¿™å—ç –(G)æ”¾å…¥å½“å‰è¿™è¾†å°è½¦(P)ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Machine (M)ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ°é¼ (M)ä¸èƒ½é€šè¿‡å¤–éƒ¨åˆ›å»ºå‡ºæ¥ï¼Œåªèƒ½ç –(G)å¤ªå¤šäº†ï¼Œåœ°é¼ (M)åˆå¤ªå°‘äº†ï¼Œå®åœ¨å¿™ä¸è¿‡æ¥ï¼Œ&lt;strong&gt;åˆšå¥½è¿˜æœ‰ç©ºé—²çš„å°è½¦(P)æ²¡æœ‰ä½¿ç”¨&lt;/strong&gt;ï¼Œé‚£å°±ä»åˆ«å¤„å†å€Ÿäº›åœ°é¼ (M)è¿‡æ¥ç›´åˆ°æŠŠå°è½¦(P)ç”¨å®Œä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªåœ°é¼ (M)ä¸å¤Ÿç”¨ï¼Œä»åˆ«å¤„å€Ÿåœ°é¼ (M)çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯åˆ›å»ºä¸€ä¸ªå†…æ ¸çº¿ç¨‹(M)ã€‚&lt;/p&gt;
&lt;p&gt;**éœ€è¦æ³¨æ„çš„æ˜¯ï¼š**åœ°é¼ (M) å¦‚æœæ²¡æœ‰å°è½¦(P)æ˜¯æ²¡åŠæ³•è¿ç –çš„ï¼Œ&lt;strong&gt;å°è½¦(P)çš„æ•°é‡å†³å®šäº†èƒ½å¤Ÿå¹²æ´»çš„åœ°é¼ (M)æ•°é‡&lt;/strong&gt;ï¼Œåœ¨ Go ç¨‹åºé‡Œé¢å¯¹åº”çš„æ˜¯æ´»åŠ¨çº¿ç¨‹æ•°ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ Go ç¨‹åºé‡Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å›¾ç¤ºæ¥å±•ç¤º G-P-M æ¨¡å‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://pic2.zhimg.com/80/v2-a39b9615c2a4dc7fc3a5af9ff93da828_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;P ä»£è¡¨å¯ä»¥â€œå¹¶è¡Œâ€è¿è¡Œçš„é€»è¾‘å¤„ç†å™¨ï¼Œæ¯ä¸ª P éƒ½è¢«åˆ†é…åˆ°ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹ Mï¼ŒG ä»£è¡¨ Go åç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Go è°ƒåº¦å™¨ä¸­æœ‰ä¸¤ä¸ªä¸åŒçš„è¿è¡Œé˜Ÿåˆ—ï¼š&lt;strong&gt;å…¨å±€è¿è¡Œé˜Ÿåˆ—(GRQ)å’Œæœ¬åœ°è¿è¡Œé˜Ÿåˆ—(LRQ)ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ª P éƒ½æœ‰ä¸€ä¸ª LRQï¼Œç”¨äºç®¡ç†åˆ†é…ç»™åœ¨ P çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„ Goroutinesï¼Œè¿™äº› Goroutine è½®æµè¢«å’Œ P ç»‘å®šçš„ M è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚GRQ é€‚ç”¨äºå°šæœªåˆ†é…ç»™ P çš„ Goroutinesã€‚&lt;/p&gt;
&lt;p&gt;**ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒG çš„æ•°é‡å¯ä»¥è¿œè¿œå¤§äº M çš„æ•°é‡ï¼Œæ¢å¥è¯è¯´ï¼ŒGo ç¨‹åºå¯ä»¥åˆ©ç”¨å°‘é‡çš„å†…æ ¸çº§çº¿ç¨‹æ¥æ”¯æ’‘å¤§é‡ Goroutine çš„å¹¶å‘ã€‚**å¤šä¸ª Goroutine é€šè¿‡ç”¨æˆ·çº§åˆ«çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ¥å…±äº«å†…æ ¸çº¿ç¨‹ M çš„è®¡ç®—èµ„æºï¼Œä½†å¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´å¹¶æ²¡æœ‰çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢äº§ç”Ÿçš„æ€§èƒ½æŸè€—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºäº†æ›´åŠ å……åˆ†åˆ©ç”¨çº¿ç¨‹çš„è®¡ç®—èµ„æºï¼ŒGo è°ƒåº¦å™¨é‡‡å–äº†ä»¥ä¸‹å‡ ç§è°ƒåº¦ç­–ç•¥ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»»åŠ¡çªƒå–ï¼ˆwork-stealingï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œç°å®æƒ…å†µæœ‰çš„ Goroutine è¿è¡Œçš„å¿«ï¼Œæœ‰çš„æ…¢ï¼Œé‚£ä¹ˆåŠ¿å¿…è‚¯å®šä¼šå¸¦æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œå¿™çš„å¿™æ­»ï¼Œé—²çš„é—²æ­»ï¼ŒGo è‚¯å®šä¸å…è®¸æ‘¸é±¼çš„ P å­˜åœ¨ï¼ŒåŠ¿å¿…è¦å……åˆ†åˆ©ç”¨å¥½è®¡ç®—èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æé«˜ Go å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œè°ƒé«˜æ•´ä½“å¤„ç†æ•ˆç‡ï¼Œå½“æ¯ä¸ª P ä¹‹é—´çš„ G ä»»åŠ¡ä¸å‡è¡¡æ—¶ï¼Œè°ƒåº¦å™¨å…è®¸ä» GRQï¼Œæˆ–è€…å…¶ä»– P çš„ LRQ ä¸­è·å– G æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‡å°‘é˜»å¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ­£åœ¨æ‰§è¡Œçš„ Goroutine é˜»å¡äº†çº¿ç¨‹ M æ€ä¹ˆåŠï¼ŸP ä¸Š LRQ ä¸­çš„ Goroutine ä¼šè·å–ä¸åˆ°è°ƒåº¦ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ Go é‡Œé¢é˜»å¡ä¸»è¦åˆ†ä¸ºä¸€ä¸‹ 4 ç§åœºæ™¯ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯ 1ï¼šç”±äºåŸå­ã€äº’æ–¥é‡æˆ–é€šé“æ“ä½œè°ƒç”¨å¯¼è‡´ Goroutine é˜»å¡&lt;/strong&gt;ï¼Œè°ƒåº¦å™¨å°†æŠŠå½“å‰é˜»å¡çš„ Goroutine åˆ‡æ¢å‡ºå»ï¼Œé‡æ–°è°ƒåº¦ LRQ ä¸Šçš„å…¶ä»– Goroutineï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯ 2ï¼šç”±äºç½‘ç»œè¯·æ±‚å’Œ IO æ“ä½œå¯¼è‡´ Goroutine é˜»å¡&lt;/strong&gt;ï¼Œè¿™ç§é˜»å¡çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ G å’Œ M åˆä¼šæ€ä¹ˆåšå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;Go ç¨‹åºæä¾›äº†**ç½‘ç»œè½®è¯¢å™¨ï¼ˆNetPollerï¼‰**æ¥å¤„ç†ç½‘ç»œè¯·æ±‚å’Œ IO æ“ä½œçš„é—®é¢˜ï¼Œå…¶åå°é€šè¿‡ kqueueï¼ˆMacOSï¼‰ï¼Œepollï¼ˆLinuxï¼‰æˆ– iocpï¼ˆWindowsï¼‰æ¥å®ç° IO å¤šè·¯å¤ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä½¿ç”¨ NetPoller è¿›è¡Œç½‘ç»œç³»ç»Ÿè°ƒç”¨ï¼Œè°ƒåº¦å™¨å¯ä»¥é˜²æ­¢ Goroutine åœ¨è¿›è¡Œè¿™äº›ç³»ç»Ÿè°ƒç”¨æ—¶é˜»å¡ Mã€‚è¿™å¯ä»¥è®© M æ‰§è¡Œ P çš„ LRQ ä¸­å…¶ä»–çš„ Goroutinesï¼Œè€Œä¸éœ€è¦åˆ›å»ºæ–°çš„ Mã€‚æœ‰åŠ©äºå‡å°‘æ“ä½œç³»ç»Ÿä¸Šçš„è°ƒåº¦è´Ÿè½½ã€‚&lt;/p&gt;
&lt;p&gt;**ä¸‹å›¾å±•ç¤ºå®ƒçš„å·¥ä½œåŸç†ï¼š**G1 æ­£åœ¨ M ä¸Šæ‰§è¡Œï¼Œè¿˜æœ‰ 3 ä¸ª Goroutine åœ¨ LRQ ä¸Šç­‰å¾…æ‰§è¡Œã€‚ç½‘ç»œè½®è¯¢å™¨ç©ºé—²ç€ï¼Œä»€ä¹ˆéƒ½æ²¡å¹²ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://pic3.zhimg.com/80/v2-b89070ec76ea9aaf4a3b8107e8f1fe84_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼ŒG1 æƒ³è¦è¿›è¡Œç½‘ç»œç³»ç»Ÿè°ƒç”¨ï¼Œå› æ­¤å®ƒè¢«ç§»åŠ¨åˆ°ç½‘ç»œè½®è¯¢å™¨å¹¶ä¸”å¤„ç†å¼‚æ­¥ç½‘ç»œç³»ç»Ÿè°ƒç”¨ã€‚ç„¶åï¼ŒM å¯ä»¥ä»&lt;br&gt;
LRQ æ‰§è¡Œå¦å¤–çš„ Goroutineã€‚æ­¤æ—¶ï¼ŒG2 å°±è¢«ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ° M ä¸Šäº†ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://pic2.zhimg.com/80/v2-62455d37b17ddfe216aa596338cf5e2a_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;æœ€åï¼Œå¼‚æ­¥ç½‘ç»œç³»ç»Ÿè°ƒç”¨ç”±ç½‘ç»œè½®è¯¢å™¨å®Œæˆï¼ŒG1 è¢«ç§»å›åˆ° P çš„ LRQ ä¸­ã€‚ä¸€æ—¦ G1 å¯ä»¥åœ¨ M ä¸Šè¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå®ƒè´Ÿè´£çš„ Go ç›¸å…³ä»£ç å°±å¯ä»¥å†æ¬¡æ‰§è¡Œã€‚è¿™é‡Œçš„æœ€å¤§ä¼˜åŠ¿æ˜¯ï¼Œæ‰§è¡Œç½‘ç»œç³»ç»Ÿè°ƒç”¨ä¸éœ€è¦é¢å¤–çš„ Mã€‚ç½‘ç»œè½®è¯¢å™¨ä½¿ç”¨ç³»ç»Ÿçº¿ç¨‹ï¼Œå®ƒæ—¶åˆ»å¤„ç†ä¸€ä¸ªæœ‰æ•ˆçš„äº‹ä»¶å¾ªç¯ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://pic3.zhimg.com/80/v2-c9237c70726b41ca722e0b4bf883b553_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ç§è°ƒç”¨æ–¹å¼çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œå€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œ&lt;strong&gt;Go è¯­è¨€å°†è¯¥â€œå¤æ‚æ€§â€éšè—åœ¨ Runtime ä¸­&lt;/strong&gt;ï¼šGo å¼€å‘è€…æ— éœ€å…³æ³¨ socket æ˜¯å¦æ˜¯ non-block çš„ï¼Œä¹Ÿæ— éœ€äº²è‡ªæ³¨å†Œæ–‡ä»¶æè¿°ç¬¦çš„å›è°ƒï¼Œåªéœ€åœ¨æ¯ä¸ªè¿æ¥å¯¹åº”çš„ Goroutine ä¸­ä»¥â€œblock I/Oâ€çš„æ–¹å¼å¯¹å¾… socket å¤„ç†å³å¯ï¼Œ&lt;strong&gt;å®ç°äº† goroutine-per-connection ç®€å•çš„ç½‘ç»œç¼–ç¨‹æ¨¡å¼&lt;/strong&gt;ï¼ˆä½†æ˜¯å¤§é‡çš„ Goroutine ä¹Ÿä¼šå¸¦æ¥é¢å¤–çš„é—®é¢˜ï¼Œæ¯”å¦‚æ ˆå†…å­˜å¢åŠ å’Œè°ƒåº¦å™¨è´Ÿæ‹…åŠ é‡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·å±‚çœ¼ä¸­çœ‹åˆ°çš„ Goroutine ä¸­çš„â€œblock socketâ€ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡ Go runtime ä¸­çš„ netpoller é€šè¿‡ Non-block socket +&lt;br&gt;
I/O å¤šè·¯å¤ç”¨æœºåˆ¶â€œæ¨¡æ‹Ÿâ€å‡ºæ¥çš„ã€‚Go ä¸­çš„ net åº“æ­£æ˜¯æŒ‰ç…§è¿™æ–¹å¼å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;**åœºæ™¯ 3ï¼š**å½“è°ƒç”¨ä¸€äº›ç³»ç»Ÿæ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœç³»ç»Ÿæ–¹æ³•è°ƒç”¨çš„æ—¶å€™å‘ç”Ÿé˜»å¡ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç½‘ç»œè½®è¯¢å™¨ï¼ˆNetPollerï¼‰æ— æ³•ä½¿ç”¨ï¼Œè€Œè¿›è¡Œç³»ç»Ÿè°ƒç”¨çš„ Goroutine å°†é˜»å¡å½“å‰ Mã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ¥çœ‹çœ‹åŒæ­¥ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚æ–‡ä»¶ I/Oï¼‰ä¼šå¯¼è‡´ M é˜»å¡çš„æƒ…å†µï¼šG1 å°†è¿›è¡ŒåŒæ­¥ç³»ç»Ÿè°ƒç”¨ä»¥é˜»å¡ M1ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://picb.zhimg.com/80/v2-bc3e58a8f34c24c0229a4add669a3e52_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;è°ƒåº¦å™¨ä»‹å…¥åï¼šè¯†åˆ«å‡º G1 å·²å¯¼è‡´ M1 é˜»å¡ï¼Œæ­¤æ—¶ï¼Œè°ƒåº¦å™¨å°† M1 ä¸ P åˆ†ç¦»ï¼ŒåŒæ—¶ä¹Ÿå°† G1 å¸¦èµ°ã€‚ç„¶åè°ƒåº¦å™¨å¼•å…¥æ–°çš„ M2 æ¥æœåŠ¡ Pã€‚æ­¤æ—¶ï¼Œå¯ä»¥ä» LRQ ä¸­é€‰æ‹© G2 å¹¶åœ¨ M2 ä¸Šè¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://picb.zhimg.com/80/v2-9875a8b04b3653e0da8e0794dea7035e_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;é˜»å¡çš„ç³»ç»Ÿè°ƒç”¨å®Œæˆåï¼šG1 å¯ä»¥ç§»å› LRQ å¹¶å†æ¬¡ç”± P æ‰§è¡Œã€‚å¦‚æœè¿™ç§æƒ…å†µå†æ¬¡å‘ç”Ÿï¼ŒM1 å°†è¢«æ”¾åœ¨æ—è¾¹ä»¥å¤‡å°†æ¥é‡å¤ä½¿ç”¨**ã€‚**&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://picb.zhimg.com/80/v2-c0398b611bfcbe16309882a9a59c39d7_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;**åœºæ™¯ 4ï¼š**å¦‚æœåœ¨ Goroutine å»æ‰§è¡Œä¸€ä¸ª sleep æ“ä½œï¼Œå¯¼è‡´ M è¢«é˜»å¡äº†ã€‚&lt;/p&gt;
&lt;p&gt;Go ç¨‹åºåå°æœ‰ä¸€ä¸ªç›‘æ§çº¿ç¨‹ sysmonï¼Œå®ƒç›‘æ§é‚£äº›é•¿æ—¶é—´è¿è¡Œçš„ G ä»»åŠ¡ç„¶åè®¾ç½®å¯ä»¥å¼ºå çš„æ ‡è¯†ç¬¦ï¼Œåˆ«çš„ Goroutine å°±å¯ä»¥æŠ¢å…ˆè¿›æ¥æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;åªè¦ä¸‹æ¬¡è¿™ä¸ª Goroutine è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œé‚£ä¹ˆå°±ä¼šè¢«å¼ºå ï¼ŒåŒæ—¶ä¹Ÿä¼šä¿æŠ¤ç°åœºï¼Œç„¶åé‡æ–°æ”¾å…¥ P çš„æœ¬åœ°é˜Ÿåˆ—é‡Œé¢ç­‰å¾…ä¸‹æ¬¡æ‰§è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;å°ç»“&#34;&gt;&lt;strong&gt;å°ç»“&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä» Go è°ƒåº¦å™¨æ¶æ„å±‚é¢ä¸Šä»‹ç»äº† G-P-M æ¨¡å‹ï¼Œé€šè¿‡è¯¥æ¨¡å‹æ€æ ·å®ç°å°‘é‡å†…æ ¸çº¿ç¨‹æ”¯æ’‘å¤§é‡ Goroutine çš„å¹¶å‘è¿è¡Œã€‚ä»¥åŠé€šè¿‡ NetPollerã€sysmon ç­‰å¸®åŠ© Go ç¨‹åºå‡å°‘çº¿ç¨‹é˜»å¡ï¼Œå……åˆ†åˆ©ç”¨å·²æœ‰çš„è®¡ç®—èµ„æºï¼Œä»è€Œæœ€å¤§é™åº¦æé«˜ Go ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒæ–‡æ¡£ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//www.ardanlabs.com/blog/2018/08/scheduling-in-go-part1.html&#34;&gt;https://www.ardanlabs.com/blog/2018/08/scheduling-in-go-part1.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//www.ardanlabs.com/blog/2018/08/scheduling-in-go-part2.html&#34;&gt;https://www.ardanlabs.com/blog/2018/08/scheduling-in-go-part2.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//www.ardanlabs.com/blog/2018/12/scheduling-in-go-part3.html&#34;&gt;https://www.ardanlabs.com/blog/2018/12/scheduling-in-go-part3.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000016038785&#34;&gt;https://segmentfault.com/a/1190000016038785&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000016611742&#34;&gt;https://segmentfault.com/a/1190000016611742&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000017333717&#34;&gt;https://segmentfault.com/a/1190000017333717&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000015352983&#34;&gt;https://segmentfault.com/a/1190000015352983&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000015464889&#34;&gt;https://segmentfault.com/a/1190000015464889&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//www.cnblogs.com/lxmhhy/p/6041001.html&#34;&gt;https://www.cnblogs.com/lxmhhy/p/6041001.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//www.cnblogs.com/mokafamily/p/9975980.html&#34;&gt;https://www.cnblogs.com/mokafamily/p/9975980.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//studyGolang.com/articles/9211&#34;&gt;https://studyGolang.com/articles/9211&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;https://www.zhihu.com/question/20862617&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//codeburst.io/why-Goroutines-are-not-lightweight-threads-7c460c1f155f&#34;&gt;https://codeburst.io/why-Goroutines-are-not-lightweight-threads-7c460c1f155f&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//blog.csdn.net/tiandyoin/article/details/76556702&#34;&gt;https://blog.csdn.net/tiandyoin/article/details/76556702&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//www.jianshu.com/p/cc3c0fefee43&#34;&gt;https://www.jianshu.com/p/cc3c0fefee43&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://link.zhihu.com/?target=https%3A//www.jianshu.com/p/a315224886d2&#34;&gt;https://www.jianshu.com/p/a315224886d2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼š joellwangï¼Œè…¾è®¯ CSIG åå°å¼€å‘å·¥ç¨‹å¸ˆ&lt;/p&gt;
&lt;p&gt;æ›´å¤šç²¾å½©ï¼Œå°½åœ¨ &lt;a href=&#34;https://www.zhihu.com/org/teng-xun-ji-zhu-gong-cheng&#34;&gt;è…¾è®¯æŠ€æœ¯&lt;/a&gt;&lt;/p&gt;
">Go ä¸ºä»€ä¹ˆè¿™ä¹ˆâ€œå¿«â€</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/golang-mian-shi-ti/"" data-c="
          &lt;p&gt;æ€»ç»“çš„ä¸€äº› Golang é¢è¯•ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œæ›´æ–°ä¸­&lt;/p&gt;
&lt;!-- more --&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h2 id=&#34;goçš„goroutineä¸ºä»€ä¹ˆå¿«&#34;&gt;goçš„goroutineä¸ºä»€ä¹ˆå¿«&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Goroutine éå¸¸è½»é‡&lt;/strong&gt;ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢ä»£ä»·å°ï¼š&lt;/strong&gt; Goroutine ä¸Šä¸‹æ–‡åˆ‡æ¢åªæ¶‰åŠåˆ°ä¸‰ä¸ªå¯„å­˜å™¨ï¼ˆPC / SP / DXï¼‰çš„å€¼ä¿®æ”¹ï¼›è€Œå¯¹æ¯”çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ™éœ€è¦æ¶‰åŠæ¨¡å¼åˆ‡æ¢ï¼ˆä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼‰ã€ä»¥åŠ 16 ä¸ªå¯„å­˜å™¨ã€PCã€SPâ€¦ç­‰å¯„å­˜å™¨çš„åˆ·æ–°ï¼›&lt;/p&gt;
&lt;p&gt;**å†…å­˜å ç”¨å°‘ï¼š**çº¿ç¨‹æ ˆç©ºé—´é€šå¸¸æ˜¯ 2Mï¼ŒGoroutine æ ˆç©ºé—´æœ€å° 2Kï¼›&lt;/p&gt;
&lt;p&gt;Golang ç¨‹åºä¸­å¯ä»¥è½»æ¾æ”¯æŒ&lt;strong&gt;10w çº§åˆ«&lt;/strong&gt;çš„ Goroutine è¿è¡Œï¼Œè€Œçº¿ç¨‹æ•°é‡è¾¾åˆ° 1k æ—¶ï¼Œå†…å­˜å ç”¨å°±å·²ç»è¾¾åˆ° 2Gã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ Go ç¨‹åºé‡Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å›¾ç¤ºæ¥å±•ç¤º G-P-M æ¨¡å‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://pic2.zhimg.com/80/v2-a39b9615c2a4dc7fc3a5af9ff93da828_1440w.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;P ä»£è¡¨å¯ä»¥â€œå¹¶è¡Œâ€è¿è¡Œçš„é€»è¾‘å¤„ç†å™¨ï¼Œæ¯ä¸ª P éƒ½è¢«åˆ†é…åˆ°ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹ Mï¼ŒG ä»£è¡¨ Go åç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Go è°ƒåº¦å™¨ä¸­æœ‰ä¸¤ä¸ªä¸åŒçš„è¿è¡Œé˜Ÿåˆ—ï¼š&lt;strong&gt;å…¨å±€è¿è¡Œé˜Ÿåˆ—(GRQ)å’Œæœ¬åœ°è¿è¡Œé˜Ÿåˆ—(LRQ)ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ª P éƒ½æœ‰ä¸€ä¸ª LRQï¼Œç”¨äºç®¡ç†åˆ†é…ç»™åœ¨ P çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„ Goroutinesï¼Œè¿™äº› Goroutine è½®æµè¢«å’Œ P ç»‘å®šçš„ M è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚GRQ é€‚ç”¨äºå°šæœªåˆ†é…ç»™ P çš„ Goroutinesã€‚&lt;/p&gt;
&lt;p&gt;**ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒG çš„æ•°é‡å¯ä»¥è¿œè¿œå¤§äº M çš„æ•°é‡ï¼Œæ¢å¥è¯è¯´ï¼ŒGo ç¨‹åºå¯ä»¥åˆ©ç”¨å°‘é‡çš„å†…æ ¸çº§çº¿ç¨‹æ¥æ”¯æ’‘å¤§é‡ Goroutine çš„å¹¶å‘ã€‚**å¤šä¸ª Goroutine é€šè¿‡ç”¨æˆ·çº§åˆ«çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ¥å…±äº«å†…æ ¸çº¿ç¨‹ M çš„è®¡ç®—èµ„æºï¼Œä½†å¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´å¹¶æ²¡æœ‰çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢äº§ç”Ÿçš„æ€§èƒ½æŸè€—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/111346689&#34;&gt;Go ä¸ºä»€ä¹ˆè¿™ä¹ˆâ€œå¿«â€&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;çº¢é»‘æ ‘çš„ç‰¹ç‚¹&#34;&gt;çº¢é»‘æ ‘çš„ç‰¹ç‚¹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h4 id=&#34;&#34;&gt;&lt;/h4&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;æ¯ä¸ªèŠ‚ç‚¹éçº¢å³é»‘ï¼›&lt;/li&gt;
&lt;li&gt;æ ¹èŠ‚ç‚¹æ€»æ˜¯é»‘è‰²çš„ï¼›&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ç©ºèŠ‚ç‚¹ï¼ˆNILèŠ‚ç‚¹ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„ï¼ˆåä¹‹ä¸ä¸€å®šï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æˆ–ç©ºå­èŠ‚ç‚¹çš„æ¯æ¡è·¯å¾„ï¼Œå¿…é¡»åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ï¼ˆå³ç›¸åŒçš„é»‘è‰²é«˜åº¦ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://user-gold-cdn.xitu.io/2017/12/6/1602b6016e143cf3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h5 id=&#34;çº¢é»‘æ ‘çš„åº”ç”¨&#34;&gt;çº¢é»‘æ ‘çš„åº”ç”¨ï¼š&lt;/h5&gt;
&lt;p&gt;TreeMapã€TreeSetä»¥åŠJAVA8çš„HashMapåº•å±‚éƒ½ç”¨åˆ°äº†çº¢é»‘æ ‘ã€‚&lt;/p&gt;
&lt;h5 id=&#34;çº¢é»‘æ ‘è‡ªå¹³è¡¡è°ƒæ•´æ–¹æ³•&#34;&gt;çº¢é»‘æ ‘è‡ªå¹³è¡¡è°ƒæ•´æ–¹æ³•ï¼š&lt;/h5&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å˜è‰²&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å˜è‰²ä»…ä»…æŒ‡çš„æ˜¯çº¢é»‘æ ‘èŠ‚ç‚¹çš„å˜è‰²ã€‚å› ä¸ºçº¢é»‘æ ‘èŠ‚ç‚¹å¿…é¡»æ˜¯ã€çº¢ã€‘æˆ–è€…ã€é»‘ã€‘è¿™ä¸¤ä¸­é¢œè‰²ï¼Œæ‰€ä»¥å˜è‰²åªæ˜¯å°†å½“å‰çš„èŠ‚ç‚¹é¢œè‰²è¿›è¡Œå˜åŒ–ï¼Œä»¥æ»¡è¶³ç‰¹æ€§ï¼ˆ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼‰ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ—‹è½¬&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å·¦æ—‹æ“ä½œåŠ¨ç”»ï¼ˆæ›´åŠ å®¹æ˜“ç†è§£å’Œè®°å¿†ï¼‰ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://img-blog.csdnimg.cn/20191224152932810.gif&#34; alt=&#34;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;/*************å¯¹çº¢é»‘æ ‘èŠ‚ç‚¹xè¿›è¡Œå·¦æ—‹æ“ä½œ ******************/
/* å·¦æ—‹ç¤ºæ„å›¾ï¼šå¯¹èŠ‚ç‚¹xè¿›è¡Œå·¦æ—‹ 
 *     p                       p 
 *    /                       / 
 *   x                       y 
 *  / \                     / \ 
 * lx  y      -----&amp;gt;       x  ry 
 *    / \                 / \ 
 *   ly ry               lx ly 
 * å·¦æ—‹åšäº†ä¸‰ä»¶äº‹ï¼š 
 * 1. å°†yçš„å·¦å­èŠ‚ç‚¹èµ‹ç»™xçš„å³å­èŠ‚ç‚¹,å¹¶å°†xèµ‹ç»™yå·¦å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹(yå·¦å­èŠ‚ç‚¹éç©ºæ—¶) 
 * 2. å°†xçš„çˆ¶èŠ‚ç‚¹p(éç©ºæ—¶)èµ‹ç»™yçš„çˆ¶èŠ‚ç‚¹ï¼ŒåŒæ—¶æ›´æ–°pçš„å­èŠ‚ç‚¹ä¸ºy(å·¦æˆ–å³) 
 * 3. å°†yçš„å·¦å­èŠ‚ç‚¹è®¾ä¸ºxï¼Œå°†xçš„çˆ¶èŠ‚ç‚¹è®¾ä¸ºy 
 */
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å·¦æ—‹æ“ä½œåŠ¨ç”»&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://img-blog.csdnimg.cn/20191224153029893.gif&#34; alt=&#34;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;/*************å¯¹çº¢é»‘æ ‘èŠ‚ç‚¹yè¿›è¡Œå³æ—‹æ“ä½œ ******************/
/* å³æ—‹ç¤ºæ„å›¾ï¼šå¯¹èŠ‚ç‚¹yè¿›è¡Œå³æ—‹
 *        p                   p
 *       /                   /
 *      y                   x
 *     / \                 / \
 *    x  ry   -----&amp;gt;      lx  y
 *   / \                     / \
 * lx  rx                   rx ry
 * å³æ—‹åšäº†ä¸‰ä»¶äº‹ï¼š
 * 1. å°†xçš„å³å­èŠ‚ç‚¹èµ‹ç»™yçš„å·¦å­èŠ‚ç‚¹,å¹¶å°†yèµ‹ç»™xå³å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹(xå³å­èŠ‚ç‚¹éç©ºæ—¶)
 * 2. å°†yçš„çˆ¶èŠ‚ç‚¹p(éç©ºæ—¶)èµ‹ç»™xçš„çˆ¶èŠ‚ç‚¹ï¼ŒåŒæ—¶æ›´æ–°pçš„å­èŠ‚ç‚¹ä¸ºx(å·¦æˆ–å³)
 * 3. å°†xçš„å³å­èŠ‚ç‚¹è®¾ä¸ºyï¼Œå°†yçš„çˆ¶èŠ‚ç‚¹è®¾ä¸ºx
 */
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;h4 id=&#34;å»¶ä¼¸ä¸ºä»€ä¹ˆç€è‰²æˆçº¢è‰²è€Œä¸æ˜¯é»‘è‰²å‘¢ä¸ºä»€ä¹ˆå‘¢&#34;&gt;å»¶ä¼¸ï¼šä¸ºä»€ä¹ˆç€è‰²æˆçº¢è‰²ï¼Œè€Œä¸æ˜¯é»‘è‰²å‘¢ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/h4&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h5 id=&#34;çº¢é»‘æ ‘èŠ‚ç‚¹çš„æ·»åŠ &#34;&gt;çº¢é»‘æ ‘èŠ‚ç‚¹çš„æ·»åŠ &lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;çº¢é»‘æ ‘çš„ç¬¬ 5 æ¡ç‰¹å¾è§„å®šï¼Œä»»ä¸€èŠ‚ç‚¹åˆ°å®ƒå­æ ‘çš„æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„ä¸­éƒ½åŒ…å«åŒæ ·æ•°é‡çš„é»‘èŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬å¾€çº¢é»‘æ ‘ä¸­æ’å…¥ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹æ—¶ï¼Œä¼šè¿èƒŒè¿™æ¡ç‰¹å¾ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶ç¬¬ 4 æ¡ç‰¹å¾è§„å®šçº¢è‰²èŠ‚ç‚¹çš„å·¦å³å­©å­ä¸€å®šéƒ½æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œ&lt;strong&gt;æœ‰å¯èƒ½&lt;/strong&gt;å½“æˆ‘ä»¬ç»™ä¸€ä¸ªçº¢è‰²èŠ‚ç‚¹ä¸‹æ’å…¥ä¸€ä¸ªçº¢è‰²èŠ‚ç‚¹æ—¶ï¼Œä¼šè¿èƒŒè¿™æ¡ç‰¹å¾ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨æ’å…¥é»‘è‰²èŠ‚ç‚¹åè¿›è¡Œç»“æ„è°ƒæ•´ï¼Œä¿è¯çº¢é»‘æ ‘å§‹ç»ˆæ»¡è¶³è¿™ 5 æ¡ç‰¹å¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h5 id=&#34;çº¢é»‘æ ‘æ’å…¥åèŠ‚ç‚¹çš„è°ƒæ•´æ€æƒ³&#34;&gt;çº¢é»‘æ ‘æ’å…¥åèŠ‚ç‚¹çš„è°ƒæ•´æ€æƒ³&lt;/h5&gt;
&lt;p&gt;æˆ‘ä»¬æ’å…¥é»‘è‰²èŠ‚ç‚¹çš„æ—¶å€™æ‹…å¿ƒè¿èƒŒç¬¬5æ¡ï¼Œæ’å…¥çº¢è‰²èŠ‚ç‚¹æ—¶æ‹…å¿ƒè¿èƒŒç¬¬4æ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å°†æ’å…¥çš„èŠ‚ç‚¹&lt;strong&gt;æ”¹ä¸ºçº¢è‰²&lt;/strong&gt;ï¼Œç„¶ååˆ¤æ–­æ’å…¥çš„èŠ‚ç‚¹çš„çˆ¶äº²æ˜¯ä¸æ˜¯çº¢è‰²ï¼Œæ˜¯çš„è¯è¿›è¡Œä¿®æ”¹è°ƒæ•´ï¼ˆå˜è‰²ã€å·¦æ—‹ã€å³æ—‹ï¼‰ã€‚åŒæ—¶åœ¨è°ƒæ•´çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦éµå®ˆ&lt;code&gt;5æ¡ç‰¹æ€§&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¦ç”¨çº¢é»‘æ ‘ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´çº¢é»‘æ ‘å°±æ˜¯ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘çš„ç¼ºé™·ï¼Œå› ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘åœ¨æŸäº›æƒ…å†µä¸‹ä¼šé€€åŒ–æˆä¸€ä¸ªçº¿æ€§ç»“æ„ã€‚è¯¦ç»†äº†è§£å¯ä»¥æŸ¥çœ‹ &lt;a href=&#34;https://juejin.im/post/5a27c6946fb9a04509096248&#34;&gt;æ¼«ç”»ï¼šä»€ä¹ˆæ˜¯çº¢é»‘æ ‘ï¼Ÿ&lt;/a&gt;ï¼ˆä¹Ÿä»‹ç»åˆ°äº†äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œéå¸¸æ¨èï¼‰&lt;/p&gt;
&lt;p&gt;æ¨èæ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://juejin.im/post/5a27c6946fb9a04509096248&#34;&gt;æ¼«ç”»ï¼šä»€ä¹ˆæ˜¯çº¢é»‘æ ‘ï¼Ÿ&lt;/a&gt;ï¼ˆä¹Ÿä»‹ç»åˆ°äº†äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œéå¸¸æ¨èï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dandanlove.com/2018/03/18/red-black-tree/&#34;&gt;å¯»æ‰¾çº¢é»‘æ ‘çš„æ“ä½œæ‰‹å†Œ&lt;/a&gt;ï¼ˆæ–‡ç« æ’ç‰ˆä»¥åŠæ€è·¯çœŸçš„ä¸é”™ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/24367771&#34;&gt;çº¢é»‘æ ‘æ·±å…¥å‰–æåŠJavaå®ç°&lt;/a&gt;ï¼ˆç¾å›¢ç‚¹è¯„æŠ€æœ¯å›¢é˜Ÿï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;äºŒå‰æ ‘çš„ç‰¹ç‚¹&#34;&gt;äºŒå‰æ ‘çš„ç‰¹ç‚¹&lt;/h2&gt;
&lt;p&gt;åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ¯ä¸ªéæ ¹èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å‰æ ‘èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ª&lt;/li&gt;
&lt;li&gt;äºŒå‰æ ‘æœ‰å·¦å³ä¹‹åˆ†&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://baike.baidu.com/item/%E4%BA%8C%E5%8F%89%E6%A0%91&#34;&gt;äºŒå‰æ ‘&lt;/a&gt;ï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰&lt;/p&gt;
&lt;p&gt;(1)&lt;a href=&#34;https://baike.baidu.com/item/%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91&#34;&gt;å®Œå…¨äºŒå‰æ ‘&lt;/a&gt;â€”â€”è‹¥è®¾äºŒå‰æ ‘çš„é«˜åº¦ä¸ºhï¼Œé™¤ç¬¬ h å±‚å¤–ï¼Œå…¶å®ƒå„å±‚ (1ï½h-1) çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬hå±‚æœ‰å¶å­ç»“ç‚¹ï¼Œå¹¶ä¸”å¶å­ç»“ç‚¹éƒ½æ˜¯ä»å·¦åˆ°å³ä¾æ¬¡æ’å¸ƒï¼Œè¿™å°±æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œä¸éœ€è¦å¡«æ»¡äºŒå‰æ ‘ï¼Œæ¯”å¦‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/frMsQia9rIXMyK0XoJlebciaYSDzrnHZib0w1jouSiaF0uibq7XZbKg6SOyKcNXJOgq9hOB1NegL0rttWEvXcSFxELA/640?wx_fmt=png&amp;amp;tp=webp&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;(2)&lt;a href=&#34;https://baike.baidu.com/item/%E6%BB%A1%E4%BA%8C%E5%8F%89%E6%A0%91&#34;&gt;æ»¡äºŒå‰æ ‘&lt;/a&gt;â€”â€”é™¤äº†å¶ç»“ç‚¹å¤–ï¼Œæ¯ä¸€ä¸ªç»“ç‚¹éƒ½æœ‰å·¦å³å­å¶ï¼Œä¸”å¶å­ç»“ç‚¹éƒ½å¤„åœ¨æœ€åº•å±‚çš„äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/frMsQia9rIXNbNiaBaYCDOdWLXFNLmPSWf9CibibBs6u2GPyUib0or10qwUZQD0V6IicJlhnPhEYopDLLuAuJ1IutZww/640?wx_fmt=png&amp;amp;tp=webp&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;(3)&lt;a href=&#34;https://baike.baidu.com/item/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91/10421057&#34;&gt;å¹³è¡¡äºŒå‰æ ‘&lt;/a&gt;â€”â€”å¹³è¡¡äºŒå‰æ ‘åˆè¢«ç§°ä¸ºAVLæ ‘ï¼ˆåŒºåˆ«äºAVLç®—æ³•ï¼‰ï¼Œå®ƒæ˜¯ä¸€æ£µäºŒå‰æ’åºæ ‘ï¼Œä¸”å…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼šå®ƒæ˜¯ä¸€æ£µç©ºæ ‘ï¼Œæˆ–å®ƒçš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œå¹¶ä¸”å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;h5 id=&#34;äºŒå‰æŸ¥æ‰¾æ ‘bstå…·å¤‡ä»€ä¹ˆç‰¹æ€§å‘¢&#34;&gt;äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBSTï¼‰å…·å¤‡ä»€ä¹ˆç‰¹æ€§å‘¢ï¼Ÿ&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¦&lt;/strong&gt;å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡&lt;strong&gt;å°äºæˆ–ç­‰äº&lt;/strong&gt;å®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å³&lt;/strong&gt;å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡&lt;strong&gt;å¤§äºæˆ–ç­‰äº&lt;/strong&gt;å®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼ºé™·ï¼šæœ‰å¯èƒ½ä¼šå˜æˆçº¿æ€§&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾ä¸­è¿™æ£µæ ‘ï¼Œå°±æ˜¯ä¸€é¢—å…¸å‹çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://user-gold-cdn.xitu.io/2017/12/6/1602b600eb27d6ef?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h5 id=&#34;å †&#34;&gt;å †&lt;/h5&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/qq_33186366/article/details/51876191&#34;&gt;æ•°æ®ç»“æ„ä¹‹å †çš„å®šä¹‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å †æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„å®Œå…¨äºŒå‰æ ‘ï¼šæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå¤§é¡¶å †ï¼›æˆ–è€…æ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå°é¡¶å †ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;å¦‚ä½•å¿«é€Ÿå»ºç«‹ä¸€ä¸ªå¹³è¡¡äºŒå‰æ ‘&#34;&gt;å¦‚ä½•å¿«é€Ÿå»ºç«‹ä¸€ä¸ªå¹³è¡¡äºŒå‰æ ‘&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://baike.baidu.com/item/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91&#34;&gt;å¹³è¡¡äºŒå‰æ ‘&lt;/a&gt;ï¼ˆç™¾åº¦ç™¾ç§‘ï¼Œå¹³è¡¡äºŒå‰æ ‘çš„å¸¸ç”¨å®ç°æ–¹æ³•æœ‰çº¢é»‘æ ‘ã€AVLã€æ›¿ç½ªç¾Šæ ‘ã€Treapã€ä¼¸å±•æ ‘ç­‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»»æ„èŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®éƒ½å°äºç­‰äº1ã€‚&lt;/li&gt;
&lt;li&gt;æ‰¾æœ€ä½å¤±è¡¡èŠ‚ç‚¹ï¼Œé‚£å°±æ˜¯æ‰¾ä»æœ€åº•å±‚ï¼ˆå¶å­èŠ‚ç‚¹å±‚ï¼‰å¾€æœ€é«˜å±‚ï¼ˆrootå±‚ï¼‰ä¸­æœ€å…ˆå‡ºç°å·¦å³å­æ ‘é«˜åº¦å·®å¤§äº1çš„èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;æ‰¾æ›¿ä»£èŠ‚ç‚¹å°±æ˜¯æ‰¾æå€¼ç‚¹ï¼Œå¦‚æœæ˜¯å·¦å­æ ‘å¤±è¡¡ï¼Œé‚£å°±æ‰¾å·¦å­æ ‘ä¸­çš„æœ€å¤§å€¼ï¼Œå› ä¸ºå½“å·¦å­æ ‘å¤±è¡¡æ—¶å°±è¡¨ç¤ºæˆ‘ä»¬ä¸éœ€è¦å¤„ç†å³å­æ ‘ï¼Œæ‰€ä»¥æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å¤§å€¼ï¼Œä¹‹åæŠŠå³å­æ ‘èµ‹ç»™è¯¥èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;åŒç†ï¼Œå¦‚æœæ˜¯å³å­æ ‘å¤±è¡¡é‚£å°±æ‰¾å³å­æ ‘ä¸­çš„æœ€å°å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;å¹³è¡¡äºŒå‰æ ‘çš„ç‰¹ç‚¹&#34;&gt;å¹³è¡¡äºŒå‰æ ‘çš„ç‰¹ç‚¹&lt;/h2&gt;
&lt;p&gt;ä»»æ„èŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®éƒ½å°äºç­‰äº1ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;æ ‘çš„å±‚åºéå†&#34;&gt;æ ‘çš„å±‚åºéå†&lt;/h2&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;åˆ¤æ–­æ ‘æ˜¯å¦å·¦å³å¯¹ç§°æˆ–æ•°ç»„æ˜¯å¦å·¦å³å¯¹ç§°&#34;&gt;åˆ¤æ–­æ ‘æ˜¯å¦å·¦å³å¯¹ç§°æˆ–æ•°ç»„æ˜¯å¦å·¦å³å¯¹ç§°&lt;/h2&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;linuxå¸¸ç”¨å‘½ä»¤&#34;&gt;Linuxå¸¸ç”¨å‘½ä»¤&lt;/h2&gt;
&lt;h5 id=&#34;ç›®å½•åˆ‡æ¢å‘½ä»¤&#34;&gt;ç›®å½•åˆ‡æ¢å‘½ä»¤&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;cd usr&lt;/code&gt;ï¼š&lt;/strong&gt; åˆ‡æ¢åˆ°è¯¥ç›®å½•ä¸‹usrç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;cd ..ï¼ˆæˆ–cd../ï¼‰&lt;/code&gt;ï¼š&lt;/strong&gt; åˆ‡æ¢åˆ°ä¸Šä¸€å±‚ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;cd /&lt;/code&gt;ï¼š&lt;/strong&gt; åˆ‡æ¢åˆ°ç³»ç»Ÿæ ¹ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;cd ~&lt;/code&gt;ï¼š&lt;/strong&gt; åˆ‡æ¢åˆ°ç”¨æˆ·ä¸»ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;cd -&lt;/code&gt;ï¼š&lt;/strong&gt; åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ“ä½œæ‰€åœ¨ç›®å½•&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;ç›®å½•çš„æ“ä½œå‘½ä»¤å¢åˆ æ”¹æŸ¥&#34;&gt;ç›®å½•çš„æ“ä½œå‘½ä»¤(å¢åˆ æ”¹æŸ¥)&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;mkdir ç›®å½•åç§°&lt;/code&gt;ï¼š&lt;/strong&gt; å¢åŠ ç›®å½•&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;lsæˆ–è€…ll&lt;/code&gt;&lt;/strong&gt;ï¼ˆllæ˜¯ls -lçš„åˆ«åï¼Œllå‘½ä»¤å¯ä»¥çœ‹åˆ°è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼‰ï¼šæŸ¥çœ‹ç›®å½•ä¿¡æ¯&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;find ç›®å½• å‚æ•°&lt;/code&gt;ï¼š&lt;/strong&gt; å¯»æ‰¾ç›®å½•ï¼ˆæŸ¥ï¼‰&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ—å‡ºå½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹: &lt;code&gt;find .&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åœ¨&lt;code&gt;/home&lt;/code&gt;ç›®å½•ä¸‹æŸ¥æ‰¾ä»¥.txtç»“å°¾çš„æ–‡ä»¶å:&lt;code&gt;find /home -name &amp;quot;*.txt&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŒä¸Šï¼Œä½†å¿½ç•¥å¤§å°å†™: &lt;code&gt;find /home -iname &amp;quot;*.txt&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰ä»¥.txtå’Œ.pdfç»“å°¾çš„æ–‡ä»¶:&lt;code&gt;find . \( -name &amp;quot;*.txt&amp;quot; -o -name &amp;quot;*.pdf&amp;quot; \)&lt;/code&gt;æˆ–&lt;code&gt;find . -name &amp;quot;*.txt&amp;quot; -o -name &amp;quot;*.pdf&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;mv ç›®å½•åç§° æ–°ç›®å½•åç§°&lt;/code&gt;ï¼š&lt;/strong&gt; ä¿®æ”¹ç›®å½•çš„åç§°ï¼ˆæ”¹ï¼‰&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šmvçš„è¯­æ³•ä¸ä»…å¯ä»¥å¯¹ç›®å½•è¿›è¡Œé‡å‘½åè€Œä¸”ä¹Ÿå¯ä»¥å¯¹å„ç§æ–‡ä»¶ï¼Œå‹ç¼©åŒ…ç­‰è¿›è¡Œ é‡å‘½åçš„æ“ä½œã€‚mvå‘½ä»¤ç”¨æ¥å¯¹æ–‡ä»¶æˆ–ç›®å½•é‡æ–°å‘½åï¼Œæˆ–è€…å°†æ–‡ä»¶ä»ä¸€ä¸ªç›®å½•ç§»åˆ°å¦ä¸€ä¸ªç›®å½•ä¸­ã€‚åé¢ä¼šä»‹ç»åˆ°mvå‘½ä»¤çš„å¦ä¸€ä¸ªç”¨æ³•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;mv ç›®å½•åç§° ç›®å½•çš„æ–°ä½ç½®&lt;/code&gt;ï¼š&lt;/strong&gt; ç§»åŠ¨ç›®å½•çš„ä½ç½®---å‰ªåˆ‡ï¼ˆæ”¹ï¼‰&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šmvè¯­æ³•ä¸ä»…å¯ä»¥å¯¹ç›®å½•è¿›è¡Œå‰ªåˆ‡æ“ä½œï¼Œå¯¹æ–‡ä»¶å’Œå‹ç¼©åŒ…ç­‰éƒ½å¯æ‰§è¡Œå‰ªåˆ‡æ“ä½œã€‚å¦å¤–mvä¸cpçš„ç»“æœä¸åŒï¼Œmvå¥½åƒæ–‡ä»¶â€œæ¬å®¶â€ï¼Œæ–‡ä»¶ä¸ªæ•°å¹¶æœªå¢åŠ ã€‚è€Œcpå¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ï¼Œæ–‡ä»¶ä¸ªæ•°å¢åŠ äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;cp -r ç›®å½•åç§° ç›®å½•æ‹·è´çš„ç›®æ ‡ä½ç½®&lt;/code&gt;ï¼š&lt;/strong&gt; æ‹·è´ç›®å½•ï¼ˆæ”¹ï¼‰ï¼Œ-rä»£è¡¨é€’å½’æ‹·è´&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šcpå‘½ä»¤ä¸ä»…å¯ä»¥æ‹·è´ç›®å½•è¿˜å¯ä»¥æ‹·è´æ–‡ä»¶ï¼Œå‹ç¼©åŒ…ç­‰ï¼Œæ‹·è´æ–‡ä»¶å’Œå‹ç¼©åŒ…æ—¶ä¸ ç”¨å†™-ré€’å½’&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;rm [-rf] ç›®å½•&lt;/code&gt;:&lt;/strong&gt; åˆ é™¤ç›®å½•ï¼ˆåˆ ï¼‰&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šrmä¸ä»…å¯ä»¥åˆ é™¤ç›®å½•ï¼Œä¹Ÿå¯ä»¥åˆ é™¤å…¶ä»–æ–‡ä»¶æˆ–å‹ç¼©åŒ…ï¼Œä¸ºäº†å¢å¼ºå¤§å®¶çš„è®°å¿†ï¼Œ æ— è®ºåˆ é™¤ä»»ä½•ç›®å½•æˆ–æ–‡ä»¶ï¼Œéƒ½ç›´æ¥ä½¿ç”¨&lt;code&gt;rm -rf&lt;/code&gt; ç›®å½•/æ–‡ä»¶/å‹ç¼©åŒ…&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;httpçŠ¶æ€ç &#34;&gt;httpçŠ¶æ€ç &lt;/h2&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼ŒHyperText Transfer Protocol)æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ã€‚æ‰€æœ‰çš„ WWWï¼ˆä¸‡ç»´ç½‘ï¼‰ æ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚è®¾è®¡ HTTP æœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶ HTML é¡µé¢çš„æ–¹æ³•ã€‚ï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019/7/%E7%8A%B6%E6%80%81%E7%A0%81.png&#34; alt=&#34;çŠ¶æ€ç &#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;å¸¸è§çš„çŠ¶æ€ç æœ‰200,301,302,304,404,500,403ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;200&lt;/strong&gt;ï¼šæœ€å¸¸è§ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å“åº”æˆåŠŸï¼ŒæœåŠ¡å™¨æ‰¾åˆ°äº†å®¢æˆ·ç«¯è¯·æ±‚çš„å†…å®¹ï¼Œå¹¶å°†å†…å®¹å‘é€ç»™äº†å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;500&lt;/strong&gt;ï¼šæ¯”è¾ƒå¸¸è§ï¼Œè¡¨ç¤ºç¨‹åºé”™è¯¯ï¼Œå°±æ˜¯è¯´è¯·æ±‚çš„ç½‘é¡µç¨‹åºæœ¬èº«å°±æŠ¥é”™äº†ã€‚ç°åœ¨çš„æµè§ˆå™¨ä¼šå¯¹çŠ¶æ€ç 500åšå‡ºä¸€å®šçš„å¤„ç†ï¼Œæ‰€ä»¥åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ä¼šè¿”å›ä¸€ä¸ªå®šåˆ¶çš„é”™è¯¯é¡µé¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;502&lt;/strong&gt;ï¼šä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆå“åº”ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;504&lt;/strong&gt;ï¼šä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œæœªèƒ½åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆURIæ ‡è¯†å‡ºçš„æœåŠ¡å™¨ï¼Œä¾‹å¦‚HTTPã€FTPã€LDAPï¼‰æˆ–è€…è¾…åŠ©æœåŠ¡å™¨ï¼ˆä¾‹å¦‚DNSï¼‰æ”¶åˆ°å“åº”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;400&lt;/strong&gt;ï¼šä¸ºåŒ…å«è¯­æ³•é”™è¯¯ï¼Œæ— æ³•è¢«æœåŠ¡å™¨è§£æ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;403&lt;/strong&gt;ï¼šä¸ºæœåŠ¡å™¨å·²ç»æ¥æ”¶è¯·æ±‚ï¼Œä½†æ˜¯è¢«æ‹’ç»æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;404&lt;/strong&gt;ï¼šæœåŠ¡å™¨ä¸Šæ²¡æœ‰è¯¥èµ„æºï¼Œæˆ–è€…è¯´æ˜¯æœåŠ¡å™¨ä¸Šæ²¡æœ‰æ‰¾åˆ°å®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºï¼Œæ˜¯æœ€å¸¸è§çš„è¯·æ±‚é”™è¯¯ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;301&lt;/strong&gt;ï¼šä¸´æ—¶è·³è½¬ã€‚urlåœ°å€aå¯ä»¥å‘urlåœ°å€bä¸Šè·³è½¬ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæœ‰å¯èƒ½è¿‡çŸ­æ—¶é—´å°±ä»urlåœ°å€aè·³è½¬åˆ°åœ°å€cã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;302&lt;/strong&gt;ï¼šæ°¸ä¹…æ€§çš„é‡å®šå‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;304&lt;/strong&gt;ï¼šè¢«è¯·æ±‚çš„èµ„æºå†…å®¹æ²¡æœ‰å‘ç”Ÿæ›´æ”¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;11&#34;&gt;
&lt;li&gt;
&lt;h2 id=&#34;tcp-udpåŒºåˆ«&#34;&gt;tcp udpåŒºåˆ«&lt;/h2&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;è¿è¾“å±‚ä¸»è¦ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§åè®®:&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  1. **ä¼ è¾“æ§åˆ¶åè®® TCP**ï¼ˆTransmission Control Protocolï¼‰--æä¾›**é¢å‘è¿æ¥**çš„ï¼Œ**å¯é çš„**æ•°æ®ä¼ è¾“æœåŠ¡ã€‚
  2. **ç”¨æˆ·æ•°æ®åè®® UDP**ï¼ˆUser Datagram Protocolï¼‰--æä¾›**æ— è¿æ¥**çš„ï¼Œå°½æœ€å¤§åŠªåŠ›çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼ˆ**ä¸ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§**ï¼‰ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-11/tcp-vs-udp.jpg&#34; alt=&#34;TCPã€UDPåè®®çš„åŒºåˆ«&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;UDP åœ¨ä¼ é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å…ˆå»ºç«‹è¿æ¥ï¼Œè¿œåœ°ä¸»æœºåœ¨æ”¶åˆ° UDP æŠ¥æ–‡åï¼Œä¸éœ€è¦ç»™å‡ºä»»ä½•ç¡®è®¤ã€‚è™½ç„¶ UDP ä¸æä¾›å¯é äº¤ä»˜ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ UDP ç¡®æ˜¯ä¸€ç§æœ€æœ‰æ•ˆçš„å·¥ä½œæ–¹å¼ï¼ˆä¸€èˆ¬ç”¨äºå³æ—¶é€šä¿¡ï¼‰ï¼Œæ¯”å¦‚ï¼š QQ è¯­éŸ³ã€ QQ è§†é¢‘ ã€ç›´æ’­ç­‰ç­‰&lt;/p&gt;
&lt;p&gt;TCP æä¾›é¢å‘è¿æ¥çš„æœåŠ¡ã€‚åœ¨ä¼ é€æ•°æ®ä¹‹å‰å¿…é¡»å…ˆå»ºç«‹è¿æ¥ï¼Œæ•°æ®ä¼ é€ç»“æŸåè¦é‡Šæ”¾è¿æ¥ã€‚ TCP ä¸æä¾›å¹¿æ’­æˆ–å¤šæ’­æœåŠ¡ã€‚ç”±äº TCP è¦æä¾›å¯é çš„ï¼Œé¢å‘è¿æ¥çš„ä¼ è¾“æœåŠ¡ï¼ˆTCPçš„å¯é ä½“ç°åœ¨TCPåœ¨ä¼ é€’æ•°æ®ä¹‹å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹è¿æ¥ï¼Œè€Œä¸”åœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ å®Œåï¼Œè¿˜ä¼šæ–­å¼€è¿æ¥ç”¨æ¥èŠ‚çº¦ç³»ç»Ÿèµ„æºï¼‰ï¼Œè¿™ä¸€éš¾ä»¥é¿å…å¢åŠ äº†è®¸å¤šå¼€é”€ï¼Œå¦‚ç¡®è®¤ï¼Œæµé‡æ§åˆ¶ï¼Œè®¡æ—¶å™¨ä»¥åŠè¿æ¥ç®¡ç†ç­‰ã€‚è¿™ä¸ä»…ä½¿åè®®æ•°æ®å•å…ƒçš„é¦–éƒ¨å¢å¤§å¾ˆå¤šï¼Œè¿˜è¦å ç”¨è®¸å¤šå¤„ç†æœºèµ„æºã€‚TCP ä¸€èˆ¬ç”¨äºæ–‡ä»¶ä¼ è¾“ã€å‘é€å’Œæ¥æ”¶é‚®ä»¶ã€è¿œç¨‹ç™»å½•ç­‰åœºæ™¯ã€‚&lt;/p&gt;
&lt;ol start=&#34;11&#34;&gt;
&lt;li&gt;
&lt;h2 id=&#34;ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹&#34;&gt;ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA1MTEwNDA1NjY2?x-oss-process=image/format,png&#34; alt=&#34;ä¸‰æ¬¡æ¡æ‰‹&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯â€“å‘é€å¸¦æœ‰ SYN æ ‡å¿—çš„æ•°æ®åŒ…â€“ä¸€æ¬¡æ¡æ‰‹â€“æœåŠ¡ç«¯&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯â€“å‘é€å¸¦æœ‰ SYN/ACK æ ‡å¿—çš„æ•°æ®åŒ…â€“äºŒæ¬¡æ¡æ‰‹â€“å®¢æˆ·ç«¯&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯â€“å‘é€å¸¦æœ‰å¸¦æœ‰ ACK æ ‡å¿—çš„æ•°æ®åŒ…â€“ä¸‰æ¬¡æ¡æ‰‹â€“æœåŠ¡ç«¯&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹äº† TCP è¿æ¥ä»¥åï¼Œå½“æ•°æ®ä¼ é€å®Œæ¯•ï¼Œæ–­å¼€è¿æ¥å°±éœ€è¦è¿›è¡ŒTCPçš„å››æ¬¡æŒ¥æ‰‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å››æ¬¡æŒ¥æ‰‹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;11&#34;&gt;&lt;img src=&#34;https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA3MjA1NzU2MjU1?x-oss-process=image/format,png&#34; alt=&#34;è¿™é‡Œå†™å›¾ç‰‡æè¿°&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;12&#34;&gt;&lt;img src=&#34;https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA2MDg0ODUxMjcy?x-oss-process=image/format,png&#34; alt=&#34;å››æ¬¡æŒ¥æ‰‹&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h5 id=&#34;æ–­å¼€ä¸€ä¸ª-tcp-è¿æ¥åˆ™éœ€è¦å››æ¬¡æŒ¥æ‰‹&#34;&gt;æ–­å¼€ä¸€ä¸ª TCP è¿æ¥åˆ™éœ€è¦â€œå››æ¬¡æŒ¥æ‰‹â€ï¼š&lt;/h5&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯-å‘é€ä¸€ä¸ª FINï¼Œç”¨æ¥å…³é—­å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„æ•°æ®ä¼ é€&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨-æ”¶åˆ°è¿™ä¸ª FINï¼Œå®ƒå‘å›ä¸€ ä¸ª ACKï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°çš„åºå·åŠ 1 ã€‚å’Œ SYN ä¸€æ ·ï¼Œä¸€ä¸ª FIN å°†å ç”¨ä¸€ä¸ªåºå·&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨-å…³é—­ä¸å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå‘é€ä¸€ä¸ªFINç»™å®¢æˆ·ç«¯&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯-å‘å› ACK æŠ¥æ–‡ç¡®è®¤ï¼Œå¹¶å°†ç¡®è®¤åºå·è®¾ç½®ä¸ºæ”¶åˆ°åºå·åŠ 1&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h5 id=&#34;ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ˜¯ä¸‰æ¬¡æ¡æ‰‹å…³é—­è¿æ¥ç¡®æ˜¯å››æ¬¡æŒ¥æ‰‹å‘¢&#34;&gt;ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­è¿æ¥ç¡®æ˜¯å››æ¬¡æŒ¥æ‰‹å‘¢ï¼Ÿ&lt;/h5&gt;
&lt;p&gt;å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œ æœåŠ¡å™¨åœ¨LISTENçŠ¶æ€ä¸‹ï¼Œæ”¶åˆ°å»ºç«‹è¿æ¥è¯·æ±‚çš„SYNæŠ¥æ–‡åï¼ŒæŠŠACKå’ŒSYNæ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œå‘é€ç»™å®¢æˆ·ç«¯ã€‚&lt;br&gt;
è€Œå…³é—­è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ï¼Œè€Œè‡ªå·±ä¹Ÿæœªå¿…å…¨éƒ¨æ•°æ®éƒ½å‘é€ç»™å¯¹æ–¹äº†ï¼Œæ‰€ä»¥å·±æ–¹å¯ä»¥ç«‹å³å…³é—­ï¼Œä¹Ÿå¯ä»¥å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹åï¼Œå†å‘é€FINæŠ¥æ–‡ç»™å¯¹æ–¹æ¥è¡¨ç¤ºåŒæ„ç°åœ¨å…³é—­è¿æ¥ï¼Œå› æ­¤ï¼Œå·±æ–¹ACKå’ŒFINä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ï¼Œä»è€Œå¯¼è‡´å¤šäº†ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢è®²çš„æ¯”è¾ƒæ¦‚æ‹¬ï¼Œæ¨èä¸€ç¯‡è®²çš„æ¯”è¾ƒç»†è‡´çš„æ–‡ç« ï¼šhttps://blog.csdn.net/qzcsu/article/details/72861891&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;å¿«æ’æ€è·¯&#34;&gt;å¿«æ’æ€è·¯&lt;/h2&gt;
&lt;h4 id=&#34;å¿«æ’çš„æ€æƒ³&#34;&gt;å¿«æ’çš„æ€æƒ³ï¼š&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;1.å…ˆä»æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªæ•°ä½œä¸ºåŸºå‡†æ•°ï¼›ï¼ˆç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.åˆ†åŒºè¿‡ç¨‹ï¼Œå°†æ¯”è¿™ä¸ªæ•°å¤§çš„æ•°å…¨éƒ¨æ”¾åˆ°å®ƒçš„å³è¾¹ï¼Œå°äºæˆ–ç­‰äºå®ƒçš„æ•°å…¨éƒ¨æ”¾åˆ°å®ƒçš„å·¦è¾¹ï¼›&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.å†å¯¹å·¦å³åŒºé—´è¿›è¡Œç¬¬äºŒæ­¥ï¼Œç›´åˆ°å„åŒºé—´åªæœ‰ä¸€ä¸ªæ•°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿«æ’æ€è·¯-2&#34;&gt;&lt;strong&gt;å¿«æ’æ€è·¯ï¼š&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;å¯ä»¥ç”¨è¡¥æ´æ€è·¯æ¥å®ç°ä¸Šè¾¹çš„å¿«æ’æ€æƒ³ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŒ–æ´ä¹‹åï¼Œè¡¥æ´ã€‚&lt;/p&gt;
&lt;p&gt;æŒ–ä¸€ä¸ªæ´æ¥è¡¥æ´ï¼Œç›®çš„æ˜¯è¦æŠŠæ•°åˆ†åˆ°ä¸¤è¾¹ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;13&#34;&gt;&lt;img src=&#34;https:////upload-images.jianshu.io/upload_images/1829401-1728cff508f62f6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;å›¾ä¸€&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;14&#34;&gt;&lt;img src=&#34;https:////upload-images.jianshu.io/upload_images/1829401-a59f520690465285.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;å›¾äºŒ&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œå®Œæ¯•åï¼Œæ¯”åŸºå‡†æ•°å°çš„åœ¨å·¦è¾¹ï¼Œæ¯”åŸºå‡†æ•°å¤§çš„åœ¨å³è¾¹ã€‚å› æ­¤å¯¹è¿™ä¸¤éƒ¨åˆ†é‡å¤è¿™ä¸ªæ­Œæ­¥éª¤å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;p&gt;1.æ´åœ¨å·¦è¾¹ä»£è¡¨å·¦è¾¹éƒ¨åˆ†å·²ç»æ’å¥½éƒ½æ˜¯æ¯”åŸºå‡†æ•°å°çš„ï¼Œæ´åœ¨å³è¾¹ä»£è¡¨å³è¾¹éƒ¨åˆ†å·²ç»æ’å¥½éƒ½æ˜¯æ¯”åŸºå‡†æ•°å¤§çš„ã€‚&lt;/p&gt;
&lt;p&gt;2.è¦è¡¥å·¦è¾¹çš„æ´ä»åå¾€å‰æ¯”åŸºå‡†æ•°å°çš„ï¼Œjé€’å¢ï¼›è¦è¡¥å³è¾¹çš„æ´ä»å‰å¾€åæ¯”åŸºå‡†æ•°å¤§çš„ï¼Œié€’å¢ã€‚&lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼šfrankisbaby&lt;br&gt;
é“¾æ¥ï¼šhttps://www.jianshu.com/p/f01c64fd2f93&lt;br&gt;
æ¥æºï¼šç®€ä¹¦&lt;br&gt;
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚&lt;/p&gt;
&lt;h1 id=&#34;1-ç»å…¸å¿«é€Ÿæ’åºå›¾ç¤ºè¿‡ç¨‹&#34;&gt;1. ç»å…¸å¿«é€Ÿæ’åºå›¾ç¤ºè¿‡ç¨‹&lt;/h1&gt;
&lt;h2 id=&#34;1-ç»å…¸å¿«é€Ÿæ’åºçš„æ€»ä½“æµç¨‹&#34;&gt;(1) ç»å…¸å¿«é€Ÿæ’åºçš„æ€»ä½“æµç¨‹&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;15&#34;&gt;&lt;img src=&#34;https:////upload-images.jianshu.io/upload_images/7789414-fb94ab5405281f89.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;2-æ ¹æ®åŸºå‡†å€¼åˆ†åŒºçš„è¿‡ç¨‹&#34;&gt;(2) æ ¹æ®åŸºå‡†å€¼åˆ†åŒºçš„è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;åœ¨[&lt;a href=&#34;https://www.jianshu.com/p/356604b8903f&#34;&gt;ç®—æ³•é¢˜] è·å…°å›½æ——é—®é¢˜&lt;/a&gt;ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚&lt;/p&gt;
&lt;h1 id=&#34;2-éšæœºå¿«é€Ÿæ’åº&#34;&gt;2. éšæœºå¿«é€Ÿæ’åº&lt;/h1&gt;
&lt;p&gt;ç»å…¸å¿«é€Ÿæ’åºæ€»æ˜¯æŒ‡å®šæ•°ç»„æˆ–è€…æŸéƒ¨åˆ†çš„æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼Œéšæœºå¿«é€Ÿæ’åºæŒ‡å®šæ•°ç»„æˆ–è€…æŸä¸€éƒ¨åˆ†ä¸­çš„éšæœºå€¼ä½œä¸ºåŸºå‡†å€¼ã€‚&lt;/p&gt;
&lt;h1 id=&#34;3-åŠ¨å›¾å±•ç¤º&#34;&gt;3. åŠ¨å›¾å±•ç¤º&lt;/h1&gt;
&lt;p&gt;ä½œè€…ï¼šCoderJed&lt;br&gt;
é“¾æ¥ï¼šhttps://www.jianshu.com/p/a68f72278f8f&lt;br&gt;
æ¥æºï¼šç®€ä¹¦&lt;br&gt;
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚&lt;/p&gt;
&lt;p&gt;åŠ¨ç”»æ¼”ç¤ºï¼šhttps://github.com/lzever/animationSort&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;å¿«æ…¢æŒ‡é’ˆé—®é¢˜&#34;&gt;å¿«æ…¢æŒ‡é’ˆé—®é¢˜&lt;/h2&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;http10å’Œ-http11çš„åŒºåˆ«åŠçŠ¶æ€ç &#34;&gt;http1.0å’Œ http1.1çš„åŒºåˆ«åŠçŠ¶æ€ç &lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;HTTPçš„ç‰¹ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ”¯æŒå®¢æˆ·ç«¯ã€æœåŠ¡å™¨ç«¯æ¨¡å¼ï¼Œç®€å•å¿«é€Ÿï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ï¼Œçµæ´»ï¼ŒHTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ï¼Œæ— è¿æ¥ï¼Œé™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œæ— çŠ¶æ€ï¼ŒHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ï¼ŒæŒ‡æ˜åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;HTTPéƒ½æ˜¯ç”±å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚çš„ï¼Œå¹¶ä¸”ç”±æœåŠ¡å™¨ç«¯å›åº”å“åº”æ¶ˆæ¯çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;çµæ´»ï¼Œæˆ‘ä»¬çŸ¥é“å…è®¸å¯ä»¥ä»»ä½•ç±»å‹çš„æ•°æ®å¯¹è±¡ï¼ŒåŒ…æ‹¬éŸ³é¢‘ï¼Œè§†é¢‘ï¼Œå›¾ç‰‡ï¼Œæ–‡ä»¶ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ— çŠ¶æ€ï¼ŒHTTPå°±æ˜¯è¯´ï¼Œæ¯æ¬¡HTTPè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä»»ä½•ä¸¤ä¸ªè¯·æ±‚ä¹‹é—´æ²¡æœ‰å¿…ç„¶çš„è”ç³»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ— è¿æ¥çš„ï¼Œæ¯æ¬¡æœåŠ¡å™¨åœ¨å¤„ç†å®Œå®¢æˆ·ç«¯çš„è¯·æ±‚åï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œå°±æ–­å¼€äº†é€šä¿¡ï¼Œå½“å®¢æˆ·ç«¯å†æ¬¡å‘é€è¯·æ±‚æ—¶å°±æ˜¯ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;**è¿™æ˜¯HTTP/1.0ç‰ˆçš„ä¸»è¦ç¼ºç‚¹ï¼Œ**æ¯ä¸ªTCPè¿æ¥åªèƒ½å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå‘é€æ•°æ®å®Œæ¯•åï¼Œè¿æ¥å°±å…³é—­äº†ï¼Œå¦‚æœè¿˜è¦è¯·æ±‚å°±å¿…é¡»è¦æ–°å»ºä¸€ä¸ªè¯·æ±‚è¿æ¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;HTTPæ˜¯ä¸€ç§ä¸ä¿å­˜çŠ¶æ€ï¼Œæ— çŠ¶æ€åè®®ï¼Œåè®®å¯¹äºå‘é€è¿‡æ¥çš„è¯·æ±‚æˆ–æ˜¯å“åº”éƒ½ä¸åšæŒä¹…åŒ–å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;HTTP1.1è™½ç„¶æ˜¯æ— çŠ¶æ€åè®®ï¼Œä½†æ˜¯ä¸ºäº†å®ç°æœŸæœ›çš„ä¿æŒçŠ¶æ€åŠŸèƒ½ï¼Œäºæ˜¯å¼•å…¥äº†CookieæŠ€æœ¯ï¼Œæœ‰äº†Cookieï¼Œå’ŒHTTPåè®®é€šä¿¡ï¼Œå°±å¯ä»¥ç®¡ç†çŠ¶æ€äº†ã€‚&lt;/p&gt;
&lt;img src=&#34;https://user-gold-cdn.xitu.io/2019/12/25/16f3cf564dbef1a1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&#34; alt=&#34;img&#34; style=&#34;zoom: 50%;&#34; /&gt;
&lt;img src=&#34;https://user-gold-cdn.xitu.io/2019/12/25/16f3cf5650eb55e8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&#34; alt=&#34;img&#34; style=&#34;zoom: 50%;&#34; /&gt;
&lt;p&gt;&lt;strong&gt;TCPè¿æ¥çš„æ–°å»ºæˆæœ¬å¾ˆé«˜ï¼Œå› ä¸ºéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸‰æ¬¡æ¡æ‰‹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;**äº¤æµçš„ç®€å•æµç¨‹ï¼š**å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼Œå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯å“åº”è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯å…³é—­è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;HTTPã€1.1ç‰ˆæœ¬æ˜¯æœ€æµè¡Œçš„ç‰ˆæœ¬ï¼Œå¯ä»¥æŒä¹…è¿æ¥ï¼ŒTCPè¿æ¥é»˜è®¤ä¸å…³é—­ï¼Œå¯ä»¥è¢«å¤šä¸ªè¯·æ±‚å¤ç”¨ï¼Œåªæœ‰åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œæ²¡æœ‰è¯·æ±‚ï¼Œå°±å¯ä»¥è‡ªåŠ¨å…³é—­ã€‚&lt;/p&gt;
&lt;h5 id=&#34;http10å’Œhttp11åŒºåˆ«&#34;&gt;HTTP1.0å’ŒHTTP1.1åŒºåˆ«ï¼š&lt;/h5&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™éƒ¨åˆ†å›ç­”å¼•ç”¨è¿™ç¯‡æ–‡ç«  https://www.jianshu.com/p/be29d679cbff çš„ä¸€äº›å†…å®¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é•¿è¿æ¥&lt;/strong&gt; : &lt;strong&gt;åœ¨HTTP/1.0ä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯çŸ­è¿æ¥&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è¯·æ±‚éƒ½è¦é‡æ–°å»ºç«‹ä¸€æ¬¡è¿æ¥ã€‚HTTP æ˜¯åŸºäºTCP/IPåè®®çš„,æ¯ä¸€æ¬¡å»ºç«‹æˆ–è€…æ–­å¼€è¿æ¥éƒ½éœ€è¦ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹çš„å¼€é”€ï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½è¦è¿™æ ·çš„è¯ï¼Œå¼€é”€ä¼šæ¯”è¾ƒå¤§ã€‚å› æ­¤æœ€å¥½èƒ½ç»´æŒä¸€ä¸ªé•¿è¿æ¥ï¼Œå¯ä»¥ç”¨ä¸ªé•¿è¿æ¥æ¥å‘å¤šä¸ªè¯·æ±‚ã€‚&lt;strong&gt;HTTP 1.1èµ·ï¼Œé»˜è®¤ä½¿ç”¨é•¿è¿æ¥&lt;/strong&gt; ,é»˜è®¤å¼€å¯Connectionï¼š keep-aliveã€‚ &lt;strong&gt;HTTP/1.1çš„æŒç»­è¿æ¥æœ‰éæµæ°´çº¿æ–¹å¼å’Œæµæ°´çº¿æ–¹å¼&lt;/strong&gt; ã€‚æµæ°´çº¿æ–¹å¼æ˜¯å®¢æˆ·åœ¨æ”¶åˆ°HTTPçš„å“åº”æŠ¥æ–‡ä¹‹å‰å°±èƒ½æ¥ç€å‘é€æ–°çš„è¯·æ±‚æŠ¥æ–‡ã€‚ä¸ä¹‹ç›¸å¯¹åº”çš„éæµæ°´çº¿æ–¹å¼æ˜¯å®¢æˆ·åœ¨æ”¶åˆ°å‰ä¸€ä¸ªå“åº”åæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚&lt;strong&gt;HTTPåè®®çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼Œå®è´¨ä¸Šæ˜¯TCPåè®®çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”™è¯¯çŠ¶æ€å“åº”ç &lt;/strong&gt; :åœ¨HTTP1.1ä¸­æ–°å¢äº†24ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç ï¼Œå¦‚409ï¼ˆConflictï¼‰è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸èµ„æºçš„å½“å‰çŠ¶æ€å‘ç”Ÿå†²çªï¼›410ï¼ˆGoneï¼‰è¡¨ç¤ºæœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºè¢«æ°¸ä¹…æ€§çš„åˆ é™¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜å¤„ç†&lt;/strong&gt; :åœ¨HTTP1.0ä¸­ä¸»è¦ä½¿ç”¨headeré‡Œçš„If-Modified-Since,Expiresæ¥åšä¸ºç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†ï¼ŒHTTP1.1åˆ™å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥ä¾‹å¦‚Entity tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Matchç­‰æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´æ¥æ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿æ¥çš„ä½¿ç”¨&lt;/strong&gt; :HTTP1.0ä¸­ï¼Œå­˜åœ¨ä¸€äº›æµªè´¹å¸¦å®½çš„ç°è±¡ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯åªæ˜¯éœ€è¦æŸä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œè€ŒæœåŠ¡å™¨å´å°†æ•´ä¸ªå¯¹è±¡é€è¿‡æ¥äº†ï¼Œå¹¶ä¸”ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼ŒHTTP1.1åˆ™åœ¨è¯·æ±‚å¤´å¼•å…¥äº†rangeå¤´åŸŸï¼Œå®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œå³è¿”å›ç æ˜¯206ï¼ˆPartial Contentï¼‰ï¼Œè¿™æ ·å°±æ–¹ä¾¿äº†å¼€å‘è€…è‡ªç”±çš„é€‰æ‹©ä»¥ä¾¿äºå……åˆ†åˆ©ç”¨å¸¦å®½å’Œè¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hostå¤´å¤„ç†&lt;/strong&gt;ï¼Œåœ¨HTTP1.0ä¸­è®¤ä¸ºæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œå› æ­¤ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸­çš„URLå¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆhostnameï¼‰ã€‚ä½†éšç€è™šæ‹Ÿä¸»æœºæŠ€æœ¯çš„å‘å±•ï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆMulti-homed Web Serversï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ªIPåœ°å€ã€‚HTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒHostå¤´åŸŸï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æœæ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯ï¼ˆ400 Bad Requestï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;å»¶ä¼¸HTTP 2.0&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;HTTP2.0å’ŒHTTP1.Xç›¸æ¯”çš„æ–°ç‰¹æ€§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–°çš„äºŒè¿›åˆ¶æ ¼å¼&lt;/strong&gt;ï¼ˆBinary Formatï¼‰ï¼ŒHTTP1.xçš„è§£ææ˜¯åŸºäºæ–‡æœ¬ã€‚åŸºäºæ–‡æœ¬åè®®çš„æ ¼å¼è§£æå­˜åœ¨å¤©ç„¶ç¼ºé™·ï¼Œæ–‡æœ¬çš„è¡¨ç°å½¢å¼æœ‰å¤šæ ·æ€§ï¼Œè¦åšåˆ°å¥å£®æ€§è€ƒè™‘çš„åœºæ™¯å¿…ç„¶å¾ˆå¤šï¼ŒäºŒè¿›åˆ¶åˆ™ä¸åŒï¼Œåªè®¤0å’Œ1çš„ç»„åˆã€‚åŸºäºè¿™ç§è€ƒè™‘HTTP2.0çš„åè®®è§£æå†³å®šé‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ç°æ–¹ä¾¿ä¸”å¥å£®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šè·¯å¤ç”¨&lt;/strong&gt;ï¼ˆMultiPlexingï¼‰ï¼Œå³è¿æ¥å…±äº«ï¼Œå³æ¯ä¸€ä¸ªrequestéƒ½æ˜¯æ˜¯ç”¨ä½œè¿æ¥å…±äº«æœºåˆ¶çš„ã€‚ä¸€ä¸ªrequestå¯¹åº”ä¸€ä¸ªidï¼Œè¿™æ ·ä¸€ä¸ªè¿æ¥ä¸Šå¯ä»¥æœ‰å¤šä¸ªrequestï¼Œæ¯ä¸ªè¿æ¥çš„requestå¯ä»¥éšæœºçš„æ··æ‚åœ¨ä¸€èµ·ï¼Œæ¥æ”¶æ–¹å¯ä»¥æ ¹æ®requestçš„ idå°†requestå†å½’å±åˆ°å„è‡ªä¸åŒçš„æœåŠ¡ç«¯è¯·æ±‚é‡Œé¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;headerå‹ç¼©&lt;/strong&gt;ï¼Œå¦‚ä¸Šæ–‡ä¸­æ‰€è¨€ï¼Œå¯¹å‰é¢æåˆ°è¿‡HTTP1.xçš„headerå¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ï¼ŒHTTP2.0ä½¿ç”¨encoderæ¥å‡å°‘éœ€è¦ä¼ è¾“çš„headerå¤§å°ï¼Œé€šè®¯åŒæ–¹å„è‡ªcacheä¸€ä»½header fieldsè¡¨ï¼Œæ—¢é¿å…äº†é‡å¤headerçš„ä¼ è¾“ï¼Œåˆå‡å°äº†éœ€è¦ä¼ è¾“çš„å¤§å°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡ç«¯æ¨é€&lt;/strong&gt;ï¼ˆserver pushï¼‰ï¼ŒåŒSPDYä¸€æ ·ï¼ŒHTTP2.0ä¹Ÿå…·æœ‰server pushåŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;HTTP2.0çš„å‡çº§æ”¹é€ &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‰æ–‡è¯´äº†HTTP2.0å…¶å®å¯ä»¥æ”¯æŒéHTTPSçš„ï¼Œä½†æ˜¯ç°åœ¨ä¸»æµçš„æµè§ˆå™¨åƒchromeï¼Œfirefoxè¡¨ç¤ºè¿˜æ˜¯åªæ”¯æŒåŸºäº TLS éƒ¨ç½²çš„HTTP2.0åè®®ï¼Œæ‰€ä»¥è¦æƒ³å‡çº§æˆHTTP2.0è¿˜æ˜¯å…ˆå‡çº§HTTPSä¸ºå¥½ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ çš„ç½‘ç«™å·²ç»å‡çº§HTTPSä¹‹åï¼Œé‚£ä¹ˆå‡çº§HTTP2.0å°±ç®€å•å¾ˆå¤šï¼Œå¦‚æœä½ ä½¿ç”¨NGINXï¼Œåªè¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¯åŠ¨ç›¸åº”çš„åè®®å°±å¯ä»¥äº†ï¼Œå¯ä»¥å‚è€ƒ&lt;strong&gt;NGINXç™½çš®ä¹¦ï¼ŒNGINXé…ç½®HTTP2.0å®˜æ–¹æŒ‡å—&lt;/strong&gt; https://www.nginx.com/blog/nginx-1-9-5/ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨äº†HTTP2.0é‚£ä¹ˆï¼ŒåŸæœ¬çš„HTTP1.xæ€ä¹ˆåŠï¼Œè¿™ä¸ªé—®é¢˜å…¶å®ä¸ç”¨æ‹…å¿ƒï¼ŒHTTP2.0å®Œå…¨å…¼å®¹HTTP1.xçš„è¯­ä¹‰ï¼Œå¯¹äºä¸æ”¯æŒHTTP2.0çš„æµè§ˆå™¨ï¼ŒNGINXä¼šè‡ªåŠ¨å‘ä¸‹å…¼å®¹çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;HTTP2.0çš„å¤šè·¯å¤ç”¨å’ŒHTTP1.Xä¸­çš„é•¿è¿æ¥å¤ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTP/1.* ä¸€æ¬¡è¯·æ±‚-å“åº”ï¼Œå»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œç”¨å®Œå…³é—­ï¼›æ¯ä¸€ä¸ªè¯·æ±‚éƒ½è¦å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼›&lt;/li&gt;
&lt;li&gt;HTTP/1.1 Pipelingè§£å†³æ–¹å¼ä¸ºï¼Œè‹¥å¹²ä¸ªè¯·æ±‚æ’é˜Ÿä¸²è¡ŒåŒ–å•çº¿ç¨‹å¤„ç†ï¼Œåé¢çš„è¯·æ±‚ç­‰å¾…å‰é¢è¯·æ±‚çš„è¿”å›æ‰èƒ½è·å¾—æ‰§è¡Œæœºä¼šï¼Œä¸€æ—¦æœ‰æŸè¯·æ±‚è¶…æ—¶ç­‰ï¼Œåç»­è¯·æ±‚åªèƒ½è¢«é˜»å¡ï¼Œæ¯«æ— åŠæ³•ï¼Œä¹Ÿå°±æ˜¯äººä»¬å¸¸è¯´çš„çº¿å¤´é˜»å¡ï¼›&lt;/li&gt;
&lt;li&gt;HTTP/2å¤šä¸ªè¯·æ±‚å¯åŒæ—¶åœ¨ä¸€ä¸ªè¿æ¥ä¸Šå¹¶è¡Œæ‰§è¡Œã€‚æŸä¸ªè¯·æ±‚ä»»åŠ¡è€—æ—¶ä¸¥é‡ï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒè¿æ¥çš„æ­£å¸¸æ‰§è¡Œï¼›&lt;br&gt;
å…·ä½“å¦‚å›¾ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&#34;http://mmbiz.qpic.cn/mmbiz_png/cmOLumrNib1cfBOtIMQ6JfSibJdd6QkQriba5ygCTOOjIQH4wvoJS2iaFBseyEAUfvpJQThHmTjuGuaSspUo8xppiaA/640?wx_fmt=png&amp;amp;tp=webp&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&#34; alt=&#34;img&#34; style=&#34;zoom: 80%;&#34; /&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆéœ€è¦å¤´éƒ¨å‹ç¼©ï¼Ÿ&lt;/strong&gt;&lt;br&gt;
å‡å®šä¸€ä¸ªé¡µé¢æœ‰100ä¸ªèµ„æºéœ€è¦åŠ è½½ï¼ˆè¿™ä¸ªæ•°é‡å¯¹äºä»Šå¤©çš„Webè€Œè¨€è¿˜æ˜¯æŒºä¿å®ˆçš„ï¼‰, è€Œæ¯ä¸€æ¬¡è¯·æ±‚éƒ½æœ‰1kbçš„æ¶ˆæ¯å¤´ï¼ˆè¿™åŒæ ·ä¹Ÿå¹¶ä¸å°‘è§ï¼Œå› ä¸ºCookieå’Œå¼•ç”¨ç­‰ä¸œè¥¿çš„å­˜åœ¨ï¼‰, åˆ™è‡³å°‘éœ€è¦å¤šæ¶ˆè€—100kbæ¥è·å–è¿™äº›æ¶ˆæ¯å¤´ã€‚HTTP2.0å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå­—å…¸ï¼Œå·®é‡æ›´æ–°HTTPå¤´éƒ¨ï¼Œå¤§å¤§é™ä½å› å¤´éƒ¨ä¼ è¾“äº§ç”Ÿçš„æµé‡ã€‚å…·ä½“å‚è€ƒï¼šHTTP/2 å¤´éƒ¨å‹ç¼©æŠ€æœ¯ä»‹ç»&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTP2.0å¤šè·¯å¤ç”¨æœ‰å¤šå¥½ï¼Ÿ&lt;/strong&gt;&lt;br&gt;
HTTP æ€§èƒ½ä¼˜åŒ–çš„å…³é”®å¹¶ä¸åœ¨äºé«˜å¸¦å®½ï¼Œè€Œæ˜¯ä½å»¶è¿Ÿã€‚TCP è¿æ¥ä¼šéšç€æ—¶é—´è¿›è¡Œè‡ªæˆ‘ã€Œè°ƒè°ã€ï¼Œèµ·åˆä¼šé™åˆ¶è¿æ¥çš„æœ€å¤§é€Ÿåº¦ï¼Œå¦‚æœæ•°æ®æˆåŠŸä¼ è¾“ï¼Œä¼šéšç€æ—¶é—´çš„æ¨ç§»æé«˜ä¼ è¾“çš„é€Ÿåº¦ã€‚è¿™ç§è°ƒè°åˆ™è¢«ç§°ä¸º TCP æ…¢å¯åŠ¨ã€‚ç”±äºè¿™ç§åŸå› ï¼Œè®©åŸæœ¬å°±å…·æœ‰çªå‘æ€§å’ŒçŸ­æ—¶æ€§çš„ HTTP è¿æ¥å˜çš„ååˆ†ä½æ•ˆã€‚&lt;br&gt;
HTTP/2 é€šè¿‡è®©æ‰€æœ‰æ•°æ®æµå…±ç”¨åŒä¸€ä¸ªè¿æ¥ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ TCP è¿æ¥ï¼Œè®©é«˜å¸¦å®½ä¹Ÿèƒ½çœŸæ­£çš„æœåŠ¡äº HTTP çš„æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;httpå’Œhttpsçš„åŒºåˆ«&#34;&gt;httpå’Œhttpsçš„åŒºåˆ«&lt;/h2&gt;
&lt;img src=&#34;https://user-gold-cdn.xitu.io/2019/3/13/169759640707ca8a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&#34; alt=&#34;img&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;HTTPSåè®®éœ€è¦åˆ°CAç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦å¾ˆå°‘ï¼Œéœ€è¦äº¤è´¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTPSå¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢è¿è¥å•†åŠ«æŒï¼Œè§£å†³äº†é˜²åŠ«æŒçš„ä¸€ä¸ªå¤§é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç«¯å£&lt;/strong&gt; ï¼š&lt;/p&gt;
&lt;p&gt;HTTPçš„URLç”±â€œhttp://â€èµ·å§‹ä¸”é»˜è®¤ä½¿ç”¨&lt;strong&gt;ç«¯å£80&lt;/strong&gt;ï¼Œè€ŒHTTPSçš„URLç”±â€œhttps://â€èµ·å§‹ä¸”é»˜è®¤ä½¿ç”¨&lt;strong&gt;ç«¯å£443&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰å…¨æ€§å’Œèµ„æºæ¶ˆè€—ï¼š&lt;/p&gt;
&lt;p&gt;HTTPåè®®è¿è¡Œåœ¨TCPä¹‹ä¸Šï¼Œæ‰€æœ‰ä¼ è¾“çš„å†…å®¹éƒ½æ˜¯æ˜æ–‡ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½æ— æ³•éªŒè¯å¯¹æ–¹çš„èº«ä»½ã€‚HTTPSæ˜¯&lt;strong&gt;è¿è¡Œåœ¨SSL/TLSä¹‹ä¸Š&lt;/strong&gt;çš„HTTPåè®®ï¼ŒSSL/TLS &lt;strong&gt;è¿è¡Œåœ¨TCPä¹‹ä¸Š&lt;/strong&gt;ã€‚æ‰€æœ‰ä¼ è¾“çš„å†…å®¹éƒ½ç»è¿‡åŠ å¯†ï¼ŒåŠ å¯†é‡‡ç”¨å¯¹ç§°åŠ å¯†ï¼Œä½†å¯¹ç§°åŠ å¯†çš„å¯†é’¥ç”¨æœåŠ¡å™¨æ–¹çš„è¯ä¹¦è¿›è¡Œäº†éå¯¹ç§°åŠ å¯†ã€‚æ‰€ä»¥è¯´ï¼ŒHTTP å®‰å…¨æ€§æ²¡æœ‰ HTTPSé«˜ï¼Œä½†æ˜¯ HTTPS æ¯”HTTPè€—è´¹æ›´å¤šæœåŠ¡å™¨èµ„æºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹ç§°åŠ å¯†ï¼šå¯†é’¥åªæœ‰ä¸€ä¸ªï¼ŒåŠ å¯†è§£å¯†ä¸ºåŒä¸€ä¸ªå¯†ç ï¼Œä¸”åŠ è§£å¯†é€Ÿåº¦å¿«ï¼Œå…¸å‹çš„å¯¹ç§°åŠ å¯†ç®—æ³•æœ‰DESã€AESç­‰ï¼›&lt;/li&gt;
&lt;li&gt;éå¯¹ç§°åŠ å¯†ï¼šå¯†é’¥æˆå¯¹å‡ºç°ï¼ˆä¸”æ ¹æ®å…¬é’¥æ— æ³•æ¨çŸ¥ç§é’¥ï¼Œæ ¹æ®ç§é’¥ä¹Ÿæ— æ³•æ¨çŸ¥å…¬é’¥ï¼‰ï¼ŒåŠ å¯†è§£å¯†ä½¿ç”¨ä¸åŒå¯†é’¥ï¼ˆå…¬é’¥åŠ å¯†éœ€è¦ç§é’¥è§£å¯†ï¼Œç§é’¥åŠ å¯†éœ€è¦å…¬é’¥è§£å¯†ï¼‰ï¼Œç›¸å¯¹å¯¹ç§°åŠ å¯†é€Ÿåº¦è¾ƒæ…¢ï¼Œå…¸å‹çš„éå¯¹ç§°åŠ å¯†ç®—æ³•æœ‰RSAã€DSAç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;redisç¼“å­˜é›ªå´©-ç¼“å­˜ç©¿é€-ç¼“å­˜å‡»ç©¿&#34;&gt;redisç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿&lt;/h2&gt;
&lt;h4 id=&#34;1-ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€&#34;&gt;1. ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿ&lt;/h4&gt;
&lt;p&gt;ç¼“å­˜ç©¿é€è¯´ç®€å•ç‚¹å°±æ˜¯å¤§é‡è¯·æ±‚çš„ key æ ¹æœ¬ä¸å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œå¯¼è‡´è¯·æ±‚ç›´æ¥åˆ°äº†æ•°æ®åº“ä¸Šï¼Œæ ¹æœ¬æ²¡æœ‰ç»è¿‡ç¼“å­˜è¿™ä¸€å±‚ã€‚ä¸¾ä¸ªä¾‹å­ï¼šæŸä¸ªé»‘å®¢æ•…æ„åˆ¶é€ æˆ‘ä»¬ç¼“å­˜ä¸­ä¸å­˜åœ¨çš„ key å‘èµ·å¤§é‡è¯·æ±‚ï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚è½åˆ°æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;h4 id=&#34;2-ç¼“å­˜ç©¿é€æƒ…å†µçš„å¤„ç†æµç¨‹æ˜¯æ€æ ·çš„&#34;&gt;2. ç¼“å­˜ç©¿é€æƒ…å†µçš„å¤„ç†æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ&lt;/h4&gt;
&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”¨æˆ·çš„è¯·æ±‚æœ€ç»ˆéƒ½è¦è·‘åˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢ä¸€éã€‚&lt;/p&gt;
&lt;img src=&#34;https://snailclimb.gitee.io/javaguide/docs/database/Redis/images/redis-all/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E6%83%85%E5%86%B5.png&#34; alt=&#34;ç¼“å­˜ç©¿é€æƒ…å†µ&#34; style=&#34;zoom: 80%;&#34; /&gt;
&lt;h4 id=&#34;3-æœ‰å“ªäº›è§£å†³åŠæ³•&#34;&gt;3. æœ‰å“ªäº›è§£å†³åŠæ³•ï¼Ÿ&lt;/h4&gt;
&lt;p&gt;æœ€åŸºæœ¬çš„å°±æ˜¯é¦–å…ˆåšå¥½å‚æ•°æ ¡éªŒï¼Œä¸€äº›ä¸åˆæ³•çš„å‚æ•°è¯·æ±‚ç›´æ¥æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚æ¯”å¦‚æŸ¥è¯¢çš„æ•°æ®åº“ id ä¸èƒ½å°äº 0ã€ä¼ å…¥çš„é‚®ç®±æ ¼å¼ä¸å¯¹çš„æ—¶å€™ç›´æ¥è¿”å›é”™è¯¯æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ï¼‰ç¼“å­˜æ— æ•ˆ key&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç¼“å­˜å’Œæ•°æ®åº“éƒ½æŸ¥ä¸åˆ°æŸä¸ª key çš„æ•°æ®å°±å†™ä¸€ä¸ªåˆ° Redis ä¸­å»å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š &lt;code&gt;SET key value EX 10086&lt;/code&gt; ã€‚è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¯·æ±‚çš„ key å˜åŒ–ä¸é¢‘ç¹çš„æƒ…å†µï¼Œå¦‚æœé»‘å®¢æ¶æ„æ”»å‡»ï¼Œæ¯æ¬¡æ„å»ºä¸åŒçš„è¯·æ±‚ keyï¼Œä¼šå¯¼è‡´ Redis ä¸­ç¼“å­˜å¤§é‡æ— æ•ˆçš„ key ã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³æ­¤é—®é¢˜ã€‚å¦‚æœéè¦ç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ç©¿é€é—®é¢˜çš„è¯ï¼Œå°½é‡å°†æ— æ•ˆçš„ key çš„è¿‡æœŸæ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹æ¯”å¦‚ 1 åˆ†é’Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œè¿™é‡Œå¤šè¯´ä¸€å˜´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯è¿™æ ·è®¾è®¡ key çš„ï¼š &lt;code&gt;è¡¨å:åˆ—å:ä¸»é”®å:ä¸»é”®å€¼&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ï¼‰å¸ƒéš†è¿‡æ»¤å™¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªéå¸¸ç¥å¥‡çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°åˆ¤æ–­ä¸€ä¸ªç»™å®šæ•°æ®æ˜¯å¦å­˜åœ¨äºæµ·é‡æ•°æ®ä¸­ã€‚æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯åˆ¤æ–­ key æ˜¯å¦åˆæ³•ï¼Œæœ‰æ²¡æœ‰æ„Ÿè§‰å¸ƒéš†è¿‡æ»¤å™¨å°±æ˜¯æˆ‘ä»¬æƒ³è¦æ‰¾çš„é‚£ä¸ªâ€œäººâ€ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ˜¯è¿™æ ·åšçš„ï¼šæŠŠæ‰€æœ‰å¯èƒ½å­˜åœ¨çš„è¯·æ±‚çš„å€¼éƒ½å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå½“ç”¨æˆ·è¯·æ±‚è¿‡æ¥ï¼Œå…ˆåˆ¤æ–­ç”¨æˆ·å‘æ¥çš„è¯·æ±‚çš„å€¼æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ä¸å­˜åœ¨çš„è¯ï¼Œç›´æ¥è¿”å›è¯·æ±‚å‚æ•°é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œå­˜åœ¨çš„è¯æ‰ä¼šèµ°ä¸‹é¢çš„æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨ä¹‹åçš„ç¼“å­˜å¤„ç†æµç¨‹å›¾å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;16&#34;&gt;&lt;img src=&#34;https://snailclimb.gitee.io/javaguide/docs/database/Redis/images/redis-all/%E5%8A%A0%E5%85%A5%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E5%90%8E%E7%9A%84%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¸ƒéš†è¿‡æ»¤å™¨å¯èƒ½ä¼šå­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µã€‚æ€»ç»“æ¥è¯´å°±æ˜¯ï¼š &lt;strong&gt;å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ å­˜åœ¨ï¼Œå°æ¦‚ç‡ä¼šè¯¯åˆ¤ã€‚å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ ä¸åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ ä¸€å®šä¸åœ¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ä¸ºä»€ä¹ˆä¼šå‡ºç°è¯¯åˆ¤çš„æƒ…å†µå‘¢? æˆ‘ä»¬è¿˜è¦ä»å¸ƒéš†è¿‡æ»¤å™¨çš„åŸç†æ¥è¯´ï¼&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œ&lt;strong&gt;å½“ä¸€ä¸ªå…ƒç´ åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå“ªäº›æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„å“ˆå¸Œå‡½æ•°å¯¹å…ƒç´ å€¼è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°å“ˆå¸Œå€¼ï¼ˆæœ‰å‡ ä¸ªå“ˆå¸Œå‡½æ•°å¾—åˆ°å‡ ä¸ªå“ˆå¸Œå€¼ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®å¾—åˆ°çš„å“ˆå¸Œå€¼ï¼Œåœ¨ä½æ•°ç»„ä¸­æŠŠå¯¹åº”ä¸‹æ ‡çš„å€¼ç½®ä¸º 1ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ï¼Œ&lt;strong&gt;å½“æˆ‘ä»¬éœ€è¦åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå“ªäº›æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¯¹ç»™å®šå…ƒç´ å†æ¬¡è¿›è¡Œç›¸åŒçš„å“ˆå¸Œè®¡ç®—ï¼›&lt;/li&gt;
&lt;li&gt;å¾—åˆ°å€¼ä¹‹ååˆ¤æ–­ä½æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦éƒ½ä¸º 1ï¼Œå¦‚æœå€¼éƒ½ä¸º 1ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªå€¼åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå€¼ä¸ä¸º 1ï¼Œè¯´æ˜è¯¥å…ƒç´ ä¸åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç„¶åï¼Œä¸€å®šä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼š&lt;strong&gt;ä¸åŒçš„å­—ç¬¦ä¸²å¯èƒ½å“ˆå¸Œå‡ºæ¥çš„ä½ç½®ç›¸åŒã€‚&lt;/strong&gt; ï¼ˆå¯ä»¥é€‚å½“å¢åŠ ä½æ•°ç»„å¤§å°æˆ–è€…è°ƒæ•´æˆ‘ä»¬çš„å“ˆå¸Œå‡½æ•°æ¥é™ä½æ¦‚ç‡ï¼‰&lt;/p&gt;
&lt;p&gt;æ›´å¤šå…³äºå¸ƒéš†è¿‡æ»¤å™¨çš„å†…å®¹å¯ä»¥çœ‹æˆ‘çš„è¿™ç¯‡åŸåˆ›ï¼š&lt;a href=&#34;https://github.com/Snailclimb/JavaGuide/blob/master/docs/dataStructures-algorithms/data-structure/bloom-filter.md&#34;&gt;ã€Šä¸äº†è§£å¸ƒéš†è¿‡æ»¤å™¨ï¼Ÿä¸€æ–‡ç»™ä½ æ•´çš„æ˜æ˜ç™½ç™½ï¼ã€‹&lt;/a&gt; ï¼Œå¼ºçƒˆæ¨èï¼Œä¸ªäººæ„Ÿè§‰ç½‘ä¸Šåº”è¯¥æ‰¾ä¸åˆ°æ€»ç»“çš„è¿™ä¹ˆæ˜æ˜ç™½ç™½çš„æ–‡ç« äº†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1-ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©&#34;&gt;1. ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿ&lt;/h4&gt;
&lt;p&gt;æˆ‘å‘ç°ç¼“å­˜é›ªå´©è¿™åå­—èµ·çš„æœ‰ç‚¹æ„æ€ï¼Œå“ˆå“ˆã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œç¼“å­˜é›ªå´©æè¿°çš„å°±æ˜¯è¿™æ ·ä¸€ä¸ªç®€å•çš„åœºæ™¯ï¼š&lt;strong&gt;ç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œåé¢çš„è¯·æ±‚éƒ½ç›´æ¥è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“çŸ­æ—¶é—´å†…æ‰¿å—å¤§é‡è¯·æ±‚ã€‚&lt;/strong&gt; è¿™å°±å¥½æ¯”é›ªå´©ä¸€æ ·ï¼Œæ‘§æ¯æ‹‰æœ½ä¹‹åŠ¿ï¼Œæ•°æ®åº“çš„å‹åŠ›å¯æƒ³è€ŒçŸ¥ï¼Œå¯èƒ½ç›´æ¥å°±è¢«è¿™ä¹ˆå¤šè¯·æ±‚å¼„å®•æœºäº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼šç³»ç»Ÿçš„ç¼“å­˜æ¨¡å—å‡ºäº†é—®é¢˜æ¯”å¦‚å®•æœºå¯¼è‡´ä¸å¯ç”¨ã€‚é€ æˆç³»ç»Ÿçš„æ‰€æœ‰è®¿é—®ï¼Œéƒ½è¦èµ°æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ç§ç¼“å­˜é›ªå´©çš„åœºæ™¯æ˜¯ï¼š&lt;strong&gt;æœ‰ä¸€äº›è¢«å¤§é‡è®¿é—®æ•°æ®ï¼ˆçƒ­ç‚¹ç¼“å­˜ï¼‰åœ¨æŸä¸€æ—¶åˆ»å¤§é¢ç§¯å¤±æ•ˆï¼Œå¯¼è‡´å¯¹åº”çš„è¯·æ±‚ç›´æ¥è½åˆ°äº†æ•°æ®åº“ä¸Šã€‚&lt;/strong&gt; è¿™æ ·çš„æƒ…å†µï¼Œæœ‰ä¸‹é¢å‡ ç§è§£å†³åŠæ³•ï¼š&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ ï¼šç§’æ€å¼€å§‹ 12 ä¸ªå°æ—¶ä¹‹å‰ï¼Œæˆ‘ä»¬ç»Ÿä¸€å­˜æ”¾äº†ä¸€æ‰¹å•†å“åˆ° Redis ä¸­ï¼Œè®¾ç½®çš„ç¼“å­˜è¿‡æœŸæ—¶é—´ä¹Ÿæ˜¯ 12 ä¸ªå°æ—¶ï¼Œé‚£ä¹ˆç§’æ€å¼€å§‹çš„æ—¶å€™ï¼Œè¿™äº›ç§’æ€çš„å•†å“çš„è®¿é—®ç›´æ¥å°±å¤±æ•ˆäº†ã€‚å¯¼è‡´çš„æƒ…å†µå°±æ˜¯ï¼Œç›¸åº”çš„è¯·æ±‚ç›´æ¥å°±è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œå°±åƒé›ªå´©ä¸€æ ·å¯æ€•ã€‚&lt;/p&gt;
&lt;h4 id=&#34;2-æœ‰å“ªäº›è§£å†³åŠæ³•&#34;&gt;2. æœ‰å“ªäº›è§£å†³åŠæ³•ï¼Ÿ&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;é’ˆå¯¹ Redis æœåŠ¡ä¸å¯ç”¨çš„æƒ…å†µï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é‡‡ç”¨ Redis é›†ç¾¤ï¼Œé¿å…å•æœºå‡ºç°é—®é¢˜æ•´ä¸ªç¼“å­˜æœåŠ¡éƒ½æ²¡åŠæ³•ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;é™æµï¼Œé¿å…åŒæ—¶å¤„ç†å¤§é‡çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;é’ˆå¯¹çƒ­ç‚¹ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®¾ç½®ä¸åŒçš„å¤±æ•ˆæ—¶é—´æ¯”å¦‚éšæœºè®¾ç½®ç¼“å­˜çš„å¤±æ•ˆæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;ç¼“å­˜æ°¸ä¸å¤±æ•ˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼&#34;&gt;åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼&lt;/h2&gt;
&lt;h2 id=&#34;ä¸ºä½•éœ€è¦åˆ†å¸ƒå¼é”&#34;&gt;ä¸ºä½•éœ€è¦åˆ†å¸ƒå¼é”&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ†å¸ƒå¼é”ä¸»è¦æœ‰ä¸¤ä¸ªåœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ä¸åŒèŠ‚ç‚¹é‡å¤ç›¸åŒçš„å·¥ä½œ&lt;/strong&gt;ï¼šæ¯”å¦‚ç”¨æˆ·æ‰§è¡Œäº†æŸä¸ªæ“ä½œæœ‰å¯èƒ½ä¸åŒèŠ‚ç‚¹ä¼šå‘é€å¤šå°é‚®ä»¶ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ç ´åæ•°æ®çš„æ­£ç¡®æ€§&lt;/strong&gt;ï¼šå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹åœ¨åŒä¸€æ¡æ•°æ®ä¸ŠåŒæ—¶è¿›è¡Œæ“ä½œï¼Œå¯èƒ½ä¼šé€ æˆæ•°æ®é”™è¯¯æˆ–ä¸ä¸€è‡´çš„æƒ…å†µå‡ºç°ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;redis-åˆ†å¸ƒå¼é”çš„é—®é¢˜&#34;&gt;Redis åˆ†å¸ƒå¼é”çš„é—®é¢˜&lt;/h2&gt;
&lt;h3 id=&#34;1é”è¶…æ—¶&#34;&gt;1ï¼‰é”è¶…æ—¶&lt;/h3&gt;
&lt;p&gt;å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤å°å¹³è¡Œçš„æœåŠ¡ A Bï¼Œå…¶ä¸­ A æœåŠ¡åœ¨ &lt;strong&gt;è·å–é”ä¹‹å&lt;/strong&gt; ç”±äºæœªçŸ¥ç¥ç§˜åŠ›é‡çªç„¶ &lt;strong&gt;æŒ‚äº†&lt;/strong&gt;ï¼Œé‚£ä¹ˆ B æœåŠ¡å°±æ°¸è¿œæ— æ³•è·å–åˆ°é”äº†ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;17&#34;&gt;&lt;img src=&#34;https://upload-images.jianshu.io/upload_images/7896890-4ea386c23ef0eec9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œæ¥ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦ä¸€ä¸ªé—®é¢˜éšå³è€Œæ¥ï¼š&lt;strong&gt;å¦‚æœåœ¨åŠ é”å’Œé‡Šæ”¾é”ä¹‹é—´çš„é€»è¾‘æ‰§è¡Œå¾—å¤ªé•¿ï¼Œä»¥è‡³äºè¶…å‡ºäº†é”çš„è¶…æ—¶é™åˆ¶&lt;/strong&gt;ï¼Œä¹Ÿä¼šå‡ºç°é—®é¢˜ã€‚å› ä¸ºè¿™æ—¶å€™ç¬¬ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”è¿‡æœŸäº†ï¼Œè€Œä¸´ç•ŒåŒºçš„é€»è¾‘è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä¸æ­¤åŒæ—¶ç¬¬äºŒä¸ªçº¿ç¨‹å°±æå‰æ‹¥æœ‰äº†è¿™æŠŠé”ï¼Œå¯¼è‡´ä¸´ç•ŒåŒºçš„ä»£ç ä¸èƒ½å¾—åˆ°ä¸¥æ ¼çš„ä¸²è¡Œæ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œ&lt;strong&gt;Redis åˆ†å¸ƒå¼é”ä¸è¦ç”¨äºè¾ƒé•¿æ—¶é—´çš„ä»»åŠ¡&lt;/strong&gt;ã€‚å¦‚æœçœŸçš„å¶å°”å‡ºç°äº†é—®é¢˜ï¼Œé€ æˆçš„æ•°æ®å°é”™ä¹±å¯èƒ½å°±éœ€è¦äººå·¥çš„å¹²é¢„ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªç¨å¾®å®‰å…¨ä¸€ç‚¹çš„æ–¹æ¡ˆæ˜¯ &lt;strong&gt;å°†é”çš„ &lt;code&gt;value&lt;/code&gt; å€¼è®¾ç½®ä¸ºä¸€ä¸ªéšæœºæ•°&lt;/strong&gt;ï¼Œé‡Šæ”¾é”æ—¶å…ˆåŒ¹é…éšæœºæ•°æ˜¯å¦ä¸€è‡´ï¼Œç„¶åå†åˆ é™¤ keyï¼Œè¿™æ˜¯ä¸ºäº† &lt;strong&gt;ç¡®ä¿å½“å‰çº¿ç¨‹å æœ‰çš„é”ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹é‡Šæ”¾&lt;/strong&gt;ï¼Œé™¤éè¿™ä¸ªé”æ˜¯å› ä¸ºè¿‡æœŸäº†è€Œè¢«æœåŠ¡å™¨è‡ªåŠ¨é‡Šæ”¾çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯åŒ¹é… &lt;code&gt;value&lt;/code&gt; å’Œåˆ é™¤ &lt;code&gt;key&lt;/code&gt; åœ¨ Redis ä¸­å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼Œä¹Ÿæ²¡æœ‰ç±»ä¼¼ä¿è¯åŸå­æ€§çš„æŒ‡ä»¤ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ä½¿ç”¨åƒ Lua è¿™æ ·çš„è„šæœ¬æ¥å¤„ç†äº†ï¼Œå› ä¸º Lua è„šæœ¬å¯ä»¥ &lt;strong&gt;ä¿è¯å¤šä¸ªæŒ‡ä»¤çš„åŸå­æ€§æ‰§è¡Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å»¶ä¼¸çš„è®¨è®ºgc-å¯èƒ½å¼•å‘çš„å®‰å…¨é—®é¢˜&#34;&gt;å»¶ä¼¸çš„è®¨è®ºï¼šGC å¯èƒ½å¼•å‘çš„å®‰å…¨é—®é¢˜&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://martin.kleppmann.com/&#34;&gt;Martin Kleppmann&lt;/a&gt; æ›¾ä¸ Redis ä¹‹çˆ¶ Antirez å°± Redis å®ç°åˆ†å¸ƒå¼é”çš„å®‰å…¨æ€§é—®é¢˜è¿›è¡Œè¿‡æ·±å…¥çš„è®¨è®ºï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªé—®é¢˜å°±æ¶‰åŠåˆ° &lt;strong&gt;GC&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç†Ÿæ‚‰ Java çš„åŒå­¦è‚¯å®šå¯¹ GC ä¸é™Œç”Ÿï¼Œåœ¨ GC çš„æ—¶å€™ä¼šå‘ç”Ÿ &lt;strong&gt;STW(Stop-The-World)&lt;/strong&gt;ï¼Œè¿™æœ¬èº«æ˜¯ä¸ºäº†ä¿éšœåƒåœ¾å›æ”¶å™¨çš„æ­£å¸¸æ‰§è¡Œï¼Œä½†å¯èƒ½ä¼šå¼•å‘å¦‚ä¸‹çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;18&#34;&gt;&lt;img src=&#34;https://upload-images.jianshu.io/upload_images/7896890-cf3a403968a23be4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;æœåŠ¡ A è·å–äº†é”å¹¶è®¾ç½®äº†è¶…æ—¶æ—¶é—´ï¼Œä½†æ˜¯æœåŠ¡ A å‡ºç°äº† STW ä¸”æ—¶é—´è¾ƒé•¿ï¼Œå¯¼è‡´äº†åˆ†å¸ƒå¼é”è¿›è¡Œäº†è¶…æ—¶é‡Šæ”¾ï¼Œåœ¨è¿™ä¸ªæœŸé—´æœåŠ¡ B è·å–åˆ°äº†é”ï¼Œå¾…æœåŠ¡ A STW ç»“æŸä¹‹ååˆæ¢å¤äº†é”ï¼Œè¿™å°±å¯¼è‡´äº† &lt;strong&gt;æœåŠ¡ A å’ŒæœåŠ¡ B åŒæ—¶è·å–åˆ°äº†é”&lt;/strong&gt;ï¼Œè¿™ä¸ªæ—¶å€™åˆ†å¸ƒå¼é”å°±ä¸å®‰å…¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ä»…ä»…å±€é™äº Redisï¼ŒZookeeper å’Œ MySQL æœ‰åŒæ ·çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³åƒæ›´å¤šç“œçš„ç«¥é‹ï¼Œå¯ä»¥è®¿é—®ä¸‹åˆ—ç½‘ç«™çœ‹çœ‹ Redis ä¹‹çˆ¶ Antirez æ€ä¹ˆè¯´ï¼šhttp://antirez.com/news/101&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;redisæœ‰å“ªäº›æ•°æ®ç±»å‹åŠå…¶åº”ç”¨åœºæ™¯&#34;&gt;redisæœ‰å“ªäº›æ•°æ®ç±»å‹åŠå…¶åº”ç”¨åœºæ™¯&lt;/h2&gt;
&lt;h4 id=&#34;1-string&#34;&gt;1. string&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»‹ç»&lt;/strong&gt; ï¼šstring æ•°æ®ç»“æ„æ˜¯ç®€å•çš„ key-value ç±»å‹ã€‚è™½ç„¶ Redis æ˜¯ç”¨ C è¯­è¨€å†™çš„ï¼Œä½†æ˜¯ Redis å¹¶æ²¡æœ‰ä½¿ç”¨ C çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œè€Œæ˜¯è‡ªå·±æ„å»ºäº†ä¸€ç§ &lt;strong&gt;ç®€å•åŠ¨æ€å­—ç¬¦ä¸²&lt;/strong&gt;ï¼ˆsimple dynamic stringï¼Œ&lt;strong&gt;SDS&lt;/strong&gt;ï¼‰ã€‚ç›¸æ¯”äº C çš„åŸç”Ÿå­—ç¬¦ä¸²ï¼ŒRedis çš„ SDS ä¸å…‰å¯ä»¥ä¿å­˜æ–‡æœ¬æ•°æ®è¿˜å¯ä»¥ä¿å­˜äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶ä¸”è·å–å­—ç¬¦ä¸²é•¿åº¦å¤æ‚åº¦ä¸º O(1)ï¼ˆC å­—ç¬¦ä¸²ä¸º O(N)ï¼‰,é™¤æ­¤ä¹‹å¤–,Redis çš„ SDS API æ˜¯å®‰å…¨çš„ï¼Œä¸ä¼šé€ æˆç¼“å†²åŒºæº¢å‡ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸ç”¨å‘½ä»¤:&lt;/strong&gt; &lt;code&gt;set,get,strlen,exists,dect,incr,setex&lt;/code&gt; ç­‰ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt; ï¼šä¸€èˆ¬å¸¸ç”¨åœ¨éœ€è¦è®¡æ•°çš„åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·çš„è®¿é—®æ¬¡æ•°ã€çƒ­ç‚¹æ–‡ç« çš„ç‚¹èµè½¬å‘æ•°é‡ç­‰ç­‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ™®é€šå­—ç¬¦ä¸²çš„åŸºæœ¬æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; set key value #è®¾ç½® key-value ç±»å‹çš„å€¼
OK
127.0.0.1:6379&amp;gt; get key # æ ¹æ® key è·å¾—å¯¹åº”çš„ value
&amp;quot;value&amp;quot;
127.0.0.1:6379&amp;gt; exists key  # åˆ¤æ–­æŸä¸ª key æ˜¯å¦å­˜åœ¨
(integer) 1
127.0.0.1:6379&amp;gt; strlen key # è¿”å› key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼çš„é•¿åº¦ã€‚
(integer) 5
127.0.0.1:6379&amp;gt; del key # åˆ é™¤æŸä¸ª key å¯¹åº”çš„å€¼
(integer) 1
127.0.0.1:6379&amp;gt; get key
(nil)Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ‰¹é‡è®¾ç½®&lt;/strong&gt; :&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; mset key1 value1 key2 value2 # æ‰¹é‡è®¾ç½® key-value ç±»å‹çš„å€¼
OK
127.0.0.1:6379&amp;gt; mget key1 key2 # æ‰¹é‡è·å–å¤šä¸ª key å¯¹åº”çš„ value
1) &amp;quot;value1&amp;quot;
2) &amp;quot;value2&amp;quot;Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;è®¡æ•°å™¨ï¼ˆå­—ç¬¦ä¸²çš„å†…å®¹ä¸ºæ•´æ•°çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ï¼‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; set number 1
OK
127.0.0.1:6379&amp;gt; incr number # å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢ä¸€
(integer) 2
127.0.0.1:6379&amp;gt; get number
&amp;quot;2&amp;quot;
127.0.0.1:6379&amp;gt; decr number # å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å‡ä¸€
(integer) 1
127.0.0.1:6379&amp;gt; get number
&amp;quot;1&amp;quot;Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;è¿‡æœŸ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; expire key  60 # æ•°æ®åœ¨ 60s åè¿‡æœŸ
(integer) 1
127.0.0.1:6379&amp;gt; setex key 60 value # æ•°æ®åœ¨ 60s åè¿‡æœŸ (setex:[set] + [ex]pire)
OK
127.0.0.1:6379&amp;gt; ttl key # æŸ¥çœ‹æ•°æ®è¿˜æœ‰å¤šä¹…è¿‡æœŸ
(integer) 56Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;2-list&#34;&gt;2. list&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»‹ç»&lt;/strong&gt; ï¼š&lt;strong&gt;list&lt;/strong&gt; å³æ˜¯ &lt;strong&gt;é“¾è¡¨&lt;/strong&gt;ã€‚é“¾è¡¨æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œç‰¹ç‚¹æ˜¯æ˜“äºæ•°æ®å…ƒç´ çš„æ’å…¥å’Œåˆ é™¤å¹¶ä¸”ä¸”å¯ä»¥çµæ´»è°ƒæ•´é“¾è¡¨é•¿åº¦ï¼Œä½†æ˜¯é“¾è¡¨çš„éšæœºè®¿é—®å›°éš¾ã€‚è®¸å¤šé«˜çº§ç¼–ç¨‹è¯­è¨€éƒ½å†…ç½®äº†é“¾è¡¨çš„å®ç°æ¯”å¦‚ Java ä¸­çš„ &lt;strong&gt;LinkedList&lt;/strong&gt;ï¼Œä½†æ˜¯ C è¯­è¨€å¹¶æ²¡æœ‰å®ç°é“¾è¡¨ï¼Œæ‰€ä»¥ Redis å®ç°äº†è‡ªå·±çš„é“¾è¡¨æ•°æ®ç»“æ„ã€‚Redis çš„ list çš„å®ç°ä¸ºä¸€ä¸ª &lt;strong&gt;åŒå‘é“¾è¡¨&lt;/strong&gt;ï¼Œå³å¯ä»¥æ”¯æŒåå‘æŸ¥æ‰¾å’Œéå†ï¼Œæ›´æ–¹ä¾¿æ“ä½œï¼Œä¸è¿‡å¸¦æ¥äº†éƒ¨åˆ†é¢å¤–çš„å†…å­˜å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸ç”¨å‘½ä»¤:&lt;/strong&gt; &lt;code&gt;rpush,lpop,lpush,rpop,lrangeã€llen&lt;/code&gt; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯:&lt;/strong&gt; å‘å¸ƒä¸è®¢é˜…æˆ–è€…è¯´æ¶ˆæ¯é˜Ÿåˆ—ã€æ…¢æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬ç®€å•çœ‹çœ‹å®ƒçš„ä½¿ç”¨ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡ &lt;code&gt;rpush/lpop&lt;/code&gt; å®ç°é˜Ÿåˆ—ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; rpush myList value1 # å‘ list çš„å¤´éƒ¨ï¼ˆå³è¾¹ï¼‰æ·»åŠ å…ƒç´ 
(integer) 1
127.0.0.1:6379&amp;gt; rpush myList value2 value3 # å‘listçš„å¤´éƒ¨ï¼ˆæœ€å³è¾¹ï¼‰æ·»åŠ å¤šä¸ªå…ƒç´ 
(integer) 3
127.0.0.1:6379&amp;gt; lpop myList # å°† listçš„å°¾éƒ¨(æœ€å·¦è¾¹)å…ƒç´ å–å‡º
&amp;quot;value1&amp;quot;
127.0.0.1:6379&amp;gt; lrange myList 0 1 # æŸ¥çœ‹å¯¹åº”ä¸‹æ ‡çš„liståˆ—è¡¨ï¼Œ 0 ä¸º start,1ä¸º end
1) &amp;quot;value2&amp;quot;
2) &amp;quot;value3&amp;quot;
127.0.0.1:6379&amp;gt; lrange myList 0 -1 # æŸ¥çœ‹åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œ-1è¡¨ç¤ºå€’æ•°ç¬¬ä¸€
1) &amp;quot;value2&amp;quot;
2) &amp;quot;value3&amp;quot;Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡ &lt;code&gt;rpush/rpop&lt;/code&gt; å®ç°æ ˆï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; rpush myList2 value1 value2 value3
(integer) 3
127.0.0.1:6379&amp;gt; rpop myList2 # å°† listçš„å¤´éƒ¨(æœ€å³è¾¹)å…ƒç´ å–å‡º
&amp;quot;value3&amp;quot;Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä¸“é—¨èŠ±äº†ä¸€ä¸ªå›¾æ–¹ä¾¿å°ä¼™ä¼´ä»¬æ¥ç†è§£ï¼š&lt;/p&gt;
&lt;img src=&#34;https://snailclimb.gitee.io/javaguide/docs/database/Redis/images/redis-all/redis-list.png&#34; alt=&#34;redis list&#34; style=&#34;zoom: 80%;&#34; /&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡ &lt;code&gt;lrange&lt;/code&gt; æŸ¥çœ‹å¯¹åº”ä¸‹æ ‡èŒƒå›´çš„åˆ—è¡¨å…ƒç´ ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; rpush myList value1 value2 value3
(integer) 3
127.0.0.1:6379&amp;gt; lrange myList 0 1 # æŸ¥çœ‹å¯¹åº”ä¸‹æ ‡çš„liståˆ—è¡¨ï¼Œ 0 ä¸º start,1ä¸º end
1) &amp;quot;value1&amp;quot;
2) &amp;quot;value2&amp;quot;
127.0.0.1:6379&amp;gt; lrange myList 0 -1 # æŸ¥çœ‹åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œ-1è¡¨ç¤ºå€’æ•°ç¬¬ä¸€
1) &amp;quot;value1&amp;quot;
2) &amp;quot;value2&amp;quot;
3) &amp;quot;value3&amp;quot;Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;lrange&lt;/code&gt; å‘½ä»¤ï¼Œä½ å¯ä»¥åŸºäº list å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œæ€§èƒ½éå¸¸é«˜ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡ &lt;code&gt;llen&lt;/code&gt; æŸ¥çœ‹é“¾è¡¨é•¿åº¦ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; llen myList
(integer) 3Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;3-hash&#34;&gt;3. hash&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»‹ç»&lt;/strong&gt; ï¼šhash ç±»ä¼¼äº JDK1.8 å‰çš„ HashMapï¼Œå†…éƒ¨å®ç°ä¹Ÿå·®ä¸å¤š(æ•°ç»„ + é“¾è¡¨)ã€‚ä¸è¿‡ï¼ŒRedis çš„ hash åšäº†æ›´å¤šä¼˜åŒ–ã€‚å¦å¤–ï¼Œhash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œ&lt;strong&gt;ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡&lt;/strong&gt;ï¼Œåç»­æ“ä½œçš„æ—¶å€™ï¼Œä½ å¯ä»¥ç›´æ¥ä»…ä»…ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå­—æ®µçš„å€¼ã€‚ æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ hash æ•°æ®ç»“æ„æ¥å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œå•†å“ä¿¡æ¯ç­‰ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸ç”¨å‘½ä»¤ï¼š&lt;/strong&gt; &lt;code&gt;hset,hmset,hexists,hget,hgetall,hkeys,hvals&lt;/code&gt; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯:&lt;/strong&gt; ç³»ç»Ÿä¸­å¯¹è±¡æ•°æ®çš„å­˜å‚¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬ç®€å•çœ‹çœ‹å®ƒçš„ä½¿ç”¨ï¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; hset userInfoKey name &amp;quot;guide&amp;quot; description &amp;quot;dev&amp;quot; age &amp;quot;24&amp;quot;
OK
127.0.0.1:6379&amp;gt; hexists userInfoKey name # æŸ¥çœ‹ key å¯¹åº”çš„ valueä¸­æŒ‡å®šçš„å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚
(integer) 1
127.0.0.1:6379&amp;gt; hget userInfoKey name # è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼ã€‚
&amp;quot;guide&amp;quot;
127.0.0.1:6379&amp;gt; hget userInfoKey age
&amp;quot;24&amp;quot;
127.0.0.1:6379&amp;gt; hgetall userInfoKey # è·å–åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®š key çš„æ‰€æœ‰å­—æ®µå’Œå€¼
1) &amp;quot;name&amp;quot;
2) &amp;quot;guide&amp;quot;
3) &amp;quot;description&amp;quot;
4) &amp;quot;dev&amp;quot;
5) &amp;quot;age&amp;quot;
6) &amp;quot;24&amp;quot;
127.0.0.1:6379&amp;gt; hkeys userInfoKey # è·å– key åˆ—è¡¨
1) &amp;quot;name&amp;quot;
2) &amp;quot;description&amp;quot;
3) &amp;quot;age&amp;quot;
127.0.0.1:6379&amp;gt; hvals userInfoKey # è·å– value åˆ—è¡¨
1) &amp;quot;guide&amp;quot;
2) &amp;quot;dev&amp;quot;
3) &amp;quot;24&amp;quot;
127.0.0.1:6379&amp;gt; hset userInfoKey name &amp;quot;GuideGeGe&amp;quot; # ä¿®æ”¹æŸä¸ªå­—æ®µå¯¹åº”çš„å€¼
127.0.0.1:6379&amp;gt; hget userInfoKey name
&amp;quot;GuideGeGe&amp;quot;Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;4-set&#34;&gt;4. set&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»‹ç» ï¼š&lt;/strong&gt; set ç±»ä¼¼äº Java ä¸­çš„ &lt;code&gt;HashSet&lt;/code&gt; ã€‚Redis ä¸­çš„ set ç±»å‹æ˜¯ä¸€ç§æ— åºé›†åˆï¼Œé›†åˆä¸­çš„å…ƒç´ æ²¡æœ‰å…ˆåé¡ºåºã€‚å½“ä½ éœ€è¦å­˜å‚¨ä¸€ä¸ªåˆ—è¡¨æ•°æ®ï¼Œåˆä¸å¸Œæœ›å‡ºç°é‡å¤æ•°æ®æ—¶ï¼Œset æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå¹¶ä¸” set æä¾›äº†åˆ¤æ–­æŸä¸ªæˆå‘˜æ˜¯å¦åœ¨ä¸€ä¸ª set é›†åˆå†…çš„é‡è¦æ¥å£ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ list æ‰€ä¸èƒ½æä¾›çš„ã€‚å¯ä»¥åŸºäº set è½»æ˜“å®ç°äº¤é›†ã€å¹¶é›†ã€å·®é›†çš„æ“ä½œã€‚æ¯”å¦‚ï¼šä½ å¯ä»¥å°†ä¸€ä¸ªç”¨æˆ·æ‰€æœ‰çš„å…³æ³¨äººå­˜åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå°†å…¶æ‰€æœ‰ç²‰ä¸å­˜åœ¨ä¸€ä¸ªé›†åˆã€‚Redis å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°å¦‚å…±åŒå…³æ³¨ã€å…±åŒç²‰ä¸ã€å…±åŒå–œå¥½ç­‰åŠŸèƒ½ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå°±æ˜¯æ±‚äº¤é›†çš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸ç”¨å‘½ä»¤ï¼š&lt;/strong&gt; &lt;code&gt;sadd,spop,smembers,sismember,scard,sinterstore,sunion&lt;/code&gt; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯:&lt;/strong&gt; éœ€è¦å­˜æ”¾çš„æ•°æ®ä¸èƒ½é‡å¤ä»¥åŠéœ€è¦è·å–å¤šä¸ªæ•°æ®æºäº¤é›†å’Œå¹¶é›†ç­‰åœºæ™¯&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬ç®€å•çœ‹çœ‹å®ƒçš„ä½¿ç”¨ï¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; sadd mySet value1 value2 # æ·»åŠ å…ƒç´ è¿›å»
(integer) 2
127.0.0.1:6379&amp;gt; sadd mySet value1 # ä¸å…è®¸æœ‰é‡å¤å…ƒç´ 
(integer) 0
127.0.0.1:6379&amp;gt; smembers mySet # æŸ¥çœ‹ set ä¸­æ‰€æœ‰çš„å…ƒç´ 
1) &amp;quot;value1&amp;quot;
2) &amp;quot;value2&amp;quot;
127.0.0.1:6379&amp;gt; scard mySet # æŸ¥çœ‹ set çš„é•¿åº¦
(integer) 2
127.0.0.1:6379&amp;gt; sismember mySet value1 # æ£€æŸ¥æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨set ä¸­ï¼Œåªèƒ½æ¥æ”¶å•ä¸ªå…ƒç´ 
(integer) 1
127.0.0.1:6379&amp;gt; sadd mySet2 value2 value3
(integer) 2
127.0.0.1:6379&amp;gt; sinterstore mySet3 mySet mySet2 # è·å– mySet å’Œ mySet2 çš„äº¤é›†å¹¶å­˜æ”¾åœ¨ mySet3 ä¸­
(integer) 1
127.0.0.1:6379&amp;gt; smembers mySet3
1) &amp;quot;value2&amp;quot;Copy to clipboardErrorCopied
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;5-sorted-set&#34;&gt;5. sorted set&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»‹ç»ï¼š&lt;/strong&gt; å’Œ set ç›¸æ¯”ï¼Œsorted set å¢åŠ äº†ä¸€ä¸ªæƒé‡å‚æ•° scoreï¼Œä½¿å¾—é›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰ score è¿›è¡Œæœ‰åºæ’åˆ—ï¼Œè¿˜å¯ä»¥é€šè¿‡ score çš„èŒƒå›´æ¥è·å–å…ƒç´ çš„åˆ—è¡¨ã€‚æœ‰ç‚¹åƒæ˜¯ Java ä¸­ HashMap å’Œ TreeSet çš„ç»“åˆä½“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸ç”¨å‘½ä»¤ï¼š&lt;/strong&gt; &lt;code&gt;zadd,zcard,zscore,zrange,zrevrange,zrem&lt;/code&gt; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯ï¼š&lt;/strong&gt; éœ€è¦å¯¹æ•°æ®æ ¹æ®æŸä¸ªæƒé‡è¿›è¡Œæ’åºçš„åœºæ™¯ã€‚æ¯”å¦‚åœ¨ç›´æ’­ç³»ç»Ÿä¸­ï¼Œå®æ—¶æ’è¡Œä¿¡æ¯åŒ…å«ç›´æ’­é—´åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼Œå„ç§ç¤¼ç‰©æ’è¡Œæ¦œï¼Œå¼¹å¹•æ¶ˆæ¯ï¼ˆå¯ä»¥ç†è§£ä¸ºæŒ‰æ¶ˆæ¯ç»´åº¦çš„æ¶ˆæ¯æ’è¡Œæ¦œï¼‰ç­‰ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;127.0.0.1:6379&amp;gt; zadd myZset 3.0 value1 # æ·»åŠ å…ƒç´ åˆ° sorted set ä¸­ 3.0 ä¸ºæƒé‡
(integer) 1
127.0.0.1:6379&amp;gt; zadd myZset 2.0 value2 1.0 value3 # ä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ 
(integer) 2
127.0.0.1:6379&amp;gt; zcard myZset # æŸ¥çœ‹ sorted set ä¸­çš„å…ƒç´ æ•°é‡
(integer) 3
127.0.0.1:6379&amp;gt; zscore myZset value1 # æŸ¥çœ‹æŸä¸ª value çš„æƒé‡
&amp;quot;3&amp;quot;
127.0.0.1:6379&amp;gt; zrange  myZset 0 -1 # é¡ºåºè¾“å‡ºæŸä¸ªèŒƒå›´åŒºé—´çš„å…ƒç´ ï¼Œ0 -1 è¡¨ç¤ºè¾“å‡ºæ‰€æœ‰å…ƒç´ 
1) &amp;quot;value3&amp;quot;
2) &amp;quot;value2&amp;quot;
3) &amp;quot;value1&amp;quot;
127.0.0.1:6379&amp;gt; zrange  myZset 0 1 # é¡ºåºè¾“å‡ºæŸä¸ªèŒƒå›´åŒºé—´çš„å…ƒç´ ï¼Œ0 ä¸º start  1 ä¸º stop
1) &amp;quot;value3&amp;quot;
2) &amp;quot;value2&amp;quot;
127.0.0.1:6379&amp;gt; zrevrange  myZset 0 1 # é€†åºè¾“å‡ºæŸä¸ªèŒƒå›´åŒºé—´çš„å…ƒç´ ï¼Œ0 ä¸º start  1 ä¸º stop
1) &amp;quot;value1&amp;quot;
2) &amp;quot;value2&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;redisé›†ç¾¤æ¶æ„&#34;&gt;redisé›†ç¾¤æ¶æ„&lt;/h2&gt;
&lt;h4 id=&#34;redis-ä¸»ä»å¤åˆ¶&#34;&gt;Redis ä¸»ä»å¤åˆ¶&lt;/h4&gt;
&lt;p&gt;åˆ° &lt;a href=&#34;https://snailclimb.gitee.io/javaguide/#/docs/database/Redis/redis-collection/Redis(9)%E2%80%94%E2%80%94%E9%9B%86%E7%BE%A4%E5%85%A5%E9%97%A8%E5%AE%9E%E8%B7%B5%E6%95%99%E7%A8%8B?id=%E7%9B%B8%E5%85%B3%E9%98%85%E8%AF%BB&#34;&gt;ç›®å‰&lt;/a&gt; ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€å­¦ä¹ çš„ Redis éƒ½æ˜¯ &lt;strong&gt;å•æœºç‰ˆ&lt;/strong&gt; çš„ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ä¸€æ—¦æˆ‘ä»¬æ‰€ä¾èµ–çš„ Redis æœåŠ¡å®•æœºäº†ï¼Œæˆ‘ä»¬çš„ä¸»æµç¨‹ä¹Ÿä¼šå—åˆ°ä¸€å®šçš„å½±å“ï¼Œè¿™å½“ç„¶æ˜¯æˆ‘ä»¬ä¸èƒ½å¤Ÿæ¥å—çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä¸€å¼€å§‹æˆ‘ä»¬çš„æƒ³æ³•æ˜¯ï¼šæä¸€å°å¤‡ç”¨æœºã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸€å°æœåŠ¡å™¨å‡ºç°é—®é¢˜çš„æ—¶å€™åˆ‡æ¢åŠ¨æ€åœ°åˆ°å¦ä¸€å°å»ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;19&#34;&gt;&lt;img src=&#34;https://upload-images.jianshu.io/upload_images/7896890-c48d255bc0b13672.gif?imageMogr2/auto-orient/strip&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼Œä¸¤ä¸ªèŠ‚ç‚¹æ•°æ®çš„åŒæ­¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Redis çš„ &lt;strong&gt;ä¸»ä»åŒæ­¥&lt;/strong&gt; åŠŸèƒ½å¸®åŠ©åˆ°æˆ‘ä»¬ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæœ‰ä¸ªå¤‡ä»½ï¼Œå¿ƒé‡Œå°±è¸å®å¤šäº†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;redis-å“¨å…µ&#34;&gt;Redis å“¨å…µ&lt;/h4&gt;
&lt;p&gt;åæ¥å› ä¸ºæŸç§ç¥ç§˜åŠ›é‡ï¼ŒRedis è€ä¼šåœ¨è«åå…¶å¦™çš„æ—¶é—´ç‚¹å‡ºé—®é¢˜ &lt;em&gt;(æ¯”å¦‚åŠå¤œ 2 ç‚¹)&lt;/em&gt;ï¼Œæˆ‘æ€»ä¸èƒ½ 24 å°æ—¶æ—¶åˆ»å®ˆåœ¨ç”µè„‘æ—è¾¹åˆ‡æ¢èŠ‚ç‚¹å§ï¼Œäºæ˜¯å¦ä¸€ä¸ªæƒ³æ³•åˆå¼€å§‹äº†ï¼šç»™æ‰€æœ‰çš„èŠ‚ç‚¹æ‰¾ä¸€ä¸ª &lt;strong&gt;&amp;quot;ç®¡å®¶&amp;quot;&lt;/strong&gt;ï¼Œè‡ªåŠ¨å¸®æˆ‘ç›‘å¬ç…§é¡¾èŠ‚ç‚¹çš„çŠ¶æ€å¹¶åˆ‡æ¢ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;20&#34;&gt;&lt;img src=&#34;https://upload-images.jianshu.io/upload_images/7896890-de8d9ce9e77bf211.gif?imageMogr2/auto-orient/strip&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;è¿™å¤§æ¦‚å°±æ˜¯ &lt;strong&gt;Redis å“¨å…µ&lt;/strong&gt; &lt;em&gt;(Sentinel)&lt;/em&gt; çš„ç®€å•ç†è§£å•¦ã€‚ä»€ä¹ˆï¼Ÿç®¡å®¶å®•æœºäº†æ€ä¹ˆåŠï¼Ÿç›¸è¾ƒäºæœ‰å¤§é‡è¯·æ±‚çš„ Redis æœåŠ¡æ¥è¯´ï¼Œç®¡å®¶å®•æœºçš„æ¦‚ç‡å°±è¦å°å¾—å¤šå•¦.. å¦‚æœçœŸçš„å®•æœºäº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åˆ‡æ¢æˆå½“å‰å¯ç”¨çš„èŠ‚ç‚¹ä¿è¯å¯ç”¨.&lt;/p&gt;
&lt;h4 id=&#34;redis-é›†ç¾¤åŒ–&#34;&gt;Redis é›†ç¾¤åŒ–&lt;/h4&gt;
&lt;p&gt;å¥½äº†ï¼Œé€šè¿‡ä¸Šé¢çš„ä¸€äº›è§£å†³æ–¹æ¡ˆæˆ‘ä»¬å¯¹ Redis çš„ &lt;strong&gt;ç¨³å®šæ€§&lt;/strong&gt; ç¨å¾®æœ‰äº†ä¸€äº›åº•æ°”äº†ï¼Œä½†å•å°èŠ‚ç‚¹çš„è®¡ç®—èƒ½åŠ›å§‹ç»ˆæœ‰é™ï¼Œæ‰€è°“äººå¤šåŠ›é‡å¤§ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ &lt;strong&gt;å¤šä¸ªèŠ‚ç‚¹ç»„åˆ&lt;/strong&gt; æˆ &lt;strong&gt;ä¸€ä¸ªå¯ç”¨çš„å·¥ä½œèŠ‚ç‚¹&lt;/strong&gt;ï¼Œé‚£å°±å¤§å¤§å¢åŠ äº† Redis çš„ &lt;strong&gt;é«˜å¯ç”¨ã€å¯æ‰©å±•ã€åˆ†å¸ƒå¼ã€å®¹é”™&lt;/strong&gt; ç­‰ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;21&#34;&gt;&lt;img src=&#34;https://upload-images.jianshu.io/upload_images/7896890-516eb4a9465451a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;ä¸Šå›¾&lt;/em&gt; å±•ç¤ºäº† &lt;strong&gt;Redis Cluster&lt;/strong&gt; å…¸å‹çš„æ¶æ„å›¾ï¼Œé›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ª Redis èŠ‚ç‚¹éƒ½ &lt;strong&gt;äº’ç›¸ä¸¤ä¸¤ç›¸è¿&lt;/strong&gt;ï¼Œå®¢æˆ·ç«¯ä»»æ„ &lt;strong&gt;ç›´è¿&lt;/strong&gt; åˆ°é›†ç¾¤ä¸­çš„ &lt;strong&gt;ä»»æ„ä¸€å°&lt;/strong&gt;ï¼Œå°±å¯ä»¥å¯¹å…¶ä»– Redis èŠ‚ç‚¹è¿›è¡Œ &lt;strong&gt;è¯»å†™&lt;/strong&gt; çš„æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;redisæ•°æ®ç±»å‹çš„åº•å±‚æ•°æ®ç»“æ„&#34;&gt;redisæ•°æ®ç±»å‹çš„åº•å±‚æ•°æ®ç»“æ„&lt;/h2&gt;
&lt;h1 id=&#34;redis-äº”ç§åŸºæœ¬æ•°æ®ç»“æ„&#34;&gt;&lt;a href=&#34;https://snailclimb.gitee.io/javaguide/#/docs/database/Redis/redis-collection/Redis(1)%E2%80%94%E2%80%945%E7%A7%8D%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84?id=%E4%BA%8C%E3%80%81redis-%E4%BA%94%E7%A7%8D%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84&#34;&gt;Redis äº”ç§åŸºæœ¬æ•°æ®ç»“æ„&lt;/a&gt;&lt;/h1&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h2 id=&#34;redisä¸ºä»€ä¹ˆå¿«è¯´ä¸€ä¸‹ioå¤šè·¯å¤ç”¨åŠ&#34;&gt;redisä¸ºä»€ä¹ˆå¿«ï¼Œè¯´ä¸€ä¸‹ioå¤šè·¯å¤ç”¨åŠ&lt;/h2&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¤§ä½“ä¸Šæ¥è¯´ï¼Œ&lt;strong&gt;Redis 6.0 ä¹‹å‰ä¸»è¦è¿˜æ˜¯å•çº¿ç¨‹å¤„ç†ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‚£ï¼ŒRedis6.0 ä¹‹å‰ ä¸ºä»€ä¹ˆä¸ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘è§‰å¾—ä¸»è¦åŸå› æœ‰ä¸‹é¢ 3 ä¸ªï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å•çº¿ç¨‹ç¼–ç¨‹å®¹æ˜“å¹¶ä¸”æ›´å®¹æ˜“ç»´æŠ¤ï¼›&lt;/li&gt;
&lt;li&gt;Redis çš„æ€§èƒ½ç“¶é¢ˆä¸å† CPU ï¼Œä¸»è¦åœ¨å†…å­˜å’Œç½‘ç»œï¼›&lt;/li&gt;
&lt;li&gt;å¤šçº¿ç¨‹å°±ä¼šå­˜åœ¨æ­»é”ã€çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ç­‰é—®é¢˜ï¼Œç”šè‡³ä¼šå½±å“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ—¢ç„¶æ˜¯å•çº¿ç¨‹ï¼Œé‚£æ€ä¹ˆç›‘å¬å¤§é‡çš„å®¢æˆ·ç«¯è¿æ¥å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Redis é€šè¿‡&lt;strong&gt;IO å¤šè·¯å¤ç”¨ç¨‹åº&lt;/strong&gt; æ¥ç›‘å¬æ¥è‡ªå®¢æˆ·ç«¯çš„å¤§é‡è¿æ¥ï¼ˆæˆ–è€…è¯´æ˜¯ç›‘å¬å¤šä¸ª socketï¼‰ï¼Œå®ƒä¼šå°†æ„Ÿå…´è¶£çš„äº‹ä»¶åŠç±»å‹(è¯»ã€å†™ï¼‰æ³¨å†Œåˆ°å†…æ ¸ä¸­å¹¶ç›‘å¬æ¯ä¸ªäº‹ä»¶æ˜¯å¦å‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„å¥½å¤„éå¸¸æ˜æ˜¾ï¼š &lt;strong&gt;I/O å¤šè·¯å¤ç”¨æŠ€æœ¯çš„ä½¿ç”¨è®© Redis ä¸éœ€è¦é¢å¤–åˆ›å»ºå¤šä½™çš„çº¿ç¨‹æ¥ç›‘å¬å®¢æˆ·ç«¯çš„å¤§é‡è¿æ¥ï¼Œé™ä½äº†èµ„æºçš„æ¶ˆè€—&lt;/strong&gt;ï¼ˆå’Œ NIO ä¸­çš„ &lt;code&gt;Selector&lt;/code&gt; ç»„ä»¶å¾ˆåƒï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œ Redis æœåŠ¡å™¨æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ç¨‹åºï¼ŒæœåŠ¡å™¨éœ€è¦å¤„ç†ä¸¤ç±»äº‹ä»¶ï¼š 1. æ–‡ä»¶äº‹ä»¶; 2. æ—¶é—´äº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;æ—¶é—´äº‹ä»¶ä¸éœ€è¦å¤šèŠ±æ—¶é—´äº†è§£ï¼Œæˆ‘ä»¬æ¥è§¦æœ€å¤šçš„è¿˜æ˜¯ &lt;strong&gt;æ–‡ä»¶äº‹ä»¶&lt;/strong&gt;ï¼ˆå®¢æˆ·ç«¯è¿›è¡Œè¯»å–å†™å…¥ç­‰æ“ä½œï¼Œæ¶‰åŠä¸€ç³»åˆ—ç½‘ç»œé€šä¿¡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹æœ‰ä¸€æ®µè¯æ˜¯å¦‚æ˜¯ä»‹ç»æ–‡ä»¶äº‹ä»¶çš„ï¼Œæˆ‘è§‰å¾—å†™å¾—æŒºä¸é”™ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Redis åŸºäº Reactor æ¨¡å¼å¼€å‘äº†è‡ªå·±çš„ç½‘ç»œäº‹ä»¶å¤„ç†å™¨ï¼šè¿™ä¸ªå¤„ç†å™¨è¢«ç§°ä¸ºæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ï¼ˆfile event handlerï¼‰ã€‚æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ä½¿ç”¨ I/O å¤šè·¯å¤ç”¨ï¼ˆmultiplexingï¼‰ç¨‹åºæ¥åŒæ—¶ç›‘å¬å¤šä¸ªå¥—æ¥å­—ï¼Œå¹¶æ ¹æ® å¥—æ¥å­—ç›®å‰æ‰§è¡Œçš„ä»»åŠ¡æ¥ä¸ºå¥—æ¥å­—å…³è”ä¸åŒçš„äº‹ä»¶å¤„ç†å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å½“è¢«ç›‘å¬çš„å¥—æ¥å­—å‡†å¤‡å¥½æ‰§è¡Œè¿æ¥åº”ç­”ï¼ˆacceptï¼‰ã€è¯»å–ï¼ˆreadï¼‰ã€å†™å…¥ï¼ˆwriteï¼‰ã€å…³ é—­ï¼ˆcloseï¼‰ç­‰æ“ä½œæ—¶ï¼Œä¸æ“ä½œç›¸å¯¹åº”çš„æ–‡ä»¶äº‹ä»¶å°±ä¼šäº§ç”Ÿï¼Œè¿™æ—¶æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨å°±ä¼šè°ƒç”¨å¥—æ¥å­—ä¹‹å‰å…³è”å¥½çš„äº‹ä»¶å¤„ç†å™¨æ¥å¤„ç†è¿™äº›äº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è™½ç„¶æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ä»¥å•çº¿ç¨‹æ–¹å¼è¿è¡Œï¼Œä½†é€šè¿‡ä½¿ç”¨ I/O å¤šè·¯å¤ç”¨ç¨‹åºæ¥ç›‘å¬å¤šä¸ªå¥—æ¥å­—&lt;/strong&gt;ï¼Œæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨æ—¢å®ç°äº†é«˜æ€§èƒ½çš„ç½‘ç»œé€šä¿¡æ¨¡å‹ï¼Œåˆå¯ä»¥å¾ˆå¥½åœ°ä¸ Redis æœåŠ¡å™¨ä¸­å…¶ä»–åŒæ ·ä»¥å•çº¿ç¨‹æ–¹å¼è¿è¡Œçš„æ¨¡å—è¿›è¡Œå¯¹æ¥ï¼Œè¿™ä¿æŒäº† Redis å†…éƒ¨å•çº¿ç¨‹è®¾è®¡çš„ç®€å•æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ï¼ˆfile event handlerï¼‰ä¸»è¦æ˜¯åŒ…å« 4 ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤šä¸ª socketï¼ˆå®¢æˆ·ç«¯è¿æ¥ï¼‰&lt;/li&gt;
&lt;li&gt;IO å¤šè·¯å¤ç”¨ç¨‹åºï¼ˆæ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯è¿æ¥çš„å…³é”®ï¼‰&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ï¼ˆå°† socket å…³è”åˆ°ç›¸åº”çš„äº‹ä»¶å¤„ç†å™¨ï¼‰&lt;/li&gt;
&lt;li&gt;äº‹ä»¶å¤„ç†å™¨ï¼ˆè¿æ¥åº”ç­”å¤„ç†å™¨ã€å‘½ä»¤è¯·æ±‚å¤„ç†å™¨ã€å‘½ä»¤å›å¤å¤„ç†å™¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&#34;https://snailclimb.gitee.io/javaguide/docs/database/Redis/images/redis-all/redis%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%99%A8.png&#34; alt=&#34;img&#34; style=&#34;zoom: 50%;&#34; /&gt;">Golang é¢è¯•é¢˜æ€»ç»“</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://ChicRingo.github.io/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å…³äºæœ¬ç«™&#34;&gt;ğŸ  å…³äºæœ¬ç«™&lt;/h2&gt;
&lt;p&gt;å’¸é±¼ä¸ªäººç”¨çš„åšå®¢ï¼Œè®°å½•ä¸€äº›å¹³æ—¶å­¦åˆ°ç”¨åˆ°çš„æŠ€æœ¯çŸ¥è¯†&lt;/p&gt;
&lt;h2 id=&#34;åšä¸»æ˜¯è°&#34;&gt;ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°&lt;/h2&gt;
&lt;p&gt;å’¸é±¼ä¸€æ¡&lt;/p&gt;
&lt;h2 id=&#34;å…´è¶£çˆ±å¥½&#34;&gt;â›¹ å…´è¶£çˆ±å¥½&lt;/h2&gt;
&lt;p&gt;æˆ‘çˆ±å­¦ä¹ &lt;/p&gt;
&lt;h2 id=&#34;è”ç³»æˆ‘å‘€&#34;&gt;ğŸ“¬ è”ç³»æˆ‘å‘€&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/ChicRingo&#34;&gt;github.com/ChicRingo&lt;/a&gt;&lt;/p&gt;
">å…³äº</a>
      </div>
      
    </div>
    <div class="page">
      <div id="page_ul"></div>
    </div>
  </div>
</div>
<script>
  !function () {
    let searchMask = document.querySelector('#search_mask');
    let result = document.querySelector('#result');
    let items = document.querySelectorAll('.item');
    let searchBox = document.querySelector('#search');
    let statCount = document.querySelector('#stat_count');
    let statTimes = document.querySelector('#stat_times');
    let pageUl = document.querySelector('#page_ul');
    let close = document.querySelector('#close');
    
    close.addEventListener('click', function() {
      searchMask.style = 'display: none;'
    })

    let finds = [];
    let contents = [];
    let pageSize = 10;
    items.forEach(item => {
      let a = item.querySelector('a');
      contents.push({
        title: a.innerText,
        details: a.dataset.c,
        link: a.href
      })
      item.remove();
    })

    function insertStr(soure, start, count) {
      let newStr = soure.substr(start, count);
      return soure.slice(0, start) + '<em>' + newStr + '</em>' + soure.slice(start + count);
    }

    pageUl.addEventListener('click', function(event) {
      let target = event.target;
      if (target.__proto__ === HTMLSpanElement.prototype) {
        appendResults(parseInt(target.dataset.i));
      }
    })

    function appendResults(index) {
      let htmlResult = '';
      let start = index || 0;
      let end = Math.min(start + pageSize, finds.length);
      for (let i = start; i < end; i++) {
        const current = finds[i];
        let html = current.title;
        let sum = 0;
        let positions = current.positions;
        positions.forEach(position => {
          html = insertStr(html, position.start + sum, position.count);
          sum += 9;
        })
        htmlResult += `<div class="item"><a class="result-title" href="${current.link}">${html}</a></div>`;
      }
      result.innerHTML = htmlResult;
      pageUl.innerHTML = '';
      let count = finds.length / pageSize;
      let lis = '';
      if (start !== 0) {
        lis += `<span class="fa fa-angle-left" data-i='${start - 1}'></span>`;
      }
      for (let i = 0; i < count; i++) {
        lis += `<span class='${i === start?'current':''}' data-i='${i}'>${i+1}</span>`;     
      }
      if (start+1 < count) {
        lis += `<span class="fa fa-angle-right" data-i='${start+1}'></span>`;  
      }
      pageUl.innerHTML = lis;
    }

    function search(delay) {
      let timer = null
      return function () {
        clearTimeout(timer)
        timer = setTimeout(() => {
          let start = Date.now();
          let segments = searchBox.value.split(' ').filter(c => c != '');
          if (segments.length <= 0) {
            return;
          }
          finds = [];
          let htmlResult = '';
          contents.forEach(content => {
            let title = content.title;
            let positions = [];
            let find = false;
            segments.forEach((segment) => {
              if (content.title.includes(segment)) {
                find = true;
                positions.push({
                  start: content.title.indexOf(segment),
                  count: segment.length
                })
              } else if (content.details.includes(segment)) {
                find = true;
              }
            });
            if (find) {
              finds.push({
                title: content.title,
                link: content.link,
                positions
              });
            }
          })
          appendResults(0);
          statCount.textContent = finds.length;
          statTimes.textContent = Date.now() - start;
        }, delay)
      }
    }
    searchBox.addEventListener('input', search(200));
  }()
</script>

<input hidden id="copy" />
<script>
  !function () {
    let times = document.querySelectorAll('.publish-time');
    for (let i = 0; i < times.length; i++) {
      let date = times[i].dataset.t;
      let time = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);
      if (time < 60) {
        str = time + 'ç§’ä¹‹å‰';
      } else if (time < 3600) {
        str = Math.floor(time / 60) + 'åˆ†é’Ÿä¹‹å‰';
      } else if (time >= 3600 && time < 86400) {
        str = Math.floor(time / 3600) + 'å°æ—¶ä¹‹å‰';
      } else if (time >= 86400 && time < 259200) {
        str = Math.floor(time / 86400) + 'å¤©ä¹‹å‰';
      } else {
        str = times[i].textContent;
      }
      times[i].textContent = str;
    }
  }();
</script>

<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }
  //æ‹¿æ¥ä¸»ä¹‰(çœŸé¦™)^_^ï¼ŒClipboard å®ç°æ‘˜è‡ªæ˜é‡‘ https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // åˆ¤æ–­æ˜¯ä¸æ˜¯iosç«¯
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //åˆ›å»ºæ–‡æœ¬å…ƒç´ 
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //é€‰æ‹©å†…å®¹
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //å¤åˆ¶åˆ°å‰ªè´´æ¿
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("å¤åˆ¶é”™è¯¯ï¼è¯·æ‰‹åŠ¨å¤åˆ¶ï¼")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === 'å¤åˆ¶æˆåŠŸ') {
        return;
      }
      e.srcElement.textContent = 'å¤åˆ¶æˆåŠŸ';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === 'å¤åˆ¶æˆåŠŸ') {
            elem.textContent = 'å¤åˆ¶ä»£ç '
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = 'å¤åˆ¶ä»£ç ';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>

<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 200
  });
</script>



<script src="/media/js/cool.js"></script>




</html>